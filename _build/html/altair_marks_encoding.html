
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>2. データ型、グラフィカルマーク、およびビジュアルエンコーディングチャネル &#8212; Visualization Curriculum</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'altair_marks_encoding';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="3. Data Transformation" href="altair_data_transformation.html" />
    <link rel="prev" title="1. Altairの紹介" href="altair_introduction.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/altair-hist.png" class="logo__image only-light" alt="Visualization Curriculum - Home"/>
    <img src="_static/altair-hist.png" class="logo__image only-dark pst-js-only" alt="Visualization Curriculum - Home"/>
  
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Introduction
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Curriculum</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="altair_introduction.html">1. Altairの紹介</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">2. データ型、グラフィカルマーク、およびビジュアルエンコーディングチャネル</a></li>
<li class="toctree-l1"><a class="reference internal" href="altair_data_transformation.html">3. Data Transformation</a></li>
<li class="toctree-l1"><a class="reference internal" href="altair_scales_axes_legends.html">4. Scales, Axes, and Legends</a></li>
<li class="toctree-l1"><a class="reference internal" href="altair_view_composition.html">5. Multi-View Composition</a></li>
<li class="toctree-l1"><a class="reference internal" href="altair_interaction.html">6. Interaction</a></li>
<li class="toctree-l1"><a class="reference internal" href="altair_cartographic.html">7. Cartographic Visualization</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Support</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="altair_debugging.html">Altair Debugging Guide</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://colab.research.google.com/github/uwdata/visualization-curriculum/blob/master/altair_marks_encoding.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch on Colab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img alt="Colab logo" src="_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/uwdata/visualization-curriculum" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/uwdata/visualization-curriculum/issues/new?title=Issue%20on%20page%20%2Faltair_marks_encoding.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/altair_marks_encoding.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>データ型、グラフィカルマーク、およびビジュアルエンコーディングチャネル</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#global-development-data">2.1. Global Development Data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">2.2. データ型</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#n">2.2.1. 名義型 (N)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#o">2.2.2. 順序型 (O)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#q">2.2.3. 量的型 (Q)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#t">2.2.4. 時間型 (T)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">2.2.5. まとめ</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">2.3. エンコーディングチャネル</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#x">2.3.1. X</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#y">2.3.2. Y</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">2.3.3. サイズ</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">2.3.4. 色と不透明度</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">2.3.5. 形状</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">2.3.6. ツールチップと順序</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">2.3.7. 列と行のファセット</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">2.3.8. 先取り: インタラクティブフィルタリング</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">2.4. グラフィカルマーク</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id12">2.4.1. ポイントマーク</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id13">2.4.2. サークルマーク</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id14">2.4.3. スクエアマーク</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id15">2.4.4. ティックマーク</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id16">2.4.5. バーマーク</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id17">2.4.6. ラインマーク</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id18">2.4.7. エリアマーク</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id19">2.5. まとめ</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="id1">
<h1><span class="section-number">2. </span>データ型、グラフィカルマーク、およびビジュアルエンコーディングチャネル<a class="headerlink" href="#id1" title="Link to this heading">#</a></h1>
<p>可視化は、データを一連の_グラフィカルマーク_（棒、線、点など）を使用して表現します。マークの位置、形状、サイズ、色などの属性は、基礎となるデータ値をエンコードするための_チャネル_として機能します。</p>
<p>データ型、マーク、エンコーディングチャネルという基本的なフレームワークを使用することで、幅広い種類の可視化を簡潔に作成できます。このノートブックでは、これらの各要素を詳しく探り、それらを使用してカスタム統計グラフィックを作成する方法を示します。</p>
<p><em>このノートブックは、<a class="reference external" href="https://github.com/uwdata/visualization-curriculum">データ可視化カリキュラム</a> の一部です。</em></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">altair</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">alt</span>
</pre></div>
</div>
</div>
</div>
<section id="global-development-data">
<h2><span class="section-number">2.1. </span>Global Development Data<a class="headerlink" href="#global-development-data" title="Link to this heading">#</a></h2>
<p>1955年から2005年までの期間にわたる、複数の国における世界の健康と人口に関するデータを可視化します。このデータは<a class="reference external" href="https://www.gapminder.org/">Gapminder Foundation</a>によって収集され、<a class="reference external" href="https://www.youtube.com/watch?v=hVimVzgtD6w">Hans Rosling氏の有名なTEDトーク</a>で共有されました。まだこのトークを見ていない方は、ぜひ最初にご覧ください！</p>
<p>まず、<a class="reference external" href="https://github.com/vega/vega-datasets">vega-datasets</a>コレクションからデータセットを読み込み、Pandasデータフレームに取り込みましょう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">vega_datasets</span><span class="w"> </span><span class="kn">import</span> <span class="n">data</span> <span class="k">as</span> <span class="n">vega_data</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">vega_data</span><span class="o">.</span><span class="n">gapminder</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>データのサイズはどれくらいでしょうか？</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(693, 6)
</pre></div>
</div>
</div>
</div>
<p>693行と6列です！データの内容を少し覗いてみましょう:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>year</th>
      <th>country</th>
      <th>cluster</th>
      <th>pop</th>
      <th>life_expect</th>
      <th>fertility</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1955</td>
      <td>Afghanistan</td>
      <td>0</td>
      <td>8891209</td>
      <td>30.332</td>
      <td>7.7</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1960</td>
      <td>Afghanistan</td>
      <td>0</td>
      <td>9829450</td>
      <td>31.997</td>
      <td>7.7</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1965</td>
      <td>Afghanistan</td>
      <td>0</td>
      <td>10997885</td>
      <td>34.020</td>
      <td>7.7</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1970</td>
      <td>Afghanistan</td>
      <td>0</td>
      <td>12430623</td>
      <td>36.088</td>
      <td>7.7</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1975</td>
      <td>Afghanistan</td>
      <td>0</td>
      <td>14132019</td>
      <td>38.438</td>
      <td>7.7</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>各<code class="docutils literal notranslate"><span class="pre">country</span></code>（国）と<code class="docutils literal notranslate"><span class="pre">year</span></code>（5年ごとの間隔）について、以下の指標が含まれています：</p>
<ul class="simple">
<li><p>1人の女性あたりの子どもの数を表す出生率（<code class="docutils literal notranslate"><span class="pre">fertility</span></code>）</p></li>
<li><p>年数で表した平均寿命（<code class="docutils literal notranslate"><span class="pre">life_expect</span></code>）</p></li>
<li><p>総人口（<code class="docutils literal notranslate"><span class="pre">pop</span></code>）</p></li>
</ul>
<p>さらに、<code class="docutils literal notranslate"><span class="pre">cluster</span></code>フィールドには整数コードが含まれています。これが何を表しているのか、データを可視化しながらこの謎を解き明かしてみましょう！</p>
<p>Let’s also create a smaller data frame, filtered down to values for the year 2000 only:</p>
<p>以下のように、2000年の値に絞り込んだ小さいデータフレームを作成しましょう:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data2000</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2000</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data2000</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>year</th>
      <th>country</th>
      <th>cluster</th>
      <th>pop</th>
      <th>life_expect</th>
      <th>fertility</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>9</th>
      <td>2000</td>
      <td>Afghanistan</td>
      <td>0</td>
      <td>23898198</td>
      <td>42.129</td>
      <td>7.4792</td>
    </tr>
    <tr>
      <th>20</th>
      <td>2000</td>
      <td>Argentina</td>
      <td>3</td>
      <td>37497728</td>
      <td>74.340</td>
      <td>2.3500</td>
    </tr>
    <tr>
      <th>31</th>
      <td>2000</td>
      <td>Aruba</td>
      <td>3</td>
      <td>69539</td>
      <td>73.451</td>
      <td>2.1240</td>
    </tr>
    <tr>
      <th>42</th>
      <td>2000</td>
      <td>Australia</td>
      <td>4</td>
      <td>19164620</td>
      <td>80.370</td>
      <td>1.7560</td>
    </tr>
    <tr>
      <th>53</th>
      <td>2000</td>
      <td>Austria</td>
      <td>1</td>
      <td>8113413</td>
      <td>78.980</td>
      <td>1.3820</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="id2">
<h2><span class="section-number">2.2. </span>データ型<a class="headerlink" href="#id2" title="Link to this heading">#</a></h2>
<p>効果的な可視化の最初の要素は入力データです。データ値はさまざまな測定形式を表すことができます。それらの測定がどのような比較をサポートするか、またそれに応じた視覚エンコーディングをどのようにサポートするかを考える必要があります。</p>
<p>ここでは、Altairが視覚エンコーディングの選択に役立てる基本的なデータ型について説明します。これらのデータ型は、可能な比較の種類を決定し、それにより可視化デザインの決定を導きます。</p>
<section id="n">
<h3><span class="section-number">2.2.1. </span>名義型 (N)<a class="headerlink" href="#n" title="Link to this heading">#</a></h3>
<p><em>名義型</em>（<em>カテゴリ型</em>とも呼ばれる）は、カテゴリ名から成るデータです。</p>
<p>名義型データでは、値が等しいかどうかを比較できます：<em>値Aは値Bと同じか、それとも異なるか？（A = B）</em>。例えば、「AはBと等しい」または「AはBと等しくない」という主張をサポートします。上記のデータセットでは、<code class="docutils literal notranslate"><span class="pre">country</span></code>フィールドが名義型です。</p>
<p>名義型データを可視化する際には、値が同じか異なるかを簡単に判別できる必要があります。位置、色相（青、赤、緑など）、形状が役立ちます。ただし、サイズチャネルを名義型データに使用すると、存在しないランク順や大きさの違いを示唆する可能性があるため、誤解を招くかもしれません!</p>
</section>
<section id="o">
<h3><span class="section-number">2.2.2. </span>順序型 (O)<a class="headerlink" href="#o" title="Link to this heading">#</a></h3>
<p><em>順序型</em>データは、特定の順序を持つ値から成ります。</p>
<p>順序型データでは、値のランク順を比較できます：<em>値Aは値Bの前に来るか後に来るか？（A &lt; B）</em>。例えば、「AはBより小さい」または「AはBより大きい」という主張をサポートします。上記のデータセットでは、<code class="docutils literal notranslate"><span class="pre">year</span></code>フィールドを順序型として扱うことができます。</p>
<p>順序型データを可視化する際には、ランク順が感覚的にわかるようにする必要があります。位置、サイズ、または色の明るさ（輝度）が適切ですが、色相（知覚的な順序がないため）はあまり適切ではありません。</p>
</section>
<section id="q">
<h3><span class="section-number">2.2.3. </span>量的型 (Q)<a class="headerlink" href="#q" title="Link to this heading">#</a></h3>
<p><em>量的型</em>データでは、値間の数値的な違いを測定できます。量的データにはいくつかのサブタイプがあります：</p>
<ul class="simple">
<li><p><em>間隔型</em>データでは、ポイント間の距離（間隔）を測定できます：<em>値Aは値Bからどれだけ離れているか？（A - B）</em>。例えば、「AはBから12単位離れている」という主張をサポートします。</p></li>
<li><p><em>比率型</em>データでは、ゼロポイントに意味があるため、比率やスケール係数を測定できます：<em>値Aは値Bの何倍か？（A / B）</em>。例えば、「AはBの10％である」または「BはAの7倍大きい」という主張をサポートします。</p></li>
</ul>
<p>上記のデータセットでは、<code class="docutils literal notranslate"><span class="pre">year</span></code>は量的な間隔型フィールド（「年0」の値は主観的）ですが、<code class="docutils literal notranslate"><span class="pre">fertility</span></code>や<code class="docutils literal notranslate"><span class="pre">life_expect</span></code>は量的な比率型フィールド（ゼロに意味があり、比率計算が可能）です。Vega-Liteは量的データを表しますが、間隔型と比率型の区別は行いません。</p>
<p>量的値は、位置、サイズ、色の明るさなどのチャネルを使用して可視化できます。比率値の比例比較にはゼロ基準の軸が重要ですが、間隔比較では省略可能です。</p>
</section>
<section id="t">
<h3><span class="section-number">2.2.4. </span>時間型 (T)<a class="headerlink" href="#t" title="Link to this heading">#</a></h3>
<p><em>時間型</em>データは、時間のポイントまたは間隔を測定します。この型は量的値（タイムスタンプ）の特殊なケースであり、豊富なセマンティクスと慣例（例：<a class="reference external" href="https://en.wikipedia.org/wiki/Gregorian_calendar">グレゴリオ暦</a>）を持っています。Vega-Liteの時間型は、時間単位（年、月、日、時など）についての推論をサポートし、特定の時間間隔を要求するためのメソッドを提供します。</p>
<p>例として、<code class="docutils literal notranslate"><span class="pre">&quot;2019-01-04&quot;</span></code>や<code class="docutils literal notranslate"><span class="pre">&quot;Jan</span> <span class="pre">04</span> <span class="pre">2019&quot;</span></code>といった日付文字列、または<a class="reference external" href="https://en.wikipedia.org/wiki/ISO_8601">ISO日付形式</a>の<code class="docutils literal notranslate"><span class="pre">&quot;2019-01-04T17:50:35.643Z&quot;</span></code>などがあります。</p>
<p>上記の世界開発データセットには、<code class="docutils literal notranslate"><span class="pre">year</span></code>フィールドが単なる整数としてエンコードされているため、時間型の値は含まれていません。Altairで時間型データを使用する詳細については、<a class="reference external" href="https://altair-viz.github.io/user_guide/times_and_dates.html">時刻と日付に関するドキュメント</a>をご覧ください。</p>
</section>
<section id="id3">
<h3><span class="section-number">2.2.5. </span>まとめ<a class="headerlink" href="#id3" title="Link to this heading">#</a></h3>
<p>これらのデータ型は互いに排他的ではなく、階層を形成します：順序型データは名義型（等式）比較をサポートし、量的データは順序型（ランク順）比較をサポートします。</p>
<p>さらに、これらのデータ型は固定的な分類を提供するものではありません。例えば、データフィールドが数値で表現されているからといって、必ずしも量的型として扱う必要はありません。例えば、一連の年齢（10歳、20歳など）を名義型（未成年か成年か）、順序型（年ごとにグループ化）、または量的型（平均年齢を計算）として解釈することができます。</p>
<p>それでは、これらのデータ型をどのように視覚的にエンコードするかを見ていきましょう！</p>
</section>
</section>
<section id="id4">
<h2><span class="section-number">2.3. </span>エンコーディングチャネル<a class="headerlink" href="#id4" title="Link to this heading">#</a></h2>
<p>Altairの中心となるのは、データフィールド（特定のデータ型を持つ）を、選択した<em>マーク</em>タイプの利用可能なエンコーディング<em>チャネル</em>に結び付ける<em>エンコーディング</em>の利用です。このノートブックでは、次のエンコーディングチャネルについて説明します：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">x</span></code>: マークの水平位置（x軸）。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">y</span></code>: マークの垂直位置（y軸）。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">size</span></code>: マークのサイズ。マークのタイプによって面積または長さに対応します。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">color</span></code>: マークの色。<a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/CSS/color_value">有効なCSSカラー</a>として指定します。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">opacity</span></code>: マークの不透明度。0（完全に透明）から1（完全に不透明）の範囲で指定します。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">shape</span></code>: <code class="docutils literal notranslate"><span class="pre">point</span></code>マークのプロット記号の形状。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tooltip</span></code>: マウスホバー時に表示されるツールチップテキスト。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">order</span></code>: マークの順序。線/エリアのポイント順序や描画順序を決定します。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">column</span></code>: データを水平方向に揃えたサブプロットに分割します。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">row</span></code>: データを垂直方向に揃えたサブプロットに分割します。</p></li>
</ul>
<p>利用可能なチャネルの完全なリストについては、<a class="reference external" href="https://altair-viz.github.io/user_guide/encodings/index.html">Altairエンコーディングドキュメント</a>を参照してください。</p>
<section id="x">
<h3><span class="section-number">2.3.1. </span>X<a class="headerlink" href="#x" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">x</span></code>エンコーディングチャネルは、マークの水平位置（x座標）を設定します。また、軸やタイトルのデフォルト設定が自動的に選択されます。以下のチャートでは、量的データ型を選択した結果、連続的な線形軸スケールが使用されています:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">data2000</span><span class="p">)</span><span class="o">.</span><span class="n">mark_point</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;fertility:Q&#39;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-917f84a580eb4e589857fdde4eab445f.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-917f84a580eb4e589857fdde4eab445f.vega-embed details,
  #altair-viz-917f84a580eb4e589857fdde4eab445f.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-917f84a580eb4e589857fdde4eab445f"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-917f84a580eb4e589857fdde4eab445f") {
      outputDiv = document.getElementById("altair-viz-917f84a580eb4e589857fdde4eab445f");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.16.3?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.16.3"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-fdeb0b749a6385830bd1445d39ad6ea0"}, "mark": {"type": "point"}, "encoding": {"x": {"field": "fertility", "type": "quantitative"}}, "$schema": "https://vega.github.io/schema/vega-lite/v5.16.3.json", "datasets": {"data-fdeb0b749a6385830bd1445d39ad6ea0": [{"year": 2000, "country": "Afghanistan", "cluster": 0, "pop": 23898198, "life_expect": 42.129, "fertility": 7.4792}, {"year": 2000, "country": "Argentina", "cluster": 3, "pop": 37497728, "life_expect": 74.34, "fertility": 2.35}, {"year": 2000, "country": "Aruba", "cluster": 3, "pop": 69539, "life_expect": 73.451, "fertility": 2.124}, {"year": 2000, "country": "Australia", "cluster": 4, "pop": 19164620, "life_expect": 80.37, "fertility": 1.756}, {"year": 2000, "country": "Austria", "cluster": 1, "pop": 8113413, "life_expect": 78.98, "fertility": 1.3820000000000001}, {"year": 2000, "country": "Bahamas", "cluster": 3, "pop": 290075, "life_expect": 71.068, "fertility": 2.1111}, {"year": 2000, "country": "Bangladesh", "cluster": 0, "pop": 130406594, "life_expect": 62.013, "fertility": 3.224}, {"year": 2000, "country": "Barbados", "cluster": 3, "pop": 273483, "life_expect": 75.97, "fertility": 1.5}, {"year": 2000, "country": "Belgium", "cluster": 1, "pop": 10263618, "life_expect": 78.32, "fertility": 1.638}, {"year": 2000, "country": "Bolivia", "cluster": 3, "pop": 8152620, "life_expect": 63.883, "fertility": 3.9585}, {"year": 2000, "country": "Brazil", "cluster": 3, "pop": 175552771, "life_expect": 71.006, "fertility": 2.345}, {"year": 2000, "country": "Canada", "cluster": 3, "pop": 31278097, "life_expect": 79.77, "fertility": 1.522}, {"year": 2000, "country": "Chile", "cluster": 3, "pop": 15153450, "life_expect": 77.86, "fertility": 2.0}, {"year": 2000, "country": "China", "cluster": 4, "pop": 1262645000, "life_expect": 72.028, "fertility": 1.7000000000000002}, {"year": 2000, "country": "Colombia", "cluster": 3, "pop": 39685655, "life_expect": 71.682, "fertility": 2.4705}, {"year": 2000, "country": "Costa Rica", "cluster": 3, "pop": 3710558, "life_expect": 78.123, "fertility": 2.2815}, {"year": 2000, "country": "Croatia", "cluster": 1, "pop": 4410830, "life_expect": 74.876, "fertility": 1.348}, {"year": 2000, "country": "Cuba", "cluster": 3, "pop": 11134273, "life_expect": 77.158, "fertility": 1.63}, {"year": 2000, "country": "Dominican Republic", "cluster": 3, "pop": 8385828, "life_expect": 70.847, "fertility": 2.95}, {"year": 2000, "country": "Ecuador", "cluster": 3, "pop": 12505204, "life_expect": 74.173, "fertility": 2.8175}, {"year": 2000, "country": "Egypt", "cluster": 5, "pop": 70492342, "life_expect": 69.806, "fertility": 3.174}, {"year": 2000, "country": "El Salvador", "cluster": 3, "pop": 6122515, "life_expect": 70.734, "fertility": 2.883}, {"year": 2000, "country": "Finland", "cluster": 1, "pop": 5168595, "life_expect": 78.37, "fertility": 1.754}, {"year": 2000, "country": "France", "cluster": 1, "pop": 59381628, "life_expect": 79.59, "fertility": 1.8833000000000002}, {"year": 2000, "country": "Georgia", "cluster": 1, "pop": 4777209, "life_expect": 70.476, "fertility": 1.478}, {"year": 2000, "country": "Germany", "cluster": 1, "pop": 82187909, "life_expect": 78.67, "fertility": 1.346}, {"year": 2000, "country": "Greece", "cluster": 1, "pop": 10559110, "life_expect": 78.256, "fertility": 1.2770000000000001}, {"year": 2000, "country": "Grenada", "cluster": 3, "pop": 89312, "life_expect": 67.746, "fertility": 2.429}, {"year": 2000, "country": "Haiti", "cluster": 3, "pop": 7306302, "life_expect": 58.137, "fertility": 4.0}, {"year": 2000, "country": "Hong Kong", "cluster": 4, "pop": 6658720, "life_expect": 81.495, "fertility": 0.9400000000000001}, {"year": 2000, "country": "Iceland", "cluster": 1, "pop": 281043, "life_expect": 80.5, "fertility": 1.9929999999999999}, {"year": 2000, "country": "India", "cluster": 0, "pop": 1007702000, "life_expect": 62.879, "fertility": 3.1132}, {"year": 2000, "country": "Indonesia", "cluster": 4, "pop": 206265000, "life_expect": 68.588, "fertility": 2.3761}, {"year": 2000, "country": "Iran", "cluster": 5, "pop": 65660289, "life_expect": 69.451, "fertility": 2.124}, {"year": 2000, "country": "Iraq", "cluster": 5, "pop": 22675617, "life_expect": 57.046, "fertility": 4.858}, {"year": 2000, "country": "Ireland", "cluster": 1, "pop": 3791690, "life_expect": 77.783, "fertility": 1.9689999999999999}, {"year": 2000, "country": "Israel", "cluster": 5, "pop": 5842454, "life_expect": 79.696, "fertility": 2.906}, {"year": 2000, "country": "Italy", "cluster": 1, "pop": 57719337, "life_expect": 80.24, "fertility": 1.286}, {"year": 2000, "country": "Jamaica", "cluster": 3, "pop": 2615467, "life_expect": 72.047, "fertility": 2.628}, {"year": 2000, "country": "Japan", "cluster": 4, "pop": 126699784, "life_expect": 82.0, "fertility": 1.291}, {"year": 2000, "country": "Kenya", "cluster": 2, "pop": 29985839, "life_expect": 50.992, "fertility": 5.0}, {"year": 2000, "country": "South Korea", "cluster": 4, "pop": 21647682, "life_expect": 66.662, "fertility": 1.9173}, {"year": 2000, "country": "North Korea", "cluster": 4, "pop": 47351083, "life_expect": 77.045, "fertility": 1.242}, {"year": 2000, "country": "Lebanon", "cluster": 5, "pop": 3578036, "life_expect": 71.028, "fertility": 2.319}, {"year": 2000, "country": "Mexico", "cluster": 3, "pop": 99926620, "life_expect": 74.902, "fertility": 2.4005}, {"year": 2000, "country": "Netherlands", "cluster": 1, "pop": 15907853, "life_expect": 78.53, "fertility": 1.726}, {"year": 2000, "country": "New Zealand", "cluster": 4, "pop": 3819762, "life_expect": 79.11, "fertility": 1.964}, {"year": 2000, "country": "Nigeria", "cluster": 2, "pop": 114306700, "life_expect": 46.608, "fertility": 5.845}, {"year": 2000, "country": "Norway", "cluster": 1, "pop": 4492400, "life_expect": 79.05, "fertility": 1.8010000000000002}, {"year": 2000, "country": "Pakistan", "cluster": 0, "pop": 146342958, "life_expect": 63.61, "fertility": 3.9936}, {"year": 2000, "country": "Peru", "cluster": 3, "pop": 25979722, "life_expect": 69.906, "fertility": 2.7005}, {"year": 2000, "country": "Philippines", "cluster": 4, "pop": 79739825, "life_expect": 70.303, "fertility": 3.5436}, {"year": 2000, "country": "Poland", "cluster": 1, "pop": 38654164, "life_expect": 74.67, "fertility": 1.251}, {"year": 2000, "country": "Portugal", "cluster": 1, "pop": 10335597, "life_expect": 77.29, "fertility": 1.454}, {"year": 2000, "country": "Rwanda", "cluster": 2, "pop": 7507056, "life_expect": 43.413, "fertility": 6.01}, {"year": 2000, "country": "Saudi Arabia", "cluster": 5, "pop": 23153090, "life_expect": 71.626, "fertility": 3.81}, {"year": 2000, "country": "South Africa", "cluster": 2, "pop": 44066197, "life_expect": 53.365, "fertility": 2.802}, {"year": 2000, "country": "Spain", "cluster": 1, "pop": 40016081, "life_expect": 79.78, "fertility": 1.287}, {"year": 2000, "country": "Switzerland", "cluster": 1, "pop": 7266920, "life_expect": 80.62, "fertility": 1.415}, {"year": 2000, "country": "Turkey", "cluster": 1, "pop": 65666677, "life_expect": 70.845, "fertility": 2.23}, {"year": 2000, "country": "United Kingdom", "cluster": 1, "pop": 59522468, "life_expect": 78.471, "fertility": 1.695}, {"year": 2000, "country": "United States", "cluster": 3, "pop": 282338631, "life_expect": 77.31, "fertility": 2.038}, {"year": 2000, "country": "Venezuela", "cluster": 3, "pop": 23542649, "life_expect": 72.766, "fertility": 2.723}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
</section>
<section id="y">
<h3><span class="section-number">2.3.2. </span>Y<a class="headerlink" href="#y" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">y</span></code>エンコーディングチャネルは、マークの垂直位置（y座標）を設定します。ここでは、<code class="docutils literal notranslate"><span class="pre">cluster</span></code>フィールドを順序型（<code class="docutils literal notranslate"><span class="pre">O</span></code>）のデータ型として追加しました。その結果、各ユニークな値に対してサイズ付きのバンドを持つ離散軸が生成され、デフォルトのステップサイズが適用されています:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">data2000</span><span class="p">)</span><span class="o">.</span><span class="n">mark_point</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;fertility:Q&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;cluster:O&#39;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-b242a477175a48a4ab1e4701b21a264f.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-b242a477175a48a4ab1e4701b21a264f.vega-embed details,
  #altair-viz-b242a477175a48a4ab1e4701b21a264f.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-b242a477175a48a4ab1e4701b21a264f"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-b242a477175a48a4ab1e4701b21a264f") {
      outputDiv = document.getElementById("altair-viz-b242a477175a48a4ab1e4701b21a264f");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.16.3?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.16.3"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-fdeb0b749a6385830bd1445d39ad6ea0"}, "mark": {"type": "point"}, "encoding": {"x": {"field": "fertility", "type": "quantitative"}, "y": {"field": "cluster", "type": "ordinal"}}, "$schema": "https://vega.github.io/schema/vega-lite/v5.16.3.json", "datasets": {"data-fdeb0b749a6385830bd1445d39ad6ea0": [{"year": 2000, "country": "Afghanistan", "cluster": 0, "pop": 23898198, "life_expect": 42.129, "fertility": 7.4792}, {"year": 2000, "country": "Argentina", "cluster": 3, "pop": 37497728, "life_expect": 74.34, "fertility": 2.35}, {"year": 2000, "country": "Aruba", "cluster": 3, "pop": 69539, "life_expect": 73.451, "fertility": 2.124}, {"year": 2000, "country": "Australia", "cluster": 4, "pop": 19164620, "life_expect": 80.37, "fertility": 1.756}, {"year": 2000, "country": "Austria", "cluster": 1, "pop": 8113413, "life_expect": 78.98, "fertility": 1.3820000000000001}, {"year": 2000, "country": "Bahamas", "cluster": 3, "pop": 290075, "life_expect": 71.068, "fertility": 2.1111}, {"year": 2000, "country": "Bangladesh", "cluster": 0, "pop": 130406594, "life_expect": 62.013, "fertility": 3.224}, {"year": 2000, "country": "Barbados", "cluster": 3, "pop": 273483, "life_expect": 75.97, "fertility": 1.5}, {"year": 2000, "country": "Belgium", "cluster": 1, "pop": 10263618, "life_expect": 78.32, "fertility": 1.638}, {"year": 2000, "country": "Bolivia", "cluster": 3, "pop": 8152620, "life_expect": 63.883, "fertility": 3.9585}, {"year": 2000, "country": "Brazil", "cluster": 3, "pop": 175552771, "life_expect": 71.006, "fertility": 2.345}, {"year": 2000, "country": "Canada", "cluster": 3, "pop": 31278097, "life_expect": 79.77, "fertility": 1.522}, {"year": 2000, "country": "Chile", "cluster": 3, "pop": 15153450, "life_expect": 77.86, "fertility": 2.0}, {"year": 2000, "country": "China", "cluster": 4, "pop": 1262645000, "life_expect": 72.028, "fertility": 1.7000000000000002}, {"year": 2000, "country": "Colombia", "cluster": 3, "pop": 39685655, "life_expect": 71.682, "fertility": 2.4705}, {"year": 2000, "country": "Costa Rica", "cluster": 3, "pop": 3710558, "life_expect": 78.123, "fertility": 2.2815}, {"year": 2000, "country": "Croatia", "cluster": 1, "pop": 4410830, "life_expect": 74.876, "fertility": 1.348}, {"year": 2000, "country": "Cuba", "cluster": 3, "pop": 11134273, "life_expect": 77.158, "fertility": 1.63}, {"year": 2000, "country": "Dominican Republic", "cluster": 3, "pop": 8385828, "life_expect": 70.847, "fertility": 2.95}, {"year": 2000, "country": "Ecuador", "cluster": 3, "pop": 12505204, "life_expect": 74.173, "fertility": 2.8175}, {"year": 2000, "country": "Egypt", "cluster": 5, "pop": 70492342, "life_expect": 69.806, "fertility": 3.174}, {"year": 2000, "country": "El Salvador", "cluster": 3, "pop": 6122515, "life_expect": 70.734, "fertility": 2.883}, {"year": 2000, "country": "Finland", "cluster": 1, "pop": 5168595, "life_expect": 78.37, "fertility": 1.754}, {"year": 2000, "country": "France", "cluster": 1, "pop": 59381628, "life_expect": 79.59, "fertility": 1.8833000000000002}, {"year": 2000, "country": "Georgia", "cluster": 1, "pop": 4777209, "life_expect": 70.476, "fertility": 1.478}, {"year": 2000, "country": "Germany", "cluster": 1, "pop": 82187909, "life_expect": 78.67, "fertility": 1.346}, {"year": 2000, "country": "Greece", "cluster": 1, "pop": 10559110, "life_expect": 78.256, "fertility": 1.2770000000000001}, {"year": 2000, "country": "Grenada", "cluster": 3, "pop": 89312, "life_expect": 67.746, "fertility": 2.429}, {"year": 2000, "country": "Haiti", "cluster": 3, "pop": 7306302, "life_expect": 58.137, "fertility": 4.0}, {"year": 2000, "country": "Hong Kong", "cluster": 4, "pop": 6658720, "life_expect": 81.495, "fertility": 0.9400000000000001}, {"year": 2000, "country": "Iceland", "cluster": 1, "pop": 281043, "life_expect": 80.5, "fertility": 1.9929999999999999}, {"year": 2000, "country": "India", "cluster": 0, "pop": 1007702000, "life_expect": 62.879, "fertility": 3.1132}, {"year": 2000, "country": "Indonesia", "cluster": 4, "pop": 206265000, "life_expect": 68.588, "fertility": 2.3761}, {"year": 2000, "country": "Iran", "cluster": 5, "pop": 65660289, "life_expect": 69.451, "fertility": 2.124}, {"year": 2000, "country": "Iraq", "cluster": 5, "pop": 22675617, "life_expect": 57.046, "fertility": 4.858}, {"year": 2000, "country": "Ireland", "cluster": 1, "pop": 3791690, "life_expect": 77.783, "fertility": 1.9689999999999999}, {"year": 2000, "country": "Israel", "cluster": 5, "pop": 5842454, "life_expect": 79.696, "fertility": 2.906}, {"year": 2000, "country": "Italy", "cluster": 1, "pop": 57719337, "life_expect": 80.24, "fertility": 1.286}, {"year": 2000, "country": "Jamaica", "cluster": 3, "pop": 2615467, "life_expect": 72.047, "fertility": 2.628}, {"year": 2000, "country": "Japan", "cluster": 4, "pop": 126699784, "life_expect": 82.0, "fertility": 1.291}, {"year": 2000, "country": "Kenya", "cluster": 2, "pop": 29985839, "life_expect": 50.992, "fertility": 5.0}, {"year": 2000, "country": "South Korea", "cluster": 4, "pop": 21647682, "life_expect": 66.662, "fertility": 1.9173}, {"year": 2000, "country": "North Korea", "cluster": 4, "pop": 47351083, "life_expect": 77.045, "fertility": 1.242}, {"year": 2000, "country": "Lebanon", "cluster": 5, "pop": 3578036, "life_expect": 71.028, "fertility": 2.319}, {"year": 2000, "country": "Mexico", "cluster": 3, "pop": 99926620, "life_expect": 74.902, "fertility": 2.4005}, {"year": 2000, "country": "Netherlands", "cluster": 1, "pop": 15907853, "life_expect": 78.53, "fertility": 1.726}, {"year": 2000, "country": "New Zealand", "cluster": 4, "pop": 3819762, "life_expect": 79.11, "fertility": 1.964}, {"year": 2000, "country": "Nigeria", "cluster": 2, "pop": 114306700, "life_expect": 46.608, "fertility": 5.845}, {"year": 2000, "country": "Norway", "cluster": 1, "pop": 4492400, "life_expect": 79.05, "fertility": 1.8010000000000002}, {"year": 2000, "country": "Pakistan", "cluster": 0, "pop": 146342958, "life_expect": 63.61, "fertility": 3.9936}, {"year": 2000, "country": "Peru", "cluster": 3, "pop": 25979722, "life_expect": 69.906, "fertility": 2.7005}, {"year": 2000, "country": "Philippines", "cluster": 4, "pop": 79739825, "life_expect": 70.303, "fertility": 3.5436}, {"year": 2000, "country": "Poland", "cluster": 1, "pop": 38654164, "life_expect": 74.67, "fertility": 1.251}, {"year": 2000, "country": "Portugal", "cluster": 1, "pop": 10335597, "life_expect": 77.29, "fertility": 1.454}, {"year": 2000, "country": "Rwanda", "cluster": 2, "pop": 7507056, "life_expect": 43.413, "fertility": 6.01}, {"year": 2000, "country": "Saudi Arabia", "cluster": 5, "pop": 23153090, "life_expect": 71.626, "fertility": 3.81}, {"year": 2000, "country": "South Africa", "cluster": 2, "pop": 44066197, "life_expect": 53.365, "fertility": 2.802}, {"year": 2000, "country": "Spain", "cluster": 1, "pop": 40016081, "life_expect": 79.78, "fertility": 1.287}, {"year": 2000, "country": "Switzerland", "cluster": 1, "pop": 7266920, "life_expect": 80.62, "fertility": 1.415}, {"year": 2000, "country": "Turkey", "cluster": 1, "pop": 65666677, "life_expect": 70.845, "fertility": 2.23}, {"year": 2000, "country": "United Kingdom", "cluster": 1, "pop": 59522468, "life_expect": 78.471, "fertility": 1.695}, {"year": 2000, "country": "United States", "cluster": 3, "pop": 282338631, "life_expect": 77.31, "fertility": 2.038}, {"year": 2000, "country": "Venezuela", "cluster": 3, "pop": 23542649, "life_expect": 72.766, "fertility": 2.723}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<p><em>上記のチャートで、<code class="docutils literal notranslate"><span class="pre">O</span></code>型と<code class="docutils literal notranslate"><span class="pre">Q</span></code>型を入れ替えるとどうなるでしょうか？</em></p>
<p>代わりに、<code class="docutils literal notranslate"><span class="pre">life_expect</span></code>フィールドを量的（<code class="docutils literal notranslate"><span class="pre">Q</span></code>）変数として追加すると、両方の軸が線形スケールを持つ散布図が生成されます:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">data2000</span><span class="p">)</span><span class="o">.</span><span class="n">mark_point</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;fertility:Q&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;life_expect:Q&#39;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-d7655ff86a2c449bbddf02ca568ddfcc.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-d7655ff86a2c449bbddf02ca568ddfcc.vega-embed details,
  #altair-viz-d7655ff86a2c449bbddf02ca568ddfcc.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-d7655ff86a2c449bbddf02ca568ddfcc"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-d7655ff86a2c449bbddf02ca568ddfcc") {
      outputDiv = document.getElementById("altair-viz-d7655ff86a2c449bbddf02ca568ddfcc");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.16.3?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.16.3"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-fdeb0b749a6385830bd1445d39ad6ea0"}, "mark": {"type": "point"}, "encoding": {"x": {"field": "fertility", "type": "quantitative"}, "y": {"field": "life_expect", "type": "quantitative"}}, "$schema": "https://vega.github.io/schema/vega-lite/v5.16.3.json", "datasets": {"data-fdeb0b749a6385830bd1445d39ad6ea0": [{"year": 2000, "country": "Afghanistan", "cluster": 0, "pop": 23898198, "life_expect": 42.129, "fertility": 7.4792}, {"year": 2000, "country": "Argentina", "cluster": 3, "pop": 37497728, "life_expect": 74.34, "fertility": 2.35}, {"year": 2000, "country": "Aruba", "cluster": 3, "pop": 69539, "life_expect": 73.451, "fertility": 2.124}, {"year": 2000, "country": "Australia", "cluster": 4, "pop": 19164620, "life_expect": 80.37, "fertility": 1.756}, {"year": 2000, "country": "Austria", "cluster": 1, "pop": 8113413, "life_expect": 78.98, "fertility": 1.3820000000000001}, {"year": 2000, "country": "Bahamas", "cluster": 3, "pop": 290075, "life_expect": 71.068, "fertility": 2.1111}, {"year": 2000, "country": "Bangladesh", "cluster": 0, "pop": 130406594, "life_expect": 62.013, "fertility": 3.224}, {"year": 2000, "country": "Barbados", "cluster": 3, "pop": 273483, "life_expect": 75.97, "fertility": 1.5}, {"year": 2000, "country": "Belgium", "cluster": 1, "pop": 10263618, "life_expect": 78.32, "fertility": 1.638}, {"year": 2000, "country": "Bolivia", "cluster": 3, "pop": 8152620, "life_expect": 63.883, "fertility": 3.9585}, {"year": 2000, "country": "Brazil", "cluster": 3, "pop": 175552771, "life_expect": 71.006, "fertility": 2.345}, {"year": 2000, "country": "Canada", "cluster": 3, "pop": 31278097, "life_expect": 79.77, "fertility": 1.522}, {"year": 2000, "country": "Chile", "cluster": 3, "pop": 15153450, "life_expect": 77.86, "fertility": 2.0}, {"year": 2000, "country": "China", "cluster": 4, "pop": 1262645000, "life_expect": 72.028, "fertility": 1.7000000000000002}, {"year": 2000, "country": "Colombia", "cluster": 3, "pop": 39685655, "life_expect": 71.682, "fertility": 2.4705}, {"year": 2000, "country": "Costa Rica", "cluster": 3, "pop": 3710558, "life_expect": 78.123, "fertility": 2.2815}, {"year": 2000, "country": "Croatia", "cluster": 1, "pop": 4410830, "life_expect": 74.876, "fertility": 1.348}, {"year": 2000, "country": "Cuba", "cluster": 3, "pop": 11134273, "life_expect": 77.158, "fertility": 1.63}, {"year": 2000, "country": "Dominican Republic", "cluster": 3, "pop": 8385828, "life_expect": 70.847, "fertility": 2.95}, {"year": 2000, "country": "Ecuador", "cluster": 3, "pop": 12505204, "life_expect": 74.173, "fertility": 2.8175}, {"year": 2000, "country": "Egypt", "cluster": 5, "pop": 70492342, "life_expect": 69.806, "fertility": 3.174}, {"year": 2000, "country": "El Salvador", "cluster": 3, "pop": 6122515, "life_expect": 70.734, "fertility": 2.883}, {"year": 2000, "country": "Finland", "cluster": 1, "pop": 5168595, "life_expect": 78.37, "fertility": 1.754}, {"year": 2000, "country": "France", "cluster": 1, "pop": 59381628, "life_expect": 79.59, "fertility": 1.8833000000000002}, {"year": 2000, "country": "Georgia", "cluster": 1, "pop": 4777209, "life_expect": 70.476, "fertility": 1.478}, {"year": 2000, "country": "Germany", "cluster": 1, "pop": 82187909, "life_expect": 78.67, "fertility": 1.346}, {"year": 2000, "country": "Greece", "cluster": 1, "pop": 10559110, "life_expect": 78.256, "fertility": 1.2770000000000001}, {"year": 2000, "country": "Grenada", "cluster": 3, "pop": 89312, "life_expect": 67.746, "fertility": 2.429}, {"year": 2000, "country": "Haiti", "cluster": 3, "pop": 7306302, "life_expect": 58.137, "fertility": 4.0}, {"year": 2000, "country": "Hong Kong", "cluster": 4, "pop": 6658720, "life_expect": 81.495, "fertility": 0.9400000000000001}, {"year": 2000, "country": "Iceland", "cluster": 1, "pop": 281043, "life_expect": 80.5, "fertility": 1.9929999999999999}, {"year": 2000, "country": "India", "cluster": 0, "pop": 1007702000, "life_expect": 62.879, "fertility": 3.1132}, {"year": 2000, "country": "Indonesia", "cluster": 4, "pop": 206265000, "life_expect": 68.588, "fertility": 2.3761}, {"year": 2000, "country": "Iran", "cluster": 5, "pop": 65660289, "life_expect": 69.451, "fertility": 2.124}, {"year": 2000, "country": "Iraq", "cluster": 5, "pop": 22675617, "life_expect": 57.046, "fertility": 4.858}, {"year": 2000, "country": "Ireland", "cluster": 1, "pop": 3791690, "life_expect": 77.783, "fertility": 1.9689999999999999}, {"year": 2000, "country": "Israel", "cluster": 5, "pop": 5842454, "life_expect": 79.696, "fertility": 2.906}, {"year": 2000, "country": "Italy", "cluster": 1, "pop": 57719337, "life_expect": 80.24, "fertility": 1.286}, {"year": 2000, "country": "Jamaica", "cluster": 3, "pop": 2615467, "life_expect": 72.047, "fertility": 2.628}, {"year": 2000, "country": "Japan", "cluster": 4, "pop": 126699784, "life_expect": 82.0, "fertility": 1.291}, {"year": 2000, "country": "Kenya", "cluster": 2, "pop": 29985839, "life_expect": 50.992, "fertility": 5.0}, {"year": 2000, "country": "South Korea", "cluster": 4, "pop": 21647682, "life_expect": 66.662, "fertility": 1.9173}, {"year": 2000, "country": "North Korea", "cluster": 4, "pop": 47351083, "life_expect": 77.045, "fertility": 1.242}, {"year": 2000, "country": "Lebanon", "cluster": 5, "pop": 3578036, "life_expect": 71.028, "fertility": 2.319}, {"year": 2000, "country": "Mexico", "cluster": 3, "pop": 99926620, "life_expect": 74.902, "fertility": 2.4005}, {"year": 2000, "country": "Netherlands", "cluster": 1, "pop": 15907853, "life_expect": 78.53, "fertility": 1.726}, {"year": 2000, "country": "New Zealand", "cluster": 4, "pop": 3819762, "life_expect": 79.11, "fertility": 1.964}, {"year": 2000, "country": "Nigeria", "cluster": 2, "pop": 114306700, "life_expect": 46.608, "fertility": 5.845}, {"year": 2000, "country": "Norway", "cluster": 1, "pop": 4492400, "life_expect": 79.05, "fertility": 1.8010000000000002}, {"year": 2000, "country": "Pakistan", "cluster": 0, "pop": 146342958, "life_expect": 63.61, "fertility": 3.9936}, {"year": 2000, "country": "Peru", "cluster": 3, "pop": 25979722, "life_expect": 69.906, "fertility": 2.7005}, {"year": 2000, "country": "Philippines", "cluster": 4, "pop": 79739825, "life_expect": 70.303, "fertility": 3.5436}, {"year": 2000, "country": "Poland", "cluster": 1, "pop": 38654164, "life_expect": 74.67, "fertility": 1.251}, {"year": 2000, "country": "Portugal", "cluster": 1, "pop": 10335597, "life_expect": 77.29, "fertility": 1.454}, {"year": 2000, "country": "Rwanda", "cluster": 2, "pop": 7507056, "life_expect": 43.413, "fertility": 6.01}, {"year": 2000, "country": "Saudi Arabia", "cluster": 5, "pop": 23153090, "life_expect": 71.626, "fertility": 3.81}, {"year": 2000, "country": "South Africa", "cluster": 2, "pop": 44066197, "life_expect": 53.365, "fertility": 2.802}, {"year": 2000, "country": "Spain", "cluster": 1, "pop": 40016081, "life_expect": 79.78, "fertility": 1.287}, {"year": 2000, "country": "Switzerland", "cluster": 1, "pop": 7266920, "life_expect": 80.62, "fertility": 1.415}, {"year": 2000, "country": "Turkey", "cluster": 1, "pop": 65666677, "life_expect": 70.845, "fertility": 2.23}, {"year": 2000, "country": "United Kingdom", "cluster": 1, "pop": 59522468, "life_expect": 78.471, "fertility": 1.695}, {"year": 2000, "country": "United States", "cluster": 3, "pop": 282338631, "life_expect": 77.31, "fertility": 2.038}, {"year": 2000, "country": "Venezuela", "cluster": 3, "pop": 23542649, "life_expect": 72.766, "fertility": 2.723}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<p>デフォルトでは、量的な線形スケールの軸にはゼロが含まれ、比率データの適切な基準線が確保されます。ただし、場合によっては、ゼロ基準が意味を持たない場合や、間隔の比較に焦点を当てたい場合があります。ゼロの自動挿入を無効にするには、エンコーディングの<code class="docutils literal notranslate"><span class="pre">scale</span></code>属性を使用してスケールマッピングを設定します:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">data2000</span><span class="p">)</span><span class="o">.</span><span class="n">mark_point</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;fertility:Q&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">zero</span><span class="o">=</span><span class="kc">False</span><span class="p">)),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;life_expect:Q&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">zero</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-5dcd9b96ed7548388726b4626c3cbdda.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-5dcd9b96ed7548388726b4626c3cbdda.vega-embed details,
  #altair-viz-5dcd9b96ed7548388726b4626c3cbdda.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-5dcd9b96ed7548388726b4626c3cbdda"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-5dcd9b96ed7548388726b4626c3cbdda") {
      outputDiv = document.getElementById("altair-viz-5dcd9b96ed7548388726b4626c3cbdda");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.16.3?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.16.3"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-fdeb0b749a6385830bd1445d39ad6ea0"}, "mark": {"type": "point"}, "encoding": {"x": {"field": "fertility", "scale": {"zero": false}, "type": "quantitative"}, "y": {"field": "life_expect", "scale": {"zero": false}, "type": "quantitative"}}, "$schema": "https://vega.github.io/schema/vega-lite/v5.16.3.json", "datasets": {"data-fdeb0b749a6385830bd1445d39ad6ea0": [{"year": 2000, "country": "Afghanistan", "cluster": 0, "pop": 23898198, "life_expect": 42.129, "fertility": 7.4792}, {"year": 2000, "country": "Argentina", "cluster": 3, "pop": 37497728, "life_expect": 74.34, "fertility": 2.35}, {"year": 2000, "country": "Aruba", "cluster": 3, "pop": 69539, "life_expect": 73.451, "fertility": 2.124}, {"year": 2000, "country": "Australia", "cluster": 4, "pop": 19164620, "life_expect": 80.37, "fertility": 1.756}, {"year": 2000, "country": "Austria", "cluster": 1, "pop": 8113413, "life_expect": 78.98, "fertility": 1.3820000000000001}, {"year": 2000, "country": "Bahamas", "cluster": 3, "pop": 290075, "life_expect": 71.068, "fertility": 2.1111}, {"year": 2000, "country": "Bangladesh", "cluster": 0, "pop": 130406594, "life_expect": 62.013, "fertility": 3.224}, {"year": 2000, "country": "Barbados", "cluster": 3, "pop": 273483, "life_expect": 75.97, "fertility": 1.5}, {"year": 2000, "country": "Belgium", "cluster": 1, "pop": 10263618, "life_expect": 78.32, "fertility": 1.638}, {"year": 2000, "country": "Bolivia", "cluster": 3, "pop": 8152620, "life_expect": 63.883, "fertility": 3.9585}, {"year": 2000, "country": "Brazil", "cluster": 3, "pop": 175552771, "life_expect": 71.006, "fertility": 2.345}, {"year": 2000, "country": "Canada", "cluster": 3, "pop": 31278097, "life_expect": 79.77, "fertility": 1.522}, {"year": 2000, "country": "Chile", "cluster": 3, "pop": 15153450, "life_expect": 77.86, "fertility": 2.0}, {"year": 2000, "country": "China", "cluster": 4, "pop": 1262645000, "life_expect": 72.028, "fertility": 1.7000000000000002}, {"year": 2000, "country": "Colombia", "cluster": 3, "pop": 39685655, "life_expect": 71.682, "fertility": 2.4705}, {"year": 2000, "country": "Costa Rica", "cluster": 3, "pop": 3710558, "life_expect": 78.123, "fertility": 2.2815}, {"year": 2000, "country": "Croatia", "cluster": 1, "pop": 4410830, "life_expect": 74.876, "fertility": 1.348}, {"year": 2000, "country": "Cuba", "cluster": 3, "pop": 11134273, "life_expect": 77.158, "fertility": 1.63}, {"year": 2000, "country": "Dominican Republic", "cluster": 3, "pop": 8385828, "life_expect": 70.847, "fertility": 2.95}, {"year": 2000, "country": "Ecuador", "cluster": 3, "pop": 12505204, "life_expect": 74.173, "fertility": 2.8175}, {"year": 2000, "country": "Egypt", "cluster": 5, "pop": 70492342, "life_expect": 69.806, "fertility": 3.174}, {"year": 2000, "country": "El Salvador", "cluster": 3, "pop": 6122515, "life_expect": 70.734, "fertility": 2.883}, {"year": 2000, "country": "Finland", "cluster": 1, "pop": 5168595, "life_expect": 78.37, "fertility": 1.754}, {"year": 2000, "country": "France", "cluster": 1, "pop": 59381628, "life_expect": 79.59, "fertility": 1.8833000000000002}, {"year": 2000, "country": "Georgia", "cluster": 1, "pop": 4777209, "life_expect": 70.476, "fertility": 1.478}, {"year": 2000, "country": "Germany", "cluster": 1, "pop": 82187909, "life_expect": 78.67, "fertility": 1.346}, {"year": 2000, "country": "Greece", "cluster": 1, "pop": 10559110, "life_expect": 78.256, "fertility": 1.2770000000000001}, {"year": 2000, "country": "Grenada", "cluster": 3, "pop": 89312, "life_expect": 67.746, "fertility": 2.429}, {"year": 2000, "country": "Haiti", "cluster": 3, "pop": 7306302, "life_expect": 58.137, "fertility": 4.0}, {"year": 2000, "country": "Hong Kong", "cluster": 4, "pop": 6658720, "life_expect": 81.495, "fertility": 0.9400000000000001}, {"year": 2000, "country": "Iceland", "cluster": 1, "pop": 281043, "life_expect": 80.5, "fertility": 1.9929999999999999}, {"year": 2000, "country": "India", "cluster": 0, "pop": 1007702000, "life_expect": 62.879, "fertility": 3.1132}, {"year": 2000, "country": "Indonesia", "cluster": 4, "pop": 206265000, "life_expect": 68.588, "fertility": 2.3761}, {"year": 2000, "country": "Iran", "cluster": 5, "pop": 65660289, "life_expect": 69.451, "fertility": 2.124}, {"year": 2000, "country": "Iraq", "cluster": 5, "pop": 22675617, "life_expect": 57.046, "fertility": 4.858}, {"year": 2000, "country": "Ireland", "cluster": 1, "pop": 3791690, "life_expect": 77.783, "fertility": 1.9689999999999999}, {"year": 2000, "country": "Israel", "cluster": 5, "pop": 5842454, "life_expect": 79.696, "fertility": 2.906}, {"year": 2000, "country": "Italy", "cluster": 1, "pop": 57719337, "life_expect": 80.24, "fertility": 1.286}, {"year": 2000, "country": "Jamaica", "cluster": 3, "pop": 2615467, "life_expect": 72.047, "fertility": 2.628}, {"year": 2000, "country": "Japan", "cluster": 4, "pop": 126699784, "life_expect": 82.0, "fertility": 1.291}, {"year": 2000, "country": "Kenya", "cluster": 2, "pop": 29985839, "life_expect": 50.992, "fertility": 5.0}, {"year": 2000, "country": "South Korea", "cluster": 4, "pop": 21647682, "life_expect": 66.662, "fertility": 1.9173}, {"year": 2000, "country": "North Korea", "cluster": 4, "pop": 47351083, "life_expect": 77.045, "fertility": 1.242}, {"year": 2000, "country": "Lebanon", "cluster": 5, "pop": 3578036, "life_expect": 71.028, "fertility": 2.319}, {"year": 2000, "country": "Mexico", "cluster": 3, "pop": 99926620, "life_expect": 74.902, "fertility": 2.4005}, {"year": 2000, "country": "Netherlands", "cluster": 1, "pop": 15907853, "life_expect": 78.53, "fertility": 1.726}, {"year": 2000, "country": "New Zealand", "cluster": 4, "pop": 3819762, "life_expect": 79.11, "fertility": 1.964}, {"year": 2000, "country": "Nigeria", "cluster": 2, "pop": 114306700, "life_expect": 46.608, "fertility": 5.845}, {"year": 2000, "country": "Norway", "cluster": 1, "pop": 4492400, "life_expect": 79.05, "fertility": 1.8010000000000002}, {"year": 2000, "country": "Pakistan", "cluster": 0, "pop": 146342958, "life_expect": 63.61, "fertility": 3.9936}, {"year": 2000, "country": "Peru", "cluster": 3, "pop": 25979722, "life_expect": 69.906, "fertility": 2.7005}, {"year": 2000, "country": "Philippines", "cluster": 4, "pop": 79739825, "life_expect": 70.303, "fertility": 3.5436}, {"year": 2000, "country": "Poland", "cluster": 1, "pop": 38654164, "life_expect": 74.67, "fertility": 1.251}, {"year": 2000, "country": "Portugal", "cluster": 1, "pop": 10335597, "life_expect": 77.29, "fertility": 1.454}, {"year": 2000, "country": "Rwanda", "cluster": 2, "pop": 7507056, "life_expect": 43.413, "fertility": 6.01}, {"year": 2000, "country": "Saudi Arabia", "cluster": 5, "pop": 23153090, "life_expect": 71.626, "fertility": 3.81}, {"year": 2000, "country": "South Africa", "cluster": 2, "pop": 44066197, "life_expect": 53.365, "fertility": 2.802}, {"year": 2000, "country": "Spain", "cluster": 1, "pop": 40016081, "life_expect": 79.78, "fertility": 1.287}, {"year": 2000, "country": "Switzerland", "cluster": 1, "pop": 7266920, "life_expect": 80.62, "fertility": 1.415}, {"year": 2000, "country": "Turkey", "cluster": 1, "pop": 65666677, "life_expect": 70.845, "fertility": 2.23}, {"year": 2000, "country": "United Kingdom", "cluster": 1, "pop": 59522468, "life_expect": 78.471, "fertility": 1.695}, {"year": 2000, "country": "United States", "cluster": 3, "pop": 282338631, "life_expect": 77.31, "fertility": 2.038}, {"year": 2000, "country": "Venezuela", "cluster": 3, "pop": 23542649, "life_expect": 72.766, "fertility": 2.723}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<p>これで、軸スケールにゼロが含まれなくなりました。ただし、軸のドメイン（範囲）の終端は、自動的に5や10などの <em>きりの良い</em> 数値に調整されるため、若干の余白が残ります。</p>
<p><em>上記のスケール属性にさらに<code class="docutils literal notranslate"><span class="pre">nice=False</span></code>を追加するとどうなるでしょうか？</em></p>
</section>
<section id="id5">
<h3><span class="section-number">2.3.3. </span>サイズ<a class="headerlink" href="#id5" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">size</span></code>エンコーディングチャネルは、マークのサイズや範囲を設定します。このチャネルの意味は、マークの種類に応じて変化します。例えば、<code class="docutils literal notranslate"><span class="pre">point</span></code>マークの場合、<code class="docutils literal notranslate"><span class="pre">size</span></code>チャネルはプロット記号のピクセル面積にマッピングされます。そのため、ポイントの直径はサイズ値の平方根に一致します。</p>
<p>散布図を拡張し、<code class="docutils literal notranslate"><span class="pre">size</span></code>チャネルに人口（<code class="docutils literal notranslate"><span class="pre">pop</span></code>）をエンコードしてみましょう。その結果、サイズ値を解釈するための凡例もチャートに追加されます。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">data2000</span><span class="p">)</span><span class="o">.</span><span class="n">mark_point</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;fertility:Q&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;life_expect:Q&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Size</span><span class="p">(</span><span class="s1">&#39;pop:Q&#39;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-a80fa3a4b9394aee96795c64e84dbd7e.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-a80fa3a4b9394aee96795c64e84dbd7e.vega-embed details,
  #altair-viz-a80fa3a4b9394aee96795c64e84dbd7e.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-a80fa3a4b9394aee96795c64e84dbd7e"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-a80fa3a4b9394aee96795c64e84dbd7e") {
      outputDiv = document.getElementById("altair-viz-a80fa3a4b9394aee96795c64e84dbd7e");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.16.3?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.16.3"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-fdeb0b749a6385830bd1445d39ad6ea0"}, "mark": {"type": "point"}, "encoding": {"size": {"field": "pop", "type": "quantitative"}, "x": {"field": "fertility", "type": "quantitative"}, "y": {"field": "life_expect", "type": "quantitative"}}, "$schema": "https://vega.github.io/schema/vega-lite/v5.16.3.json", "datasets": {"data-fdeb0b749a6385830bd1445d39ad6ea0": [{"year": 2000, "country": "Afghanistan", "cluster": 0, "pop": 23898198, "life_expect": 42.129, "fertility": 7.4792}, {"year": 2000, "country": "Argentina", "cluster": 3, "pop": 37497728, "life_expect": 74.34, "fertility": 2.35}, {"year": 2000, "country": "Aruba", "cluster": 3, "pop": 69539, "life_expect": 73.451, "fertility": 2.124}, {"year": 2000, "country": "Australia", "cluster": 4, "pop": 19164620, "life_expect": 80.37, "fertility": 1.756}, {"year": 2000, "country": "Austria", "cluster": 1, "pop": 8113413, "life_expect": 78.98, "fertility": 1.3820000000000001}, {"year": 2000, "country": "Bahamas", "cluster": 3, "pop": 290075, "life_expect": 71.068, "fertility": 2.1111}, {"year": 2000, "country": "Bangladesh", "cluster": 0, "pop": 130406594, "life_expect": 62.013, "fertility": 3.224}, {"year": 2000, "country": "Barbados", "cluster": 3, "pop": 273483, "life_expect": 75.97, "fertility": 1.5}, {"year": 2000, "country": "Belgium", "cluster": 1, "pop": 10263618, "life_expect": 78.32, "fertility": 1.638}, {"year": 2000, "country": "Bolivia", "cluster": 3, "pop": 8152620, "life_expect": 63.883, "fertility": 3.9585}, {"year": 2000, "country": "Brazil", "cluster": 3, "pop": 175552771, "life_expect": 71.006, "fertility": 2.345}, {"year": 2000, "country": "Canada", "cluster": 3, "pop": 31278097, "life_expect": 79.77, "fertility": 1.522}, {"year": 2000, "country": "Chile", "cluster": 3, "pop": 15153450, "life_expect": 77.86, "fertility": 2.0}, {"year": 2000, "country": "China", "cluster": 4, "pop": 1262645000, "life_expect": 72.028, "fertility": 1.7000000000000002}, {"year": 2000, "country": "Colombia", "cluster": 3, "pop": 39685655, "life_expect": 71.682, "fertility": 2.4705}, {"year": 2000, "country": "Costa Rica", "cluster": 3, "pop": 3710558, "life_expect": 78.123, "fertility": 2.2815}, {"year": 2000, "country": "Croatia", "cluster": 1, "pop": 4410830, "life_expect": 74.876, "fertility": 1.348}, {"year": 2000, "country": "Cuba", "cluster": 3, "pop": 11134273, "life_expect": 77.158, "fertility": 1.63}, {"year": 2000, "country": "Dominican Republic", "cluster": 3, "pop": 8385828, "life_expect": 70.847, "fertility": 2.95}, {"year": 2000, "country": "Ecuador", "cluster": 3, "pop": 12505204, "life_expect": 74.173, "fertility": 2.8175}, {"year": 2000, "country": "Egypt", "cluster": 5, "pop": 70492342, "life_expect": 69.806, "fertility": 3.174}, {"year": 2000, "country": "El Salvador", "cluster": 3, "pop": 6122515, "life_expect": 70.734, "fertility": 2.883}, {"year": 2000, "country": "Finland", "cluster": 1, "pop": 5168595, "life_expect": 78.37, "fertility": 1.754}, {"year": 2000, "country": "France", "cluster": 1, "pop": 59381628, "life_expect": 79.59, "fertility": 1.8833000000000002}, {"year": 2000, "country": "Georgia", "cluster": 1, "pop": 4777209, "life_expect": 70.476, "fertility": 1.478}, {"year": 2000, "country": "Germany", "cluster": 1, "pop": 82187909, "life_expect": 78.67, "fertility": 1.346}, {"year": 2000, "country": "Greece", "cluster": 1, "pop": 10559110, "life_expect": 78.256, "fertility": 1.2770000000000001}, {"year": 2000, "country": "Grenada", "cluster": 3, "pop": 89312, "life_expect": 67.746, "fertility": 2.429}, {"year": 2000, "country": "Haiti", "cluster": 3, "pop": 7306302, "life_expect": 58.137, "fertility": 4.0}, {"year": 2000, "country": "Hong Kong", "cluster": 4, "pop": 6658720, "life_expect": 81.495, "fertility": 0.9400000000000001}, {"year": 2000, "country": "Iceland", "cluster": 1, "pop": 281043, "life_expect": 80.5, "fertility": 1.9929999999999999}, {"year": 2000, "country": "India", "cluster": 0, "pop": 1007702000, "life_expect": 62.879, "fertility": 3.1132}, {"year": 2000, "country": "Indonesia", "cluster": 4, "pop": 206265000, "life_expect": 68.588, "fertility": 2.3761}, {"year": 2000, "country": "Iran", "cluster": 5, "pop": 65660289, "life_expect": 69.451, "fertility": 2.124}, {"year": 2000, "country": "Iraq", "cluster": 5, "pop": 22675617, "life_expect": 57.046, "fertility": 4.858}, {"year": 2000, "country": "Ireland", "cluster": 1, "pop": 3791690, "life_expect": 77.783, "fertility": 1.9689999999999999}, {"year": 2000, "country": "Israel", "cluster": 5, "pop": 5842454, "life_expect": 79.696, "fertility": 2.906}, {"year": 2000, "country": "Italy", "cluster": 1, "pop": 57719337, "life_expect": 80.24, "fertility": 1.286}, {"year": 2000, "country": "Jamaica", "cluster": 3, "pop": 2615467, "life_expect": 72.047, "fertility": 2.628}, {"year": 2000, "country": "Japan", "cluster": 4, "pop": 126699784, "life_expect": 82.0, "fertility": 1.291}, {"year": 2000, "country": "Kenya", "cluster": 2, "pop": 29985839, "life_expect": 50.992, "fertility": 5.0}, {"year": 2000, "country": "South Korea", "cluster": 4, "pop": 21647682, "life_expect": 66.662, "fertility": 1.9173}, {"year": 2000, "country": "North Korea", "cluster": 4, "pop": 47351083, "life_expect": 77.045, "fertility": 1.242}, {"year": 2000, "country": "Lebanon", "cluster": 5, "pop": 3578036, "life_expect": 71.028, "fertility": 2.319}, {"year": 2000, "country": "Mexico", "cluster": 3, "pop": 99926620, "life_expect": 74.902, "fertility": 2.4005}, {"year": 2000, "country": "Netherlands", "cluster": 1, "pop": 15907853, "life_expect": 78.53, "fertility": 1.726}, {"year": 2000, "country": "New Zealand", "cluster": 4, "pop": 3819762, "life_expect": 79.11, "fertility": 1.964}, {"year": 2000, "country": "Nigeria", "cluster": 2, "pop": 114306700, "life_expect": 46.608, "fertility": 5.845}, {"year": 2000, "country": "Norway", "cluster": 1, "pop": 4492400, "life_expect": 79.05, "fertility": 1.8010000000000002}, {"year": 2000, "country": "Pakistan", "cluster": 0, "pop": 146342958, "life_expect": 63.61, "fertility": 3.9936}, {"year": 2000, "country": "Peru", "cluster": 3, "pop": 25979722, "life_expect": 69.906, "fertility": 2.7005}, {"year": 2000, "country": "Philippines", "cluster": 4, "pop": 79739825, "life_expect": 70.303, "fertility": 3.5436}, {"year": 2000, "country": "Poland", "cluster": 1, "pop": 38654164, "life_expect": 74.67, "fertility": 1.251}, {"year": 2000, "country": "Portugal", "cluster": 1, "pop": 10335597, "life_expect": 77.29, "fertility": 1.454}, {"year": 2000, "country": "Rwanda", "cluster": 2, "pop": 7507056, "life_expect": 43.413, "fertility": 6.01}, {"year": 2000, "country": "Saudi Arabia", "cluster": 5, "pop": 23153090, "life_expect": 71.626, "fertility": 3.81}, {"year": 2000, "country": "South Africa", "cluster": 2, "pop": 44066197, "life_expect": 53.365, "fertility": 2.802}, {"year": 2000, "country": "Spain", "cluster": 1, "pop": 40016081, "life_expect": 79.78, "fertility": 1.287}, {"year": 2000, "country": "Switzerland", "cluster": 1, "pop": 7266920, "life_expect": 80.62, "fertility": 1.415}, {"year": 2000, "country": "Turkey", "cluster": 1, "pop": 65666677, "life_expect": 70.845, "fertility": 2.23}, {"year": 2000, "country": "United Kingdom", "cluster": 1, "pop": 59522468, "life_expect": 78.471, "fertility": 1.695}, {"year": 2000, "country": "United States", "cluster": 3, "pop": 282338631, "life_expect": 77.31, "fertility": 2.038}, {"year": 2000, "country": "Venezuela", "cluster": 3, "pop": 23542649, "life_expect": 72.766, "fertility": 2.723}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<p>場合によっては、デフォルトのサイズ範囲に満足できないこともあります。カスタマイズしたサイズの範囲を指定するには、<code class="docutils literal notranslate"><span class="pre">scale</span></code>属性の<code class="docutils literal notranslate"><span class="pre">range</span></code>パラメータを設定し、最小サイズと最大サイズを示す配列を指定します。</p>
<p>ここでは、サイズエンコーディングを更新し、ゼロ値の場合は0ピクセル、スケールドメイン内の最大値の場合は1,000ピクセルに設定してみましょう:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">data2000</span><span class="p">)</span><span class="o">.</span><span class="n">mark_point</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;fertility:Q&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;life_expect:Q&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Size</span><span class="p">(</span><span class="s1">&#39;pop:Q&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="nb">range</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1000</span><span class="p">]))</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-4099a6ab9cd74257b8512efc5edf2f64.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-4099a6ab9cd74257b8512efc5edf2f64.vega-embed details,
  #altair-viz-4099a6ab9cd74257b8512efc5edf2f64.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-4099a6ab9cd74257b8512efc5edf2f64"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-4099a6ab9cd74257b8512efc5edf2f64") {
      outputDiv = document.getElementById("altair-viz-4099a6ab9cd74257b8512efc5edf2f64");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.16.3?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.16.3"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-fdeb0b749a6385830bd1445d39ad6ea0"}, "mark": {"type": "point"}, "encoding": {"size": {"field": "pop", "scale": {"range": [0, 1000]}, "type": "quantitative"}, "x": {"field": "fertility", "type": "quantitative"}, "y": {"field": "life_expect", "type": "quantitative"}}, "$schema": "https://vega.github.io/schema/vega-lite/v5.16.3.json", "datasets": {"data-fdeb0b749a6385830bd1445d39ad6ea0": [{"year": 2000, "country": "Afghanistan", "cluster": 0, "pop": 23898198, "life_expect": 42.129, "fertility": 7.4792}, {"year": 2000, "country": "Argentina", "cluster": 3, "pop": 37497728, "life_expect": 74.34, "fertility": 2.35}, {"year": 2000, "country": "Aruba", "cluster": 3, "pop": 69539, "life_expect": 73.451, "fertility": 2.124}, {"year": 2000, "country": "Australia", "cluster": 4, "pop": 19164620, "life_expect": 80.37, "fertility": 1.756}, {"year": 2000, "country": "Austria", "cluster": 1, "pop": 8113413, "life_expect": 78.98, "fertility": 1.3820000000000001}, {"year": 2000, "country": "Bahamas", "cluster": 3, "pop": 290075, "life_expect": 71.068, "fertility": 2.1111}, {"year": 2000, "country": "Bangladesh", "cluster": 0, "pop": 130406594, "life_expect": 62.013, "fertility": 3.224}, {"year": 2000, "country": "Barbados", "cluster": 3, "pop": 273483, "life_expect": 75.97, "fertility": 1.5}, {"year": 2000, "country": "Belgium", "cluster": 1, "pop": 10263618, "life_expect": 78.32, "fertility": 1.638}, {"year": 2000, "country": "Bolivia", "cluster": 3, "pop": 8152620, "life_expect": 63.883, "fertility": 3.9585}, {"year": 2000, "country": "Brazil", "cluster": 3, "pop": 175552771, "life_expect": 71.006, "fertility": 2.345}, {"year": 2000, "country": "Canada", "cluster": 3, "pop": 31278097, "life_expect": 79.77, "fertility": 1.522}, {"year": 2000, "country": "Chile", "cluster": 3, "pop": 15153450, "life_expect": 77.86, "fertility": 2.0}, {"year": 2000, "country": "China", "cluster": 4, "pop": 1262645000, "life_expect": 72.028, "fertility": 1.7000000000000002}, {"year": 2000, "country": "Colombia", "cluster": 3, "pop": 39685655, "life_expect": 71.682, "fertility": 2.4705}, {"year": 2000, "country": "Costa Rica", "cluster": 3, "pop": 3710558, "life_expect": 78.123, "fertility": 2.2815}, {"year": 2000, "country": "Croatia", "cluster": 1, "pop": 4410830, "life_expect": 74.876, "fertility": 1.348}, {"year": 2000, "country": "Cuba", "cluster": 3, "pop": 11134273, "life_expect": 77.158, "fertility": 1.63}, {"year": 2000, "country": "Dominican Republic", "cluster": 3, "pop": 8385828, "life_expect": 70.847, "fertility": 2.95}, {"year": 2000, "country": "Ecuador", "cluster": 3, "pop": 12505204, "life_expect": 74.173, "fertility": 2.8175}, {"year": 2000, "country": "Egypt", "cluster": 5, "pop": 70492342, "life_expect": 69.806, "fertility": 3.174}, {"year": 2000, "country": "El Salvador", "cluster": 3, "pop": 6122515, "life_expect": 70.734, "fertility": 2.883}, {"year": 2000, "country": "Finland", "cluster": 1, "pop": 5168595, "life_expect": 78.37, "fertility": 1.754}, {"year": 2000, "country": "France", "cluster": 1, "pop": 59381628, "life_expect": 79.59, "fertility": 1.8833000000000002}, {"year": 2000, "country": "Georgia", "cluster": 1, "pop": 4777209, "life_expect": 70.476, "fertility": 1.478}, {"year": 2000, "country": "Germany", "cluster": 1, "pop": 82187909, "life_expect": 78.67, "fertility": 1.346}, {"year": 2000, "country": "Greece", "cluster": 1, "pop": 10559110, "life_expect": 78.256, "fertility": 1.2770000000000001}, {"year": 2000, "country": "Grenada", "cluster": 3, "pop": 89312, "life_expect": 67.746, "fertility": 2.429}, {"year": 2000, "country": "Haiti", "cluster": 3, "pop": 7306302, "life_expect": 58.137, "fertility": 4.0}, {"year": 2000, "country": "Hong Kong", "cluster": 4, "pop": 6658720, "life_expect": 81.495, "fertility": 0.9400000000000001}, {"year": 2000, "country": "Iceland", "cluster": 1, "pop": 281043, "life_expect": 80.5, "fertility": 1.9929999999999999}, {"year": 2000, "country": "India", "cluster": 0, "pop": 1007702000, "life_expect": 62.879, "fertility": 3.1132}, {"year": 2000, "country": "Indonesia", "cluster": 4, "pop": 206265000, "life_expect": 68.588, "fertility": 2.3761}, {"year": 2000, "country": "Iran", "cluster": 5, "pop": 65660289, "life_expect": 69.451, "fertility": 2.124}, {"year": 2000, "country": "Iraq", "cluster": 5, "pop": 22675617, "life_expect": 57.046, "fertility": 4.858}, {"year": 2000, "country": "Ireland", "cluster": 1, "pop": 3791690, "life_expect": 77.783, "fertility": 1.9689999999999999}, {"year": 2000, "country": "Israel", "cluster": 5, "pop": 5842454, "life_expect": 79.696, "fertility": 2.906}, {"year": 2000, "country": "Italy", "cluster": 1, "pop": 57719337, "life_expect": 80.24, "fertility": 1.286}, {"year": 2000, "country": "Jamaica", "cluster": 3, "pop": 2615467, "life_expect": 72.047, "fertility": 2.628}, {"year": 2000, "country": "Japan", "cluster": 4, "pop": 126699784, "life_expect": 82.0, "fertility": 1.291}, {"year": 2000, "country": "Kenya", "cluster": 2, "pop": 29985839, "life_expect": 50.992, "fertility": 5.0}, {"year": 2000, "country": "South Korea", "cluster": 4, "pop": 21647682, "life_expect": 66.662, "fertility": 1.9173}, {"year": 2000, "country": "North Korea", "cluster": 4, "pop": 47351083, "life_expect": 77.045, "fertility": 1.242}, {"year": 2000, "country": "Lebanon", "cluster": 5, "pop": 3578036, "life_expect": 71.028, "fertility": 2.319}, {"year": 2000, "country": "Mexico", "cluster": 3, "pop": 99926620, "life_expect": 74.902, "fertility": 2.4005}, {"year": 2000, "country": "Netherlands", "cluster": 1, "pop": 15907853, "life_expect": 78.53, "fertility": 1.726}, {"year": 2000, "country": "New Zealand", "cluster": 4, "pop": 3819762, "life_expect": 79.11, "fertility": 1.964}, {"year": 2000, "country": "Nigeria", "cluster": 2, "pop": 114306700, "life_expect": 46.608, "fertility": 5.845}, {"year": 2000, "country": "Norway", "cluster": 1, "pop": 4492400, "life_expect": 79.05, "fertility": 1.8010000000000002}, {"year": 2000, "country": "Pakistan", "cluster": 0, "pop": 146342958, "life_expect": 63.61, "fertility": 3.9936}, {"year": 2000, "country": "Peru", "cluster": 3, "pop": 25979722, "life_expect": 69.906, "fertility": 2.7005}, {"year": 2000, "country": "Philippines", "cluster": 4, "pop": 79739825, "life_expect": 70.303, "fertility": 3.5436}, {"year": 2000, "country": "Poland", "cluster": 1, "pop": 38654164, "life_expect": 74.67, "fertility": 1.251}, {"year": 2000, "country": "Portugal", "cluster": 1, "pop": 10335597, "life_expect": 77.29, "fertility": 1.454}, {"year": 2000, "country": "Rwanda", "cluster": 2, "pop": 7507056, "life_expect": 43.413, "fertility": 6.01}, {"year": 2000, "country": "Saudi Arabia", "cluster": 5, "pop": 23153090, "life_expect": 71.626, "fertility": 3.81}, {"year": 2000, "country": "South Africa", "cluster": 2, "pop": 44066197, "life_expect": 53.365, "fertility": 2.802}, {"year": 2000, "country": "Spain", "cluster": 1, "pop": 40016081, "life_expect": 79.78, "fertility": 1.287}, {"year": 2000, "country": "Switzerland", "cluster": 1, "pop": 7266920, "life_expect": 80.62, "fertility": 1.415}, {"year": 2000, "country": "Turkey", "cluster": 1, "pop": 65666677, "life_expect": 70.845, "fertility": 2.23}, {"year": 2000, "country": "United Kingdom", "cluster": 1, "pop": 59522468, "life_expect": 78.471, "fertility": 1.695}, {"year": 2000, "country": "United States", "cluster": 3, "pop": 282338631, "life_expect": 77.31, "fertility": 2.038}, {"year": 2000, "country": "Venezuela", "cluster": 3, "pop": 23542649, "life_expect": 72.766, "fertility": 2.723}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
</section>
<section id="id6">
<h3><span class="section-number">2.3.4. </span>色と不透明度<a class="headerlink" href="#id6" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">color</span></code>エンコーディングチャネルは、マークの色を設定します。色のエンコーディングスタイルはデータ型に大きく依存します。名義型データの場合は、通常、複数の色相を持つ定性的なカラースキームが使用されます。一方、順序型や量的データでは、知覚的に順序付けられた色のグラデーションが使用されます。</p>
<p>ここでは、<code class="docutils literal notranslate"><span class="pre">color</span></code>チャネルと名義型（<code class="docutils literal notranslate"><span class="pre">N</span></code>）データ型を使用して<code class="docutils literal notranslate"><span class="pre">cluster</span></code>フィールドをエンコードし、各クラスタ値に異なる色相を割り当てます。<code class="docutils literal notranslate"><span class="pre">cluster</span></code>フィールドが何を示しているか、推測し始めることができますか？</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">data2000</span><span class="p">)</span><span class="o">.</span><span class="n">mark_point</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;fertility:Q&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;life_expect:Q&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Size</span><span class="p">(</span><span class="s1">&#39;pop:Q&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="nb">range</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1000</span><span class="p">])),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s1">&#39;cluster:N&#39;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-0b26e5736d174bfea2aab97030a042b5.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-0b26e5736d174bfea2aab97030a042b5.vega-embed details,
  #altair-viz-0b26e5736d174bfea2aab97030a042b5.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-0b26e5736d174bfea2aab97030a042b5"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-0b26e5736d174bfea2aab97030a042b5") {
      outputDiv = document.getElementById("altair-viz-0b26e5736d174bfea2aab97030a042b5");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.16.3?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.16.3"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-fdeb0b749a6385830bd1445d39ad6ea0"}, "mark": {"type": "point"}, "encoding": {"color": {"field": "cluster", "type": "nominal"}, "size": {"field": "pop", "scale": {"range": [0, 1000]}, "type": "quantitative"}, "x": {"field": "fertility", "type": "quantitative"}, "y": {"field": "life_expect", "type": "quantitative"}}, "$schema": "https://vega.github.io/schema/vega-lite/v5.16.3.json", "datasets": {"data-fdeb0b749a6385830bd1445d39ad6ea0": [{"year": 2000, "country": "Afghanistan", "cluster": 0, "pop": 23898198, "life_expect": 42.129, "fertility": 7.4792}, {"year": 2000, "country": "Argentina", "cluster": 3, "pop": 37497728, "life_expect": 74.34, "fertility": 2.35}, {"year": 2000, "country": "Aruba", "cluster": 3, "pop": 69539, "life_expect": 73.451, "fertility": 2.124}, {"year": 2000, "country": "Australia", "cluster": 4, "pop": 19164620, "life_expect": 80.37, "fertility": 1.756}, {"year": 2000, "country": "Austria", "cluster": 1, "pop": 8113413, "life_expect": 78.98, "fertility": 1.3820000000000001}, {"year": 2000, "country": "Bahamas", "cluster": 3, "pop": 290075, "life_expect": 71.068, "fertility": 2.1111}, {"year": 2000, "country": "Bangladesh", "cluster": 0, "pop": 130406594, "life_expect": 62.013, "fertility": 3.224}, {"year": 2000, "country": "Barbados", "cluster": 3, "pop": 273483, "life_expect": 75.97, "fertility": 1.5}, {"year": 2000, "country": "Belgium", "cluster": 1, "pop": 10263618, "life_expect": 78.32, "fertility": 1.638}, {"year": 2000, "country": "Bolivia", "cluster": 3, "pop": 8152620, "life_expect": 63.883, "fertility": 3.9585}, {"year": 2000, "country": "Brazil", "cluster": 3, "pop": 175552771, "life_expect": 71.006, "fertility": 2.345}, {"year": 2000, "country": "Canada", "cluster": 3, "pop": 31278097, "life_expect": 79.77, "fertility": 1.522}, {"year": 2000, "country": "Chile", "cluster": 3, "pop": 15153450, "life_expect": 77.86, "fertility": 2.0}, {"year": 2000, "country": "China", "cluster": 4, "pop": 1262645000, "life_expect": 72.028, "fertility": 1.7000000000000002}, {"year": 2000, "country": "Colombia", "cluster": 3, "pop": 39685655, "life_expect": 71.682, "fertility": 2.4705}, {"year": 2000, "country": "Costa Rica", "cluster": 3, "pop": 3710558, "life_expect": 78.123, "fertility": 2.2815}, {"year": 2000, "country": "Croatia", "cluster": 1, "pop": 4410830, "life_expect": 74.876, "fertility": 1.348}, {"year": 2000, "country": "Cuba", "cluster": 3, "pop": 11134273, "life_expect": 77.158, "fertility": 1.63}, {"year": 2000, "country": "Dominican Republic", "cluster": 3, "pop": 8385828, "life_expect": 70.847, "fertility": 2.95}, {"year": 2000, "country": "Ecuador", "cluster": 3, "pop": 12505204, "life_expect": 74.173, "fertility": 2.8175}, {"year": 2000, "country": "Egypt", "cluster": 5, "pop": 70492342, "life_expect": 69.806, "fertility": 3.174}, {"year": 2000, "country": "El Salvador", "cluster": 3, "pop": 6122515, "life_expect": 70.734, "fertility": 2.883}, {"year": 2000, "country": "Finland", "cluster": 1, "pop": 5168595, "life_expect": 78.37, "fertility": 1.754}, {"year": 2000, "country": "France", "cluster": 1, "pop": 59381628, "life_expect": 79.59, "fertility": 1.8833000000000002}, {"year": 2000, "country": "Georgia", "cluster": 1, "pop": 4777209, "life_expect": 70.476, "fertility": 1.478}, {"year": 2000, "country": "Germany", "cluster": 1, "pop": 82187909, "life_expect": 78.67, "fertility": 1.346}, {"year": 2000, "country": "Greece", "cluster": 1, "pop": 10559110, "life_expect": 78.256, "fertility": 1.2770000000000001}, {"year": 2000, "country": "Grenada", "cluster": 3, "pop": 89312, "life_expect": 67.746, "fertility": 2.429}, {"year": 2000, "country": "Haiti", "cluster": 3, "pop": 7306302, "life_expect": 58.137, "fertility": 4.0}, {"year": 2000, "country": "Hong Kong", "cluster": 4, "pop": 6658720, "life_expect": 81.495, "fertility": 0.9400000000000001}, {"year": 2000, "country": "Iceland", "cluster": 1, "pop": 281043, "life_expect": 80.5, "fertility": 1.9929999999999999}, {"year": 2000, "country": "India", "cluster": 0, "pop": 1007702000, "life_expect": 62.879, "fertility": 3.1132}, {"year": 2000, "country": "Indonesia", "cluster": 4, "pop": 206265000, "life_expect": 68.588, "fertility": 2.3761}, {"year": 2000, "country": "Iran", "cluster": 5, "pop": 65660289, "life_expect": 69.451, "fertility": 2.124}, {"year": 2000, "country": "Iraq", "cluster": 5, "pop": 22675617, "life_expect": 57.046, "fertility": 4.858}, {"year": 2000, "country": "Ireland", "cluster": 1, "pop": 3791690, "life_expect": 77.783, "fertility": 1.9689999999999999}, {"year": 2000, "country": "Israel", "cluster": 5, "pop": 5842454, "life_expect": 79.696, "fertility": 2.906}, {"year": 2000, "country": "Italy", "cluster": 1, "pop": 57719337, "life_expect": 80.24, "fertility": 1.286}, {"year": 2000, "country": "Jamaica", "cluster": 3, "pop": 2615467, "life_expect": 72.047, "fertility": 2.628}, {"year": 2000, "country": "Japan", "cluster": 4, "pop": 126699784, "life_expect": 82.0, "fertility": 1.291}, {"year": 2000, "country": "Kenya", "cluster": 2, "pop": 29985839, "life_expect": 50.992, "fertility": 5.0}, {"year": 2000, "country": "South Korea", "cluster": 4, "pop": 21647682, "life_expect": 66.662, "fertility": 1.9173}, {"year": 2000, "country": "North Korea", "cluster": 4, "pop": 47351083, "life_expect": 77.045, "fertility": 1.242}, {"year": 2000, "country": "Lebanon", "cluster": 5, "pop": 3578036, "life_expect": 71.028, "fertility": 2.319}, {"year": 2000, "country": "Mexico", "cluster": 3, "pop": 99926620, "life_expect": 74.902, "fertility": 2.4005}, {"year": 2000, "country": "Netherlands", "cluster": 1, "pop": 15907853, "life_expect": 78.53, "fertility": 1.726}, {"year": 2000, "country": "New Zealand", "cluster": 4, "pop": 3819762, "life_expect": 79.11, "fertility": 1.964}, {"year": 2000, "country": "Nigeria", "cluster": 2, "pop": 114306700, "life_expect": 46.608, "fertility": 5.845}, {"year": 2000, "country": "Norway", "cluster": 1, "pop": 4492400, "life_expect": 79.05, "fertility": 1.8010000000000002}, {"year": 2000, "country": "Pakistan", "cluster": 0, "pop": 146342958, "life_expect": 63.61, "fertility": 3.9936}, {"year": 2000, "country": "Peru", "cluster": 3, "pop": 25979722, "life_expect": 69.906, "fertility": 2.7005}, {"year": 2000, "country": "Philippines", "cluster": 4, "pop": 79739825, "life_expect": 70.303, "fertility": 3.5436}, {"year": 2000, "country": "Poland", "cluster": 1, "pop": 38654164, "life_expect": 74.67, "fertility": 1.251}, {"year": 2000, "country": "Portugal", "cluster": 1, "pop": 10335597, "life_expect": 77.29, "fertility": 1.454}, {"year": 2000, "country": "Rwanda", "cluster": 2, "pop": 7507056, "life_expect": 43.413, "fertility": 6.01}, {"year": 2000, "country": "Saudi Arabia", "cluster": 5, "pop": 23153090, "life_expect": 71.626, "fertility": 3.81}, {"year": 2000, "country": "South Africa", "cluster": 2, "pop": 44066197, "life_expect": 53.365, "fertility": 2.802}, {"year": 2000, "country": "Spain", "cluster": 1, "pop": 40016081, "life_expect": 79.78, "fertility": 1.287}, {"year": 2000, "country": "Switzerland", "cluster": 1, "pop": 7266920, "life_expect": 80.62, "fertility": 1.415}, {"year": 2000, "country": "Turkey", "cluster": 1, "pop": 65666677, "life_expect": 70.845, "fertility": 2.23}, {"year": 2000, "country": "United Kingdom", "cluster": 1, "pop": 59522468, "life_expect": 78.471, "fertility": 1.695}, {"year": 2000, "country": "United States", "cluster": 3, "pop": 282338631, "life_expect": 77.31, "fertility": 2.038}, {"year": 2000, "country": "Venezuela", "cluster": 3, "pop": 23542649, "life_expect": 72.766, "fertility": 2.723}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<p>塗りつぶした形状を使用したい場合、<code class="docutils literal notranslate"><span class="pre">mark_point</span></code>メソッドに<code class="docutils literal notranslate"><span class="pre">filled=True</span></code>パラメータを渡すことができます:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">data2000</span><span class="p">)</span><span class="o">.</span><span class="n">mark_point</span><span class="p">(</span><span class="n">filled</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;fertility:Q&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;life_expect:Q&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Size</span><span class="p">(</span><span class="s1">&#39;pop:Q&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="nb">range</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1000</span><span class="p">])),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s1">&#39;cluster:N&#39;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-d73196bbb33849fa91a2933ed303feca.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-d73196bbb33849fa91a2933ed303feca.vega-embed details,
  #altair-viz-d73196bbb33849fa91a2933ed303feca.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-d73196bbb33849fa91a2933ed303feca"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-d73196bbb33849fa91a2933ed303feca") {
      outputDiv = document.getElementById("altair-viz-d73196bbb33849fa91a2933ed303feca");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.16.3?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.16.3"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-fdeb0b749a6385830bd1445d39ad6ea0"}, "mark": {"type": "point", "filled": true}, "encoding": {"color": {"field": "cluster", "type": "nominal"}, "size": {"field": "pop", "scale": {"range": [0, 1000]}, "type": "quantitative"}, "x": {"field": "fertility", "type": "quantitative"}, "y": {"field": "life_expect", "type": "quantitative"}}, "$schema": "https://vega.github.io/schema/vega-lite/v5.16.3.json", "datasets": {"data-fdeb0b749a6385830bd1445d39ad6ea0": [{"year": 2000, "country": "Afghanistan", "cluster": 0, "pop": 23898198, "life_expect": 42.129, "fertility": 7.4792}, {"year": 2000, "country": "Argentina", "cluster": 3, "pop": 37497728, "life_expect": 74.34, "fertility": 2.35}, {"year": 2000, "country": "Aruba", "cluster": 3, "pop": 69539, "life_expect": 73.451, "fertility": 2.124}, {"year": 2000, "country": "Australia", "cluster": 4, "pop": 19164620, "life_expect": 80.37, "fertility": 1.756}, {"year": 2000, "country": "Austria", "cluster": 1, "pop": 8113413, "life_expect": 78.98, "fertility": 1.3820000000000001}, {"year": 2000, "country": "Bahamas", "cluster": 3, "pop": 290075, "life_expect": 71.068, "fertility": 2.1111}, {"year": 2000, "country": "Bangladesh", "cluster": 0, "pop": 130406594, "life_expect": 62.013, "fertility": 3.224}, {"year": 2000, "country": "Barbados", "cluster": 3, "pop": 273483, "life_expect": 75.97, "fertility": 1.5}, {"year": 2000, "country": "Belgium", "cluster": 1, "pop": 10263618, "life_expect": 78.32, "fertility": 1.638}, {"year": 2000, "country": "Bolivia", "cluster": 3, "pop": 8152620, "life_expect": 63.883, "fertility": 3.9585}, {"year": 2000, "country": "Brazil", "cluster": 3, "pop": 175552771, "life_expect": 71.006, "fertility": 2.345}, {"year": 2000, "country": "Canada", "cluster": 3, "pop": 31278097, "life_expect": 79.77, "fertility": 1.522}, {"year": 2000, "country": "Chile", "cluster": 3, "pop": 15153450, "life_expect": 77.86, "fertility": 2.0}, {"year": 2000, "country": "China", "cluster": 4, "pop": 1262645000, "life_expect": 72.028, "fertility": 1.7000000000000002}, {"year": 2000, "country": "Colombia", "cluster": 3, "pop": 39685655, "life_expect": 71.682, "fertility": 2.4705}, {"year": 2000, "country": "Costa Rica", "cluster": 3, "pop": 3710558, "life_expect": 78.123, "fertility": 2.2815}, {"year": 2000, "country": "Croatia", "cluster": 1, "pop": 4410830, "life_expect": 74.876, "fertility": 1.348}, {"year": 2000, "country": "Cuba", "cluster": 3, "pop": 11134273, "life_expect": 77.158, "fertility": 1.63}, {"year": 2000, "country": "Dominican Republic", "cluster": 3, "pop": 8385828, "life_expect": 70.847, "fertility": 2.95}, {"year": 2000, "country": "Ecuador", "cluster": 3, "pop": 12505204, "life_expect": 74.173, "fertility": 2.8175}, {"year": 2000, "country": "Egypt", "cluster": 5, "pop": 70492342, "life_expect": 69.806, "fertility": 3.174}, {"year": 2000, "country": "El Salvador", "cluster": 3, "pop": 6122515, "life_expect": 70.734, "fertility": 2.883}, {"year": 2000, "country": "Finland", "cluster": 1, "pop": 5168595, "life_expect": 78.37, "fertility": 1.754}, {"year": 2000, "country": "France", "cluster": 1, "pop": 59381628, "life_expect": 79.59, "fertility": 1.8833000000000002}, {"year": 2000, "country": "Georgia", "cluster": 1, "pop": 4777209, "life_expect": 70.476, "fertility": 1.478}, {"year": 2000, "country": "Germany", "cluster": 1, "pop": 82187909, "life_expect": 78.67, "fertility": 1.346}, {"year": 2000, "country": "Greece", "cluster": 1, "pop": 10559110, "life_expect": 78.256, "fertility": 1.2770000000000001}, {"year": 2000, "country": "Grenada", "cluster": 3, "pop": 89312, "life_expect": 67.746, "fertility": 2.429}, {"year": 2000, "country": "Haiti", "cluster": 3, "pop": 7306302, "life_expect": 58.137, "fertility": 4.0}, {"year": 2000, "country": "Hong Kong", "cluster": 4, "pop": 6658720, "life_expect": 81.495, "fertility": 0.9400000000000001}, {"year": 2000, "country": "Iceland", "cluster": 1, "pop": 281043, "life_expect": 80.5, "fertility": 1.9929999999999999}, {"year": 2000, "country": "India", "cluster": 0, "pop": 1007702000, "life_expect": 62.879, "fertility": 3.1132}, {"year": 2000, "country": "Indonesia", "cluster": 4, "pop": 206265000, "life_expect": 68.588, "fertility": 2.3761}, {"year": 2000, "country": "Iran", "cluster": 5, "pop": 65660289, "life_expect": 69.451, "fertility": 2.124}, {"year": 2000, "country": "Iraq", "cluster": 5, "pop": 22675617, "life_expect": 57.046, "fertility": 4.858}, {"year": 2000, "country": "Ireland", "cluster": 1, "pop": 3791690, "life_expect": 77.783, "fertility": 1.9689999999999999}, {"year": 2000, "country": "Israel", "cluster": 5, "pop": 5842454, "life_expect": 79.696, "fertility": 2.906}, {"year": 2000, "country": "Italy", "cluster": 1, "pop": 57719337, "life_expect": 80.24, "fertility": 1.286}, {"year": 2000, "country": "Jamaica", "cluster": 3, "pop": 2615467, "life_expect": 72.047, "fertility": 2.628}, {"year": 2000, "country": "Japan", "cluster": 4, "pop": 126699784, "life_expect": 82.0, "fertility": 1.291}, {"year": 2000, "country": "Kenya", "cluster": 2, "pop": 29985839, "life_expect": 50.992, "fertility": 5.0}, {"year": 2000, "country": "South Korea", "cluster": 4, "pop": 21647682, "life_expect": 66.662, "fertility": 1.9173}, {"year": 2000, "country": "North Korea", "cluster": 4, "pop": 47351083, "life_expect": 77.045, "fertility": 1.242}, {"year": 2000, "country": "Lebanon", "cluster": 5, "pop": 3578036, "life_expect": 71.028, "fertility": 2.319}, {"year": 2000, "country": "Mexico", "cluster": 3, "pop": 99926620, "life_expect": 74.902, "fertility": 2.4005}, {"year": 2000, "country": "Netherlands", "cluster": 1, "pop": 15907853, "life_expect": 78.53, "fertility": 1.726}, {"year": 2000, "country": "New Zealand", "cluster": 4, "pop": 3819762, "life_expect": 79.11, "fertility": 1.964}, {"year": 2000, "country": "Nigeria", "cluster": 2, "pop": 114306700, "life_expect": 46.608, "fertility": 5.845}, {"year": 2000, "country": "Norway", "cluster": 1, "pop": 4492400, "life_expect": 79.05, "fertility": 1.8010000000000002}, {"year": 2000, "country": "Pakistan", "cluster": 0, "pop": 146342958, "life_expect": 63.61, "fertility": 3.9936}, {"year": 2000, "country": "Peru", "cluster": 3, "pop": 25979722, "life_expect": 69.906, "fertility": 2.7005}, {"year": 2000, "country": "Philippines", "cluster": 4, "pop": 79739825, "life_expect": 70.303, "fertility": 3.5436}, {"year": 2000, "country": "Poland", "cluster": 1, "pop": 38654164, "life_expect": 74.67, "fertility": 1.251}, {"year": 2000, "country": "Portugal", "cluster": 1, "pop": 10335597, "life_expect": 77.29, "fertility": 1.454}, {"year": 2000, "country": "Rwanda", "cluster": 2, "pop": 7507056, "life_expect": 43.413, "fertility": 6.01}, {"year": 2000, "country": "Saudi Arabia", "cluster": 5, "pop": 23153090, "life_expect": 71.626, "fertility": 3.81}, {"year": 2000, "country": "South Africa", "cluster": 2, "pop": 44066197, "life_expect": 53.365, "fertility": 2.802}, {"year": 2000, "country": "Spain", "cluster": 1, "pop": 40016081, "life_expect": 79.78, "fertility": 1.287}, {"year": 2000, "country": "Switzerland", "cluster": 1, "pop": 7266920, "life_expect": 80.62, "fertility": 1.415}, {"year": 2000, "country": "Turkey", "cluster": 1, "pop": 65666677, "life_expect": 70.845, "fertility": 2.23}, {"year": 2000, "country": "United Kingdom", "cluster": 1, "pop": 59522468, "life_expect": 78.471, "fertility": 1.695}, {"year": 2000, "country": "United States", "cluster": 3, "pop": 282338631, "life_expect": 77.31, "fertility": 2.038}, {"year": 2000, "country": "Venezuela", "cluster": 3, "pop": 23542649, "life_expect": 72.766, "fertility": 2.723}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<p>デフォルトでは、Altairはプロットの重なりを軽減するために、わずかに透明度を適用します。透明度は、<code class="docutils literal notranslate"><span class="pre">mark_*</span></code>メソッドにデフォルト値を渡すか、専用のエンコーディングチャネルを使用してさらに調整することができます。</p>
<p>ここでは、データフィールドをバインドする代わりに、エンコーディングチャネルに一定の値を提供する方法を示します:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">data2000</span><span class="p">)</span><span class="o">.</span><span class="n">mark_point</span><span class="p">(</span><span class="n">filled</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;fertility:Q&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;life_expect:Q&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Size</span><span class="p">(</span><span class="s1">&#39;pop:Q&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="nb">range</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1000</span><span class="p">])),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s1">&#39;cluster:N&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">OpacityValue</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-7a130183f80b41899c062ccd9b184368.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-7a130183f80b41899c062ccd9b184368.vega-embed details,
  #altair-viz-7a130183f80b41899c062ccd9b184368.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-7a130183f80b41899c062ccd9b184368"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-7a130183f80b41899c062ccd9b184368") {
      outputDiv = document.getElementById("altair-viz-7a130183f80b41899c062ccd9b184368");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.16.3?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.16.3"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-fdeb0b749a6385830bd1445d39ad6ea0"}, "mark": {"type": "point", "filled": true}, "encoding": {"color": {"field": "cluster", "type": "nominal"}, "opacity": {"value": 0.5}, "size": {"field": "pop", "scale": {"range": [0, 1000]}, "type": "quantitative"}, "x": {"field": "fertility", "type": "quantitative"}, "y": {"field": "life_expect", "type": "quantitative"}}, "$schema": "https://vega.github.io/schema/vega-lite/v5.16.3.json", "datasets": {"data-fdeb0b749a6385830bd1445d39ad6ea0": [{"year": 2000, "country": "Afghanistan", "cluster": 0, "pop": 23898198, "life_expect": 42.129, "fertility": 7.4792}, {"year": 2000, "country": "Argentina", "cluster": 3, "pop": 37497728, "life_expect": 74.34, "fertility": 2.35}, {"year": 2000, "country": "Aruba", "cluster": 3, "pop": 69539, "life_expect": 73.451, "fertility": 2.124}, {"year": 2000, "country": "Australia", "cluster": 4, "pop": 19164620, "life_expect": 80.37, "fertility": 1.756}, {"year": 2000, "country": "Austria", "cluster": 1, "pop": 8113413, "life_expect": 78.98, "fertility": 1.3820000000000001}, {"year": 2000, "country": "Bahamas", "cluster": 3, "pop": 290075, "life_expect": 71.068, "fertility": 2.1111}, {"year": 2000, "country": "Bangladesh", "cluster": 0, "pop": 130406594, "life_expect": 62.013, "fertility": 3.224}, {"year": 2000, "country": "Barbados", "cluster": 3, "pop": 273483, "life_expect": 75.97, "fertility": 1.5}, {"year": 2000, "country": "Belgium", "cluster": 1, "pop": 10263618, "life_expect": 78.32, "fertility": 1.638}, {"year": 2000, "country": "Bolivia", "cluster": 3, "pop": 8152620, "life_expect": 63.883, "fertility": 3.9585}, {"year": 2000, "country": "Brazil", "cluster": 3, "pop": 175552771, "life_expect": 71.006, "fertility": 2.345}, {"year": 2000, "country": "Canada", "cluster": 3, "pop": 31278097, "life_expect": 79.77, "fertility": 1.522}, {"year": 2000, "country": "Chile", "cluster": 3, "pop": 15153450, "life_expect": 77.86, "fertility": 2.0}, {"year": 2000, "country": "China", "cluster": 4, "pop": 1262645000, "life_expect": 72.028, "fertility": 1.7000000000000002}, {"year": 2000, "country": "Colombia", "cluster": 3, "pop": 39685655, "life_expect": 71.682, "fertility": 2.4705}, {"year": 2000, "country": "Costa Rica", "cluster": 3, "pop": 3710558, "life_expect": 78.123, "fertility": 2.2815}, {"year": 2000, "country": "Croatia", "cluster": 1, "pop": 4410830, "life_expect": 74.876, "fertility": 1.348}, {"year": 2000, "country": "Cuba", "cluster": 3, "pop": 11134273, "life_expect": 77.158, "fertility": 1.63}, {"year": 2000, "country": "Dominican Republic", "cluster": 3, "pop": 8385828, "life_expect": 70.847, "fertility": 2.95}, {"year": 2000, "country": "Ecuador", "cluster": 3, "pop": 12505204, "life_expect": 74.173, "fertility": 2.8175}, {"year": 2000, "country": "Egypt", "cluster": 5, "pop": 70492342, "life_expect": 69.806, "fertility": 3.174}, {"year": 2000, "country": "El Salvador", "cluster": 3, "pop": 6122515, "life_expect": 70.734, "fertility": 2.883}, {"year": 2000, "country": "Finland", "cluster": 1, "pop": 5168595, "life_expect": 78.37, "fertility": 1.754}, {"year": 2000, "country": "France", "cluster": 1, "pop": 59381628, "life_expect": 79.59, "fertility": 1.8833000000000002}, {"year": 2000, "country": "Georgia", "cluster": 1, "pop": 4777209, "life_expect": 70.476, "fertility": 1.478}, {"year": 2000, "country": "Germany", "cluster": 1, "pop": 82187909, "life_expect": 78.67, "fertility": 1.346}, {"year": 2000, "country": "Greece", "cluster": 1, "pop": 10559110, "life_expect": 78.256, "fertility": 1.2770000000000001}, {"year": 2000, "country": "Grenada", "cluster": 3, "pop": 89312, "life_expect": 67.746, "fertility": 2.429}, {"year": 2000, "country": "Haiti", "cluster": 3, "pop": 7306302, "life_expect": 58.137, "fertility": 4.0}, {"year": 2000, "country": "Hong Kong", "cluster": 4, "pop": 6658720, "life_expect": 81.495, "fertility": 0.9400000000000001}, {"year": 2000, "country": "Iceland", "cluster": 1, "pop": 281043, "life_expect": 80.5, "fertility": 1.9929999999999999}, {"year": 2000, "country": "India", "cluster": 0, "pop": 1007702000, "life_expect": 62.879, "fertility": 3.1132}, {"year": 2000, "country": "Indonesia", "cluster": 4, "pop": 206265000, "life_expect": 68.588, "fertility": 2.3761}, {"year": 2000, "country": "Iran", "cluster": 5, "pop": 65660289, "life_expect": 69.451, "fertility": 2.124}, {"year": 2000, "country": "Iraq", "cluster": 5, "pop": 22675617, "life_expect": 57.046, "fertility": 4.858}, {"year": 2000, "country": "Ireland", "cluster": 1, "pop": 3791690, "life_expect": 77.783, "fertility": 1.9689999999999999}, {"year": 2000, "country": "Israel", "cluster": 5, "pop": 5842454, "life_expect": 79.696, "fertility": 2.906}, {"year": 2000, "country": "Italy", "cluster": 1, "pop": 57719337, "life_expect": 80.24, "fertility": 1.286}, {"year": 2000, "country": "Jamaica", "cluster": 3, "pop": 2615467, "life_expect": 72.047, "fertility": 2.628}, {"year": 2000, "country": "Japan", "cluster": 4, "pop": 126699784, "life_expect": 82.0, "fertility": 1.291}, {"year": 2000, "country": "Kenya", "cluster": 2, "pop": 29985839, "life_expect": 50.992, "fertility": 5.0}, {"year": 2000, "country": "South Korea", "cluster": 4, "pop": 21647682, "life_expect": 66.662, "fertility": 1.9173}, {"year": 2000, "country": "North Korea", "cluster": 4, "pop": 47351083, "life_expect": 77.045, "fertility": 1.242}, {"year": 2000, "country": "Lebanon", "cluster": 5, "pop": 3578036, "life_expect": 71.028, "fertility": 2.319}, {"year": 2000, "country": "Mexico", "cluster": 3, "pop": 99926620, "life_expect": 74.902, "fertility": 2.4005}, {"year": 2000, "country": "Netherlands", "cluster": 1, "pop": 15907853, "life_expect": 78.53, "fertility": 1.726}, {"year": 2000, "country": "New Zealand", "cluster": 4, "pop": 3819762, "life_expect": 79.11, "fertility": 1.964}, {"year": 2000, "country": "Nigeria", "cluster": 2, "pop": 114306700, "life_expect": 46.608, "fertility": 5.845}, {"year": 2000, "country": "Norway", "cluster": 1, "pop": 4492400, "life_expect": 79.05, "fertility": 1.8010000000000002}, {"year": 2000, "country": "Pakistan", "cluster": 0, "pop": 146342958, "life_expect": 63.61, "fertility": 3.9936}, {"year": 2000, "country": "Peru", "cluster": 3, "pop": 25979722, "life_expect": 69.906, "fertility": 2.7005}, {"year": 2000, "country": "Philippines", "cluster": 4, "pop": 79739825, "life_expect": 70.303, "fertility": 3.5436}, {"year": 2000, "country": "Poland", "cluster": 1, "pop": 38654164, "life_expect": 74.67, "fertility": 1.251}, {"year": 2000, "country": "Portugal", "cluster": 1, "pop": 10335597, "life_expect": 77.29, "fertility": 1.454}, {"year": 2000, "country": "Rwanda", "cluster": 2, "pop": 7507056, "life_expect": 43.413, "fertility": 6.01}, {"year": 2000, "country": "Saudi Arabia", "cluster": 5, "pop": 23153090, "life_expect": 71.626, "fertility": 3.81}, {"year": 2000, "country": "South Africa", "cluster": 2, "pop": 44066197, "life_expect": 53.365, "fertility": 2.802}, {"year": 2000, "country": "Spain", "cluster": 1, "pop": 40016081, "life_expect": 79.78, "fertility": 1.287}, {"year": 2000, "country": "Switzerland", "cluster": 1, "pop": 7266920, "life_expect": 80.62, "fertility": 1.415}, {"year": 2000, "country": "Turkey", "cluster": 1, "pop": 65666677, "life_expect": 70.845, "fertility": 2.23}, {"year": 2000, "country": "United Kingdom", "cluster": 1, "pop": 59522468, "life_expect": 78.471, "fertility": 1.695}, {"year": 2000, "country": "United States", "cluster": 3, "pop": 282338631, "life_expect": 77.31, "fertility": 2.038}, {"year": 2000, "country": "Venezuela", "cluster": 3, "pop": 23542649, "life_expect": 72.766, "fertility": 2.723}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
</section>
<section id="id7">
<h3><span class="section-number">2.3.5. </span>形状<a class="headerlink" href="#id7" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">shape</span></code>エンコーディングチャネルは、<code class="docutils literal notranslate"><span class="pre">point</span></code>マークで使用される幾何学的な形状を設定します。これまでに見た他のチャネルとは異なり、<code class="docutils literal notranslate"><span class="pre">shape</span></code>チャネルは他のマークタイプでは使用できません。また、<code class="docutils literal notranslate"><span class="pre">shape</span></code>エンコーディングチャネルは名義型データでのみ使用するべきです。なぜなら、知覚的なランク順や大きさの比較には対応していないためです。</p>
<p>ここでは、<code class="docutils literal notranslate"><span class="pre">cluster</span></code>フィールドを<code class="docutils literal notranslate"><span class="pre">shape</span></code>と<code class="docutils literal notranslate"><span class="pre">color</span></code>の両方でエンコードしてみましょう。同じ基礎データフィールドに複数のチャネルを使用することは、<em>冗長エンコーディング</em>と呼ばれます。この結果として得られるチャートは、色と形状の情報を組み合わせた単一のシンボル凡例を持ちます:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">data2000</span><span class="p">)</span><span class="o">.</span><span class="n">mark_point</span><span class="p">(</span><span class="n">filled</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;fertility:Q&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;life_expect:Q&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Size</span><span class="p">(</span><span class="s1">&#39;pop:Q&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="nb">range</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1000</span><span class="p">])),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s1">&#39;cluster:N&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">OpacityValue</span><span class="p">(</span><span class="mf">0.5</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Shape</span><span class="p">(</span><span class="s1">&#39;cluster:N&#39;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-3047fa22fa8d48a7b40f85b03040c615.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-3047fa22fa8d48a7b40f85b03040c615.vega-embed details,
  #altair-viz-3047fa22fa8d48a7b40f85b03040c615.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-3047fa22fa8d48a7b40f85b03040c615"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-3047fa22fa8d48a7b40f85b03040c615") {
      outputDiv = document.getElementById("altair-viz-3047fa22fa8d48a7b40f85b03040c615");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.16.3?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.16.3"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-fdeb0b749a6385830bd1445d39ad6ea0"}, "mark": {"type": "point", "filled": true}, "encoding": {"color": {"field": "cluster", "type": "nominal"}, "opacity": {"value": 0.5}, "shape": {"field": "cluster", "type": "nominal"}, "size": {"field": "pop", "scale": {"range": [0, 1000]}, "type": "quantitative"}, "x": {"field": "fertility", "type": "quantitative"}, "y": {"field": "life_expect", "type": "quantitative"}}, "$schema": "https://vega.github.io/schema/vega-lite/v5.16.3.json", "datasets": {"data-fdeb0b749a6385830bd1445d39ad6ea0": [{"year": 2000, "country": "Afghanistan", "cluster": 0, "pop": 23898198, "life_expect": 42.129, "fertility": 7.4792}, {"year": 2000, "country": "Argentina", "cluster": 3, "pop": 37497728, "life_expect": 74.34, "fertility": 2.35}, {"year": 2000, "country": "Aruba", "cluster": 3, "pop": 69539, "life_expect": 73.451, "fertility": 2.124}, {"year": 2000, "country": "Australia", "cluster": 4, "pop": 19164620, "life_expect": 80.37, "fertility": 1.756}, {"year": 2000, "country": "Austria", "cluster": 1, "pop": 8113413, "life_expect": 78.98, "fertility": 1.3820000000000001}, {"year": 2000, "country": "Bahamas", "cluster": 3, "pop": 290075, "life_expect": 71.068, "fertility": 2.1111}, {"year": 2000, "country": "Bangladesh", "cluster": 0, "pop": 130406594, "life_expect": 62.013, "fertility": 3.224}, {"year": 2000, "country": "Barbados", "cluster": 3, "pop": 273483, "life_expect": 75.97, "fertility": 1.5}, {"year": 2000, "country": "Belgium", "cluster": 1, "pop": 10263618, "life_expect": 78.32, "fertility": 1.638}, {"year": 2000, "country": "Bolivia", "cluster": 3, "pop": 8152620, "life_expect": 63.883, "fertility": 3.9585}, {"year": 2000, "country": "Brazil", "cluster": 3, "pop": 175552771, "life_expect": 71.006, "fertility": 2.345}, {"year": 2000, "country": "Canada", "cluster": 3, "pop": 31278097, "life_expect": 79.77, "fertility": 1.522}, {"year": 2000, "country": "Chile", "cluster": 3, "pop": 15153450, "life_expect": 77.86, "fertility": 2.0}, {"year": 2000, "country": "China", "cluster": 4, "pop": 1262645000, "life_expect": 72.028, "fertility": 1.7000000000000002}, {"year": 2000, "country": "Colombia", "cluster": 3, "pop": 39685655, "life_expect": 71.682, "fertility": 2.4705}, {"year": 2000, "country": "Costa Rica", "cluster": 3, "pop": 3710558, "life_expect": 78.123, "fertility": 2.2815}, {"year": 2000, "country": "Croatia", "cluster": 1, "pop": 4410830, "life_expect": 74.876, "fertility": 1.348}, {"year": 2000, "country": "Cuba", "cluster": 3, "pop": 11134273, "life_expect": 77.158, "fertility": 1.63}, {"year": 2000, "country": "Dominican Republic", "cluster": 3, "pop": 8385828, "life_expect": 70.847, "fertility": 2.95}, {"year": 2000, "country": "Ecuador", "cluster": 3, "pop": 12505204, "life_expect": 74.173, "fertility": 2.8175}, {"year": 2000, "country": "Egypt", "cluster": 5, "pop": 70492342, "life_expect": 69.806, "fertility": 3.174}, {"year": 2000, "country": "El Salvador", "cluster": 3, "pop": 6122515, "life_expect": 70.734, "fertility": 2.883}, {"year": 2000, "country": "Finland", "cluster": 1, "pop": 5168595, "life_expect": 78.37, "fertility": 1.754}, {"year": 2000, "country": "France", "cluster": 1, "pop": 59381628, "life_expect": 79.59, "fertility": 1.8833000000000002}, {"year": 2000, "country": "Georgia", "cluster": 1, "pop": 4777209, "life_expect": 70.476, "fertility": 1.478}, {"year": 2000, "country": "Germany", "cluster": 1, "pop": 82187909, "life_expect": 78.67, "fertility": 1.346}, {"year": 2000, "country": "Greece", "cluster": 1, "pop": 10559110, "life_expect": 78.256, "fertility": 1.2770000000000001}, {"year": 2000, "country": "Grenada", "cluster": 3, "pop": 89312, "life_expect": 67.746, "fertility": 2.429}, {"year": 2000, "country": "Haiti", "cluster": 3, "pop": 7306302, "life_expect": 58.137, "fertility": 4.0}, {"year": 2000, "country": "Hong Kong", "cluster": 4, "pop": 6658720, "life_expect": 81.495, "fertility": 0.9400000000000001}, {"year": 2000, "country": "Iceland", "cluster": 1, "pop": 281043, "life_expect": 80.5, "fertility": 1.9929999999999999}, {"year": 2000, "country": "India", "cluster": 0, "pop": 1007702000, "life_expect": 62.879, "fertility": 3.1132}, {"year": 2000, "country": "Indonesia", "cluster": 4, "pop": 206265000, "life_expect": 68.588, "fertility": 2.3761}, {"year": 2000, "country": "Iran", "cluster": 5, "pop": 65660289, "life_expect": 69.451, "fertility": 2.124}, {"year": 2000, "country": "Iraq", "cluster": 5, "pop": 22675617, "life_expect": 57.046, "fertility": 4.858}, {"year": 2000, "country": "Ireland", "cluster": 1, "pop": 3791690, "life_expect": 77.783, "fertility": 1.9689999999999999}, {"year": 2000, "country": "Israel", "cluster": 5, "pop": 5842454, "life_expect": 79.696, "fertility": 2.906}, {"year": 2000, "country": "Italy", "cluster": 1, "pop": 57719337, "life_expect": 80.24, "fertility": 1.286}, {"year": 2000, "country": "Jamaica", "cluster": 3, "pop": 2615467, "life_expect": 72.047, "fertility": 2.628}, {"year": 2000, "country": "Japan", "cluster": 4, "pop": 126699784, "life_expect": 82.0, "fertility": 1.291}, {"year": 2000, "country": "Kenya", "cluster": 2, "pop": 29985839, "life_expect": 50.992, "fertility": 5.0}, {"year": 2000, "country": "South Korea", "cluster": 4, "pop": 21647682, "life_expect": 66.662, "fertility": 1.9173}, {"year": 2000, "country": "North Korea", "cluster": 4, "pop": 47351083, "life_expect": 77.045, "fertility": 1.242}, {"year": 2000, "country": "Lebanon", "cluster": 5, "pop": 3578036, "life_expect": 71.028, "fertility": 2.319}, {"year": 2000, "country": "Mexico", "cluster": 3, "pop": 99926620, "life_expect": 74.902, "fertility": 2.4005}, {"year": 2000, "country": "Netherlands", "cluster": 1, "pop": 15907853, "life_expect": 78.53, "fertility": 1.726}, {"year": 2000, "country": "New Zealand", "cluster": 4, "pop": 3819762, "life_expect": 79.11, "fertility": 1.964}, {"year": 2000, "country": "Nigeria", "cluster": 2, "pop": 114306700, "life_expect": 46.608, "fertility": 5.845}, {"year": 2000, "country": "Norway", "cluster": 1, "pop": 4492400, "life_expect": 79.05, "fertility": 1.8010000000000002}, {"year": 2000, "country": "Pakistan", "cluster": 0, "pop": 146342958, "life_expect": 63.61, "fertility": 3.9936}, {"year": 2000, "country": "Peru", "cluster": 3, "pop": 25979722, "life_expect": 69.906, "fertility": 2.7005}, {"year": 2000, "country": "Philippines", "cluster": 4, "pop": 79739825, "life_expect": 70.303, "fertility": 3.5436}, {"year": 2000, "country": "Poland", "cluster": 1, "pop": 38654164, "life_expect": 74.67, "fertility": 1.251}, {"year": 2000, "country": "Portugal", "cluster": 1, "pop": 10335597, "life_expect": 77.29, "fertility": 1.454}, {"year": 2000, "country": "Rwanda", "cluster": 2, "pop": 7507056, "life_expect": 43.413, "fertility": 6.01}, {"year": 2000, "country": "Saudi Arabia", "cluster": 5, "pop": 23153090, "life_expect": 71.626, "fertility": 3.81}, {"year": 2000, "country": "South Africa", "cluster": 2, "pop": 44066197, "life_expect": 53.365, "fertility": 2.802}, {"year": 2000, "country": "Spain", "cluster": 1, "pop": 40016081, "life_expect": 79.78, "fertility": 1.287}, {"year": 2000, "country": "Switzerland", "cluster": 1, "pop": 7266920, "life_expect": 80.62, "fertility": 1.415}, {"year": 2000, "country": "Turkey", "cluster": 1, "pop": 65666677, "life_expect": 70.845, "fertility": 2.23}, {"year": 2000, "country": "United Kingdom", "cluster": 1, "pop": 59522468, "life_expect": 78.471, "fertility": 1.695}, {"year": 2000, "country": "United States", "cluster": 3, "pop": 282338631, "life_expect": 77.31, "fertility": 2.038}, {"year": 2000, "country": "Venezuela", "cluster": 3, "pop": 23542649, "life_expect": 72.766, "fertility": 2.723}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
</section>
<section id="id8">
<h3><span class="section-number">2.3.6. </span>ツールチップと順序<a class="headerlink" href="#id8" title="Link to this heading">#</a></h3>
<p>ここまで進めると、少しもどかしさを感じるかもしれません。チャートを構築してきましたが、可視化されたポイントがどの国に対応しているのかまだ分からないからです！インタラクティブなツールチップを追加して、探索を可能にしましょう。</p>
<p><code class="docutils literal notranslate"><span class="pre">tooltip</span></code>エンコーディングチャネルは、ユーザーがマークにマウスカーソルを移動したときに表示されるツールチップテキストを決定します。<code class="docutils literal notranslate"><span class="pre">country</span></code>フィールドのツールチップエンコーディングを追加して、どの国が表されているのか調べてみましょう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">data2000</span><span class="p">)</span><span class="o">.</span><span class="n">mark_point</span><span class="p">(</span><span class="n">filled</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;fertility:Q&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;life_expect:Q&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Size</span><span class="p">(</span><span class="s1">&#39;pop:Q&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="nb">range</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1000</span><span class="p">])),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s1">&#39;cluster:N&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">OpacityValue</span><span class="p">(</span><span class="mf">0.5</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Tooltip</span><span class="p">(</span><span class="s1">&#39;country&#39;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-ec7f555579b546ed8b6fbfd6580cade4.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-ec7f555579b546ed8b6fbfd6580cade4.vega-embed details,
  #altair-viz-ec7f555579b546ed8b6fbfd6580cade4.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-ec7f555579b546ed8b6fbfd6580cade4"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-ec7f555579b546ed8b6fbfd6580cade4") {
      outputDiv = document.getElementById("altair-viz-ec7f555579b546ed8b6fbfd6580cade4");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.16.3?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.16.3"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-fdeb0b749a6385830bd1445d39ad6ea0"}, "mark": {"type": "point", "filled": true}, "encoding": {"color": {"field": "cluster", "type": "nominal"}, "opacity": {"value": 0.5}, "size": {"field": "pop", "scale": {"range": [0, 1000]}, "type": "quantitative"}, "tooltip": {"field": "country", "type": "nominal"}, "x": {"field": "fertility", "type": "quantitative"}, "y": {"field": "life_expect", "type": "quantitative"}}, "$schema": "https://vega.github.io/schema/vega-lite/v5.16.3.json", "datasets": {"data-fdeb0b749a6385830bd1445d39ad6ea0": [{"year": 2000, "country": "Afghanistan", "cluster": 0, "pop": 23898198, "life_expect": 42.129, "fertility": 7.4792}, {"year": 2000, "country": "Argentina", "cluster": 3, "pop": 37497728, "life_expect": 74.34, "fertility": 2.35}, {"year": 2000, "country": "Aruba", "cluster": 3, "pop": 69539, "life_expect": 73.451, "fertility": 2.124}, {"year": 2000, "country": "Australia", "cluster": 4, "pop": 19164620, "life_expect": 80.37, "fertility": 1.756}, {"year": 2000, "country": "Austria", "cluster": 1, "pop": 8113413, "life_expect": 78.98, "fertility": 1.3820000000000001}, {"year": 2000, "country": "Bahamas", "cluster": 3, "pop": 290075, "life_expect": 71.068, "fertility": 2.1111}, {"year": 2000, "country": "Bangladesh", "cluster": 0, "pop": 130406594, "life_expect": 62.013, "fertility": 3.224}, {"year": 2000, "country": "Barbados", "cluster": 3, "pop": 273483, "life_expect": 75.97, "fertility": 1.5}, {"year": 2000, "country": "Belgium", "cluster": 1, "pop": 10263618, "life_expect": 78.32, "fertility": 1.638}, {"year": 2000, "country": "Bolivia", "cluster": 3, "pop": 8152620, "life_expect": 63.883, "fertility": 3.9585}, {"year": 2000, "country": "Brazil", "cluster": 3, "pop": 175552771, "life_expect": 71.006, "fertility": 2.345}, {"year": 2000, "country": "Canada", "cluster": 3, "pop": 31278097, "life_expect": 79.77, "fertility": 1.522}, {"year": 2000, "country": "Chile", "cluster": 3, "pop": 15153450, "life_expect": 77.86, "fertility": 2.0}, {"year": 2000, "country": "China", "cluster": 4, "pop": 1262645000, "life_expect": 72.028, "fertility": 1.7000000000000002}, {"year": 2000, "country": "Colombia", "cluster": 3, "pop": 39685655, "life_expect": 71.682, "fertility": 2.4705}, {"year": 2000, "country": "Costa Rica", "cluster": 3, "pop": 3710558, "life_expect": 78.123, "fertility": 2.2815}, {"year": 2000, "country": "Croatia", "cluster": 1, "pop": 4410830, "life_expect": 74.876, "fertility": 1.348}, {"year": 2000, "country": "Cuba", "cluster": 3, "pop": 11134273, "life_expect": 77.158, "fertility": 1.63}, {"year": 2000, "country": "Dominican Republic", "cluster": 3, "pop": 8385828, "life_expect": 70.847, "fertility": 2.95}, {"year": 2000, "country": "Ecuador", "cluster": 3, "pop": 12505204, "life_expect": 74.173, "fertility": 2.8175}, {"year": 2000, "country": "Egypt", "cluster": 5, "pop": 70492342, "life_expect": 69.806, "fertility": 3.174}, {"year": 2000, "country": "El Salvador", "cluster": 3, "pop": 6122515, "life_expect": 70.734, "fertility": 2.883}, {"year": 2000, "country": "Finland", "cluster": 1, "pop": 5168595, "life_expect": 78.37, "fertility": 1.754}, {"year": 2000, "country": "France", "cluster": 1, "pop": 59381628, "life_expect": 79.59, "fertility": 1.8833000000000002}, {"year": 2000, "country": "Georgia", "cluster": 1, "pop": 4777209, "life_expect": 70.476, "fertility": 1.478}, {"year": 2000, "country": "Germany", "cluster": 1, "pop": 82187909, "life_expect": 78.67, "fertility": 1.346}, {"year": 2000, "country": "Greece", "cluster": 1, "pop": 10559110, "life_expect": 78.256, "fertility": 1.2770000000000001}, {"year": 2000, "country": "Grenada", "cluster": 3, "pop": 89312, "life_expect": 67.746, "fertility": 2.429}, {"year": 2000, "country": "Haiti", "cluster": 3, "pop": 7306302, "life_expect": 58.137, "fertility": 4.0}, {"year": 2000, "country": "Hong Kong", "cluster": 4, "pop": 6658720, "life_expect": 81.495, "fertility": 0.9400000000000001}, {"year": 2000, "country": "Iceland", "cluster": 1, "pop": 281043, "life_expect": 80.5, "fertility": 1.9929999999999999}, {"year": 2000, "country": "India", "cluster": 0, "pop": 1007702000, "life_expect": 62.879, "fertility": 3.1132}, {"year": 2000, "country": "Indonesia", "cluster": 4, "pop": 206265000, "life_expect": 68.588, "fertility": 2.3761}, {"year": 2000, "country": "Iran", "cluster": 5, "pop": 65660289, "life_expect": 69.451, "fertility": 2.124}, {"year": 2000, "country": "Iraq", "cluster": 5, "pop": 22675617, "life_expect": 57.046, "fertility": 4.858}, {"year": 2000, "country": "Ireland", "cluster": 1, "pop": 3791690, "life_expect": 77.783, "fertility": 1.9689999999999999}, {"year": 2000, "country": "Israel", "cluster": 5, "pop": 5842454, "life_expect": 79.696, "fertility": 2.906}, {"year": 2000, "country": "Italy", "cluster": 1, "pop": 57719337, "life_expect": 80.24, "fertility": 1.286}, {"year": 2000, "country": "Jamaica", "cluster": 3, "pop": 2615467, "life_expect": 72.047, "fertility": 2.628}, {"year": 2000, "country": "Japan", "cluster": 4, "pop": 126699784, "life_expect": 82.0, "fertility": 1.291}, {"year": 2000, "country": "Kenya", "cluster": 2, "pop": 29985839, "life_expect": 50.992, "fertility": 5.0}, {"year": 2000, "country": "South Korea", "cluster": 4, "pop": 21647682, "life_expect": 66.662, "fertility": 1.9173}, {"year": 2000, "country": "North Korea", "cluster": 4, "pop": 47351083, "life_expect": 77.045, "fertility": 1.242}, {"year": 2000, "country": "Lebanon", "cluster": 5, "pop": 3578036, "life_expect": 71.028, "fertility": 2.319}, {"year": 2000, "country": "Mexico", "cluster": 3, "pop": 99926620, "life_expect": 74.902, "fertility": 2.4005}, {"year": 2000, "country": "Netherlands", "cluster": 1, "pop": 15907853, "life_expect": 78.53, "fertility": 1.726}, {"year": 2000, "country": "New Zealand", "cluster": 4, "pop": 3819762, "life_expect": 79.11, "fertility": 1.964}, {"year": 2000, "country": "Nigeria", "cluster": 2, "pop": 114306700, "life_expect": 46.608, "fertility": 5.845}, {"year": 2000, "country": "Norway", "cluster": 1, "pop": 4492400, "life_expect": 79.05, "fertility": 1.8010000000000002}, {"year": 2000, "country": "Pakistan", "cluster": 0, "pop": 146342958, "life_expect": 63.61, "fertility": 3.9936}, {"year": 2000, "country": "Peru", "cluster": 3, "pop": 25979722, "life_expect": 69.906, "fertility": 2.7005}, {"year": 2000, "country": "Philippines", "cluster": 4, "pop": 79739825, "life_expect": 70.303, "fertility": 3.5436}, {"year": 2000, "country": "Poland", "cluster": 1, "pop": 38654164, "life_expect": 74.67, "fertility": 1.251}, {"year": 2000, "country": "Portugal", "cluster": 1, "pop": 10335597, "life_expect": 77.29, "fertility": 1.454}, {"year": 2000, "country": "Rwanda", "cluster": 2, "pop": 7507056, "life_expect": 43.413, "fertility": 6.01}, {"year": 2000, "country": "Saudi Arabia", "cluster": 5, "pop": 23153090, "life_expect": 71.626, "fertility": 3.81}, {"year": 2000, "country": "South Africa", "cluster": 2, "pop": 44066197, "life_expect": 53.365, "fertility": 2.802}, {"year": 2000, "country": "Spain", "cluster": 1, "pop": 40016081, "life_expect": 79.78, "fertility": 1.287}, {"year": 2000, "country": "Switzerland", "cluster": 1, "pop": 7266920, "life_expect": 80.62, "fertility": 1.415}, {"year": 2000, "country": "Turkey", "cluster": 1, "pop": 65666677, "life_expect": 70.845, "fertility": 2.23}, {"year": 2000, "country": "United Kingdom", "cluster": 1, "pop": 59522468, "life_expect": 78.471, "fertility": 1.695}, {"year": 2000, "country": "United States", "cluster": 3, "pop": 282338631, "life_expect": 77.31, "fertility": 2.038}, {"year": 2000, "country": "Venezuela", "cluster": 3, "pop": 23542649, "life_expect": 72.766, "fertility": 2.723}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<p>マウスを動かしていると、一部のポイントを選択できないことに気付くかもしれません。例えば、最も大きな濃い青色の円はインドを表しており、より小さい人口の国の上に描画されているため、その国の上にマウスをホバーできません。この問題を解決するには、<code class="docutils literal notranslate"><span class="pre">order</span></code>エンコーディングチャネルを使用します。</p>
<p><code class="docutils literal notranslate"><span class="pre">order</span></code>エンコーディングチャネルは、データポイントの順序を決定します。これにより、描画の順序や、<code class="docutils literal notranslate"><span class="pre">line</span></code>および<code class="docutils literal notranslate"><span class="pre">area</span></code>マークにおけるポイント同士の接続順序に影響を与えます。</p>
<p>ここでは、人口（<code class="docutils literal notranslate"><span class="pre">pop</span></code>）による降順で値を並べ替え、大きな円の後に小さな円が描画されるように設定してみましょう:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">data2000</span><span class="p">)</span><span class="o">.</span><span class="n">mark_point</span><span class="p">(</span><span class="n">filled</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;fertility:Q&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;life_expect:Q&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Size</span><span class="p">(</span><span class="s1">&#39;pop:Q&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="nb">range</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1000</span><span class="p">])),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s1">&#39;cluster:N&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">OpacityValue</span><span class="p">(</span><span class="mf">0.5</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Tooltip</span><span class="p">(</span><span class="s1">&#39;country:N&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Order</span><span class="p">(</span><span class="s1">&#39;pop:Q&#39;</span><span class="p">,</span> <span class="n">sort</span><span class="o">=</span><span class="s1">&#39;descending&#39;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-d029f82ee32448ba903b40a845824c2b.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-d029f82ee32448ba903b40a845824c2b.vega-embed details,
  #altair-viz-d029f82ee32448ba903b40a845824c2b.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-d029f82ee32448ba903b40a845824c2b"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-d029f82ee32448ba903b40a845824c2b") {
      outputDiv = document.getElementById("altair-viz-d029f82ee32448ba903b40a845824c2b");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.16.3?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.16.3"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-fdeb0b749a6385830bd1445d39ad6ea0"}, "mark": {"type": "point", "filled": true}, "encoding": {"color": {"field": "cluster", "type": "nominal"}, "opacity": {"value": 0.5}, "order": {"field": "pop", "sort": "descending", "type": "quantitative"}, "size": {"field": "pop", "scale": {"range": [0, 1000]}, "type": "quantitative"}, "tooltip": {"field": "country", "type": "nominal"}, "x": {"field": "fertility", "type": "quantitative"}, "y": {"field": "life_expect", "type": "quantitative"}}, "$schema": "https://vega.github.io/schema/vega-lite/v5.16.3.json", "datasets": {"data-fdeb0b749a6385830bd1445d39ad6ea0": [{"year": 2000, "country": "Afghanistan", "cluster": 0, "pop": 23898198, "life_expect": 42.129, "fertility": 7.4792}, {"year": 2000, "country": "Argentina", "cluster": 3, "pop": 37497728, "life_expect": 74.34, "fertility": 2.35}, {"year": 2000, "country": "Aruba", "cluster": 3, "pop": 69539, "life_expect": 73.451, "fertility": 2.124}, {"year": 2000, "country": "Australia", "cluster": 4, "pop": 19164620, "life_expect": 80.37, "fertility": 1.756}, {"year": 2000, "country": "Austria", "cluster": 1, "pop": 8113413, "life_expect": 78.98, "fertility": 1.3820000000000001}, {"year": 2000, "country": "Bahamas", "cluster": 3, "pop": 290075, "life_expect": 71.068, "fertility": 2.1111}, {"year": 2000, "country": "Bangladesh", "cluster": 0, "pop": 130406594, "life_expect": 62.013, "fertility": 3.224}, {"year": 2000, "country": "Barbados", "cluster": 3, "pop": 273483, "life_expect": 75.97, "fertility": 1.5}, {"year": 2000, "country": "Belgium", "cluster": 1, "pop": 10263618, "life_expect": 78.32, "fertility": 1.638}, {"year": 2000, "country": "Bolivia", "cluster": 3, "pop": 8152620, "life_expect": 63.883, "fertility": 3.9585}, {"year": 2000, "country": "Brazil", "cluster": 3, "pop": 175552771, "life_expect": 71.006, "fertility": 2.345}, {"year": 2000, "country": "Canada", "cluster": 3, "pop": 31278097, "life_expect": 79.77, "fertility": 1.522}, {"year": 2000, "country": "Chile", "cluster": 3, "pop": 15153450, "life_expect": 77.86, "fertility": 2.0}, {"year": 2000, "country": "China", "cluster": 4, "pop": 1262645000, "life_expect": 72.028, "fertility": 1.7000000000000002}, {"year": 2000, "country": "Colombia", "cluster": 3, "pop": 39685655, "life_expect": 71.682, "fertility": 2.4705}, {"year": 2000, "country": "Costa Rica", "cluster": 3, "pop": 3710558, "life_expect": 78.123, "fertility": 2.2815}, {"year": 2000, "country": "Croatia", "cluster": 1, "pop": 4410830, "life_expect": 74.876, "fertility": 1.348}, {"year": 2000, "country": "Cuba", "cluster": 3, "pop": 11134273, "life_expect": 77.158, "fertility": 1.63}, {"year": 2000, "country": "Dominican Republic", "cluster": 3, "pop": 8385828, "life_expect": 70.847, "fertility": 2.95}, {"year": 2000, "country": "Ecuador", "cluster": 3, "pop": 12505204, "life_expect": 74.173, "fertility": 2.8175}, {"year": 2000, "country": "Egypt", "cluster": 5, "pop": 70492342, "life_expect": 69.806, "fertility": 3.174}, {"year": 2000, "country": "El Salvador", "cluster": 3, "pop": 6122515, "life_expect": 70.734, "fertility": 2.883}, {"year": 2000, "country": "Finland", "cluster": 1, "pop": 5168595, "life_expect": 78.37, "fertility": 1.754}, {"year": 2000, "country": "France", "cluster": 1, "pop": 59381628, "life_expect": 79.59, "fertility": 1.8833000000000002}, {"year": 2000, "country": "Georgia", "cluster": 1, "pop": 4777209, "life_expect": 70.476, "fertility": 1.478}, {"year": 2000, "country": "Germany", "cluster": 1, "pop": 82187909, "life_expect": 78.67, "fertility": 1.346}, {"year": 2000, "country": "Greece", "cluster": 1, "pop": 10559110, "life_expect": 78.256, "fertility": 1.2770000000000001}, {"year": 2000, "country": "Grenada", "cluster": 3, "pop": 89312, "life_expect": 67.746, "fertility": 2.429}, {"year": 2000, "country": "Haiti", "cluster": 3, "pop": 7306302, "life_expect": 58.137, "fertility": 4.0}, {"year": 2000, "country": "Hong Kong", "cluster": 4, "pop": 6658720, "life_expect": 81.495, "fertility": 0.9400000000000001}, {"year": 2000, "country": "Iceland", "cluster": 1, "pop": 281043, "life_expect": 80.5, "fertility": 1.9929999999999999}, {"year": 2000, "country": "India", "cluster": 0, "pop": 1007702000, "life_expect": 62.879, "fertility": 3.1132}, {"year": 2000, "country": "Indonesia", "cluster": 4, "pop": 206265000, "life_expect": 68.588, "fertility": 2.3761}, {"year": 2000, "country": "Iran", "cluster": 5, "pop": 65660289, "life_expect": 69.451, "fertility": 2.124}, {"year": 2000, "country": "Iraq", "cluster": 5, "pop": 22675617, "life_expect": 57.046, "fertility": 4.858}, {"year": 2000, "country": "Ireland", "cluster": 1, "pop": 3791690, "life_expect": 77.783, "fertility": 1.9689999999999999}, {"year": 2000, "country": "Israel", "cluster": 5, "pop": 5842454, "life_expect": 79.696, "fertility": 2.906}, {"year": 2000, "country": "Italy", "cluster": 1, "pop": 57719337, "life_expect": 80.24, "fertility": 1.286}, {"year": 2000, "country": "Jamaica", "cluster": 3, "pop": 2615467, "life_expect": 72.047, "fertility": 2.628}, {"year": 2000, "country": "Japan", "cluster": 4, "pop": 126699784, "life_expect": 82.0, "fertility": 1.291}, {"year": 2000, "country": "Kenya", "cluster": 2, "pop": 29985839, "life_expect": 50.992, "fertility": 5.0}, {"year": 2000, "country": "South Korea", "cluster": 4, "pop": 21647682, "life_expect": 66.662, "fertility": 1.9173}, {"year": 2000, "country": "North Korea", "cluster": 4, "pop": 47351083, "life_expect": 77.045, "fertility": 1.242}, {"year": 2000, "country": "Lebanon", "cluster": 5, "pop": 3578036, "life_expect": 71.028, "fertility": 2.319}, {"year": 2000, "country": "Mexico", "cluster": 3, "pop": 99926620, "life_expect": 74.902, "fertility": 2.4005}, {"year": 2000, "country": "Netherlands", "cluster": 1, "pop": 15907853, "life_expect": 78.53, "fertility": 1.726}, {"year": 2000, "country": "New Zealand", "cluster": 4, "pop": 3819762, "life_expect": 79.11, "fertility": 1.964}, {"year": 2000, "country": "Nigeria", "cluster": 2, "pop": 114306700, "life_expect": 46.608, "fertility": 5.845}, {"year": 2000, "country": "Norway", "cluster": 1, "pop": 4492400, "life_expect": 79.05, "fertility": 1.8010000000000002}, {"year": 2000, "country": "Pakistan", "cluster": 0, "pop": 146342958, "life_expect": 63.61, "fertility": 3.9936}, {"year": 2000, "country": "Peru", "cluster": 3, "pop": 25979722, "life_expect": 69.906, "fertility": 2.7005}, {"year": 2000, "country": "Philippines", "cluster": 4, "pop": 79739825, "life_expect": 70.303, "fertility": 3.5436}, {"year": 2000, "country": "Poland", "cluster": 1, "pop": 38654164, "life_expect": 74.67, "fertility": 1.251}, {"year": 2000, "country": "Portugal", "cluster": 1, "pop": 10335597, "life_expect": 77.29, "fertility": 1.454}, {"year": 2000, "country": "Rwanda", "cluster": 2, "pop": 7507056, "life_expect": 43.413, "fertility": 6.01}, {"year": 2000, "country": "Saudi Arabia", "cluster": 5, "pop": 23153090, "life_expect": 71.626, "fertility": 3.81}, {"year": 2000, "country": "South Africa", "cluster": 2, "pop": 44066197, "life_expect": 53.365, "fertility": 2.802}, {"year": 2000, "country": "Spain", "cluster": 1, "pop": 40016081, "life_expect": 79.78, "fertility": 1.287}, {"year": 2000, "country": "Switzerland", "cluster": 1, "pop": 7266920, "life_expect": 80.62, "fertility": 1.415}, {"year": 2000, "country": "Turkey", "cluster": 1, "pop": 65666677, "life_expect": 70.845, "fertility": 2.23}, {"year": 2000, "country": "United Kingdom", "cluster": 1, "pop": 59522468, "life_expect": 78.471, "fertility": 1.695}, {"year": 2000, "country": "United States", "cluster": 3, "pop": 282338631, "life_expect": 77.31, "fertility": 2.038}, {"year": 2000, "country": "Venezuela", "cluster": 3, "pop": 23542649, "life_expect": 72.766, "fertility": 2.723}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<p>これで、インドによって隠されていた小さな国を特定できました。それはバングラデシュです！</p>
<p>また、<code class="docutils literal notranslate"><span class="pre">cluster</span></code>フィールドが何を表しているかも推測できるようになります。さまざまな色のポイントにマウスをホバーして、自分なりの説明を考えてみてください。</p>
<p>ここまでで、ツールチップに基礎データレコードの単一プロパティを表示するようにしました。複数の値を表示するには、<code class="docutils literal notranslate"><span class="pre">tooltip</span></code>チャネルにエンコーディングの配列を渡します。この配列には、表示したい各フィールドを指定します:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">data2000</span><span class="p">)</span><span class="o">.</span><span class="n">mark_point</span><span class="p">(</span><span class="n">filled</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;fertility:Q&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;life_expect:Q&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Size</span><span class="p">(</span><span class="s1">&#39;pop:Q&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="nb">range</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1000</span><span class="p">])),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s1">&#39;cluster:N&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">OpacityValue</span><span class="p">(</span><span class="mf">0.5</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Order</span><span class="p">(</span><span class="s1">&#39;pop:Q&#39;</span><span class="p">,</span> <span class="n">sort</span><span class="o">=</span><span class="s1">&#39;descending&#39;</span><span class="p">),</span>
    <span class="n">tooltip</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">alt</span><span class="o">.</span><span class="n">Tooltip</span><span class="p">(</span><span class="s1">&#39;country:N&#39;</span><span class="p">),</span>
        <span class="n">alt</span><span class="o">.</span><span class="n">Tooltip</span><span class="p">(</span><span class="s1">&#39;fertility:Q&#39;</span><span class="p">),</span>
        <span class="n">alt</span><span class="o">.</span><span class="n">Tooltip</span><span class="p">(</span><span class="s1">&#39;life_expect:Q&#39;</span><span class="p">)</span>
    <span class="p">]</span>   
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-5fabf746cef84368acad937f66b63df8.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-5fabf746cef84368acad937f66b63df8.vega-embed details,
  #altair-viz-5fabf746cef84368acad937f66b63df8.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-5fabf746cef84368acad937f66b63df8"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-5fabf746cef84368acad937f66b63df8") {
      outputDiv = document.getElementById("altair-viz-5fabf746cef84368acad937f66b63df8");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.16.3?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.16.3"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-fdeb0b749a6385830bd1445d39ad6ea0"}, "mark": {"type": "point", "filled": true}, "encoding": {"color": {"field": "cluster", "type": "nominal"}, "opacity": {"value": 0.5}, "order": {"field": "pop", "sort": "descending", "type": "quantitative"}, "size": {"field": "pop", "scale": {"range": [0, 1000]}, "type": "quantitative"}, "tooltip": [{"field": "country", "type": "nominal"}, {"field": "fertility", "type": "quantitative"}, {"field": "life_expect", "type": "quantitative"}], "x": {"field": "fertility", "type": "quantitative"}, "y": {"field": "life_expect", "type": "quantitative"}}, "$schema": "https://vega.github.io/schema/vega-lite/v5.16.3.json", "datasets": {"data-fdeb0b749a6385830bd1445d39ad6ea0": [{"year": 2000, "country": "Afghanistan", "cluster": 0, "pop": 23898198, "life_expect": 42.129, "fertility": 7.4792}, {"year": 2000, "country": "Argentina", "cluster": 3, "pop": 37497728, "life_expect": 74.34, "fertility": 2.35}, {"year": 2000, "country": "Aruba", "cluster": 3, "pop": 69539, "life_expect": 73.451, "fertility": 2.124}, {"year": 2000, "country": "Australia", "cluster": 4, "pop": 19164620, "life_expect": 80.37, "fertility": 1.756}, {"year": 2000, "country": "Austria", "cluster": 1, "pop": 8113413, "life_expect": 78.98, "fertility": 1.3820000000000001}, {"year": 2000, "country": "Bahamas", "cluster": 3, "pop": 290075, "life_expect": 71.068, "fertility": 2.1111}, {"year": 2000, "country": "Bangladesh", "cluster": 0, "pop": 130406594, "life_expect": 62.013, "fertility": 3.224}, {"year": 2000, "country": "Barbados", "cluster": 3, "pop": 273483, "life_expect": 75.97, "fertility": 1.5}, {"year": 2000, "country": "Belgium", "cluster": 1, "pop": 10263618, "life_expect": 78.32, "fertility": 1.638}, {"year": 2000, "country": "Bolivia", "cluster": 3, "pop": 8152620, "life_expect": 63.883, "fertility": 3.9585}, {"year": 2000, "country": "Brazil", "cluster": 3, "pop": 175552771, "life_expect": 71.006, "fertility": 2.345}, {"year": 2000, "country": "Canada", "cluster": 3, "pop": 31278097, "life_expect": 79.77, "fertility": 1.522}, {"year": 2000, "country": "Chile", "cluster": 3, "pop": 15153450, "life_expect": 77.86, "fertility": 2.0}, {"year": 2000, "country": "China", "cluster": 4, "pop": 1262645000, "life_expect": 72.028, "fertility": 1.7000000000000002}, {"year": 2000, "country": "Colombia", "cluster": 3, "pop": 39685655, "life_expect": 71.682, "fertility": 2.4705}, {"year": 2000, "country": "Costa Rica", "cluster": 3, "pop": 3710558, "life_expect": 78.123, "fertility": 2.2815}, {"year": 2000, "country": "Croatia", "cluster": 1, "pop": 4410830, "life_expect": 74.876, "fertility": 1.348}, {"year": 2000, "country": "Cuba", "cluster": 3, "pop": 11134273, "life_expect": 77.158, "fertility": 1.63}, {"year": 2000, "country": "Dominican Republic", "cluster": 3, "pop": 8385828, "life_expect": 70.847, "fertility": 2.95}, {"year": 2000, "country": "Ecuador", "cluster": 3, "pop": 12505204, "life_expect": 74.173, "fertility": 2.8175}, {"year": 2000, "country": "Egypt", "cluster": 5, "pop": 70492342, "life_expect": 69.806, "fertility": 3.174}, {"year": 2000, "country": "El Salvador", "cluster": 3, "pop": 6122515, "life_expect": 70.734, "fertility": 2.883}, {"year": 2000, "country": "Finland", "cluster": 1, "pop": 5168595, "life_expect": 78.37, "fertility": 1.754}, {"year": 2000, "country": "France", "cluster": 1, "pop": 59381628, "life_expect": 79.59, "fertility": 1.8833000000000002}, {"year": 2000, "country": "Georgia", "cluster": 1, "pop": 4777209, "life_expect": 70.476, "fertility": 1.478}, {"year": 2000, "country": "Germany", "cluster": 1, "pop": 82187909, "life_expect": 78.67, "fertility": 1.346}, {"year": 2000, "country": "Greece", "cluster": 1, "pop": 10559110, "life_expect": 78.256, "fertility": 1.2770000000000001}, {"year": 2000, "country": "Grenada", "cluster": 3, "pop": 89312, "life_expect": 67.746, "fertility": 2.429}, {"year": 2000, "country": "Haiti", "cluster": 3, "pop": 7306302, "life_expect": 58.137, "fertility": 4.0}, {"year": 2000, "country": "Hong Kong", "cluster": 4, "pop": 6658720, "life_expect": 81.495, "fertility": 0.9400000000000001}, {"year": 2000, "country": "Iceland", "cluster": 1, "pop": 281043, "life_expect": 80.5, "fertility": 1.9929999999999999}, {"year": 2000, "country": "India", "cluster": 0, "pop": 1007702000, "life_expect": 62.879, "fertility": 3.1132}, {"year": 2000, "country": "Indonesia", "cluster": 4, "pop": 206265000, "life_expect": 68.588, "fertility": 2.3761}, {"year": 2000, "country": "Iran", "cluster": 5, "pop": 65660289, "life_expect": 69.451, "fertility": 2.124}, {"year": 2000, "country": "Iraq", "cluster": 5, "pop": 22675617, "life_expect": 57.046, "fertility": 4.858}, {"year": 2000, "country": "Ireland", "cluster": 1, "pop": 3791690, "life_expect": 77.783, "fertility": 1.9689999999999999}, {"year": 2000, "country": "Israel", "cluster": 5, "pop": 5842454, "life_expect": 79.696, "fertility": 2.906}, {"year": 2000, "country": "Italy", "cluster": 1, "pop": 57719337, "life_expect": 80.24, "fertility": 1.286}, {"year": 2000, "country": "Jamaica", "cluster": 3, "pop": 2615467, "life_expect": 72.047, "fertility": 2.628}, {"year": 2000, "country": "Japan", "cluster": 4, "pop": 126699784, "life_expect": 82.0, "fertility": 1.291}, {"year": 2000, "country": "Kenya", "cluster": 2, "pop": 29985839, "life_expect": 50.992, "fertility": 5.0}, {"year": 2000, "country": "South Korea", "cluster": 4, "pop": 21647682, "life_expect": 66.662, "fertility": 1.9173}, {"year": 2000, "country": "North Korea", "cluster": 4, "pop": 47351083, "life_expect": 77.045, "fertility": 1.242}, {"year": 2000, "country": "Lebanon", "cluster": 5, "pop": 3578036, "life_expect": 71.028, "fertility": 2.319}, {"year": 2000, "country": "Mexico", "cluster": 3, "pop": 99926620, "life_expect": 74.902, "fertility": 2.4005}, {"year": 2000, "country": "Netherlands", "cluster": 1, "pop": 15907853, "life_expect": 78.53, "fertility": 1.726}, {"year": 2000, "country": "New Zealand", "cluster": 4, "pop": 3819762, "life_expect": 79.11, "fertility": 1.964}, {"year": 2000, "country": "Nigeria", "cluster": 2, "pop": 114306700, "life_expect": 46.608, "fertility": 5.845}, {"year": 2000, "country": "Norway", "cluster": 1, "pop": 4492400, "life_expect": 79.05, "fertility": 1.8010000000000002}, {"year": 2000, "country": "Pakistan", "cluster": 0, "pop": 146342958, "life_expect": 63.61, "fertility": 3.9936}, {"year": 2000, "country": "Peru", "cluster": 3, "pop": 25979722, "life_expect": 69.906, "fertility": 2.7005}, {"year": 2000, "country": "Philippines", "cluster": 4, "pop": 79739825, "life_expect": 70.303, "fertility": 3.5436}, {"year": 2000, "country": "Poland", "cluster": 1, "pop": 38654164, "life_expect": 74.67, "fertility": 1.251}, {"year": 2000, "country": "Portugal", "cluster": 1, "pop": 10335597, "life_expect": 77.29, "fertility": 1.454}, {"year": 2000, "country": "Rwanda", "cluster": 2, "pop": 7507056, "life_expect": 43.413, "fertility": 6.01}, {"year": 2000, "country": "Saudi Arabia", "cluster": 5, "pop": 23153090, "life_expect": 71.626, "fertility": 3.81}, {"year": 2000, "country": "South Africa", "cluster": 2, "pop": 44066197, "life_expect": 53.365, "fertility": 2.802}, {"year": 2000, "country": "Spain", "cluster": 1, "pop": 40016081, "life_expect": 79.78, "fertility": 1.287}, {"year": 2000, "country": "Switzerland", "cluster": 1, "pop": 7266920, "life_expect": 80.62, "fertility": 1.415}, {"year": 2000, "country": "Turkey", "cluster": 1, "pop": 65666677, "life_expect": 70.845, "fertility": 2.23}, {"year": 2000, "country": "United Kingdom", "cluster": 1, "pop": 59522468, "life_expect": 78.471, "fertility": 1.695}, {"year": 2000, "country": "United States", "cluster": 3, "pop": 282338631, "life_expect": 77.31, "fertility": 2.038}, {"year": 2000, "country": "Venezuela", "cluster": 3, "pop": 23542649, "life_expect": 72.766, "fertility": 2.723}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<p>これで、マウスホバー時に複数のデータフィールドを表示できるようになりました！</p>
</section>
<section id="id9">
<h3><span class="section-number">2.3.7. </span>列と行のファセット<a class="headerlink" href="#id9" title="Link to this heading">#</a></h3>
<p>空間的な位置は視覚エンコーディングにおいて最も強力で柔軟なチャネルの1つですが、すでにフィールドを<code class="docutils literal notranslate"><span class="pre">x</span></code>と<code class="docutils literal notranslate"><span class="pre">y</span></code>チャネルに割り当てている場合はどうすればよいでしょうか？有用な手法の1つは、データのサブセットを表示するサブプロットからなる<em>トレリスプロット</em>を作成することです。トレリスプロットは、データを<a class="reference external" href="https://en.wikipedia.org/wiki/Small_multiple">スモールマルチプル</a>のビューで表示する一般的な手法の一例です。</p>
<p><code class="docutils literal notranslate"><span class="pre">column</span></code>と<code class="docutils literal notranslate"><span class="pre">row</span></code>エンコーディングチャネルは、指定されたデータフィールドに従ってデータを分割し、横方向（列）または縦方向（行）にサブプロットを生成します。</p>
<p>以下は、データを<code class="docutils literal notranslate"><span class="pre">cluster</span></code>の値ごとに1列に分割したトレリスプロットの例です:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">data2000</span><span class="p">)</span><span class="o">.</span><span class="n">mark_point</span><span class="p">(</span><span class="n">filled</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;fertility:Q&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;life_expect:Q&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Size</span><span class="p">(</span><span class="s1">&#39;pop:Q&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="nb">range</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1000</span><span class="p">])),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s1">&#39;cluster:N&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">OpacityValue</span><span class="p">(</span><span class="mf">0.5</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Tooltip</span><span class="p">(</span><span class="s1">&#39;country:N&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Order</span><span class="p">(</span><span class="s1">&#39;pop:Q&#39;</span><span class="p">,</span> <span class="n">sort</span><span class="o">=</span><span class="s1">&#39;descending&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="s1">&#39;cluster:N&#39;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-451eea703de74be5a398ada76c1b4a8f.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-451eea703de74be5a398ada76c1b4a8f.vega-embed details,
  #altair-viz-451eea703de74be5a398ada76c1b4a8f.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-451eea703de74be5a398ada76c1b4a8f"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-451eea703de74be5a398ada76c1b4a8f") {
      outputDiv = document.getElementById("altair-viz-451eea703de74be5a398ada76c1b4a8f");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.16.3?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.16.3"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-fdeb0b749a6385830bd1445d39ad6ea0"}, "mark": {"type": "point", "filled": true}, "encoding": {"color": {"field": "cluster", "type": "nominal"}, "column": {"field": "cluster", "type": "nominal"}, "opacity": {"value": 0.5}, "order": {"field": "pop", "sort": "descending", "type": "quantitative"}, "size": {"field": "pop", "scale": {"range": [0, 1000]}, "type": "quantitative"}, "tooltip": {"field": "country", "type": "nominal"}, "x": {"field": "fertility", "type": "quantitative"}, "y": {"field": "life_expect", "type": "quantitative"}}, "$schema": "https://vega.github.io/schema/vega-lite/v5.16.3.json", "datasets": {"data-fdeb0b749a6385830bd1445d39ad6ea0": [{"year": 2000, "country": "Afghanistan", "cluster": 0, "pop": 23898198, "life_expect": 42.129, "fertility": 7.4792}, {"year": 2000, "country": "Argentina", "cluster": 3, "pop": 37497728, "life_expect": 74.34, "fertility": 2.35}, {"year": 2000, "country": "Aruba", "cluster": 3, "pop": 69539, "life_expect": 73.451, "fertility": 2.124}, {"year": 2000, "country": "Australia", "cluster": 4, "pop": 19164620, "life_expect": 80.37, "fertility": 1.756}, {"year": 2000, "country": "Austria", "cluster": 1, "pop": 8113413, "life_expect": 78.98, "fertility": 1.3820000000000001}, {"year": 2000, "country": "Bahamas", "cluster": 3, "pop": 290075, "life_expect": 71.068, "fertility": 2.1111}, {"year": 2000, "country": "Bangladesh", "cluster": 0, "pop": 130406594, "life_expect": 62.013, "fertility": 3.224}, {"year": 2000, "country": "Barbados", "cluster": 3, "pop": 273483, "life_expect": 75.97, "fertility": 1.5}, {"year": 2000, "country": "Belgium", "cluster": 1, "pop": 10263618, "life_expect": 78.32, "fertility": 1.638}, {"year": 2000, "country": "Bolivia", "cluster": 3, "pop": 8152620, "life_expect": 63.883, "fertility": 3.9585}, {"year": 2000, "country": "Brazil", "cluster": 3, "pop": 175552771, "life_expect": 71.006, "fertility": 2.345}, {"year": 2000, "country": "Canada", "cluster": 3, "pop": 31278097, "life_expect": 79.77, "fertility": 1.522}, {"year": 2000, "country": "Chile", "cluster": 3, "pop": 15153450, "life_expect": 77.86, "fertility": 2.0}, {"year": 2000, "country": "China", "cluster": 4, "pop": 1262645000, "life_expect": 72.028, "fertility": 1.7000000000000002}, {"year": 2000, "country": "Colombia", "cluster": 3, "pop": 39685655, "life_expect": 71.682, "fertility": 2.4705}, {"year": 2000, "country": "Costa Rica", "cluster": 3, "pop": 3710558, "life_expect": 78.123, "fertility": 2.2815}, {"year": 2000, "country": "Croatia", "cluster": 1, "pop": 4410830, "life_expect": 74.876, "fertility": 1.348}, {"year": 2000, "country": "Cuba", "cluster": 3, "pop": 11134273, "life_expect": 77.158, "fertility": 1.63}, {"year": 2000, "country": "Dominican Republic", "cluster": 3, "pop": 8385828, "life_expect": 70.847, "fertility": 2.95}, {"year": 2000, "country": "Ecuador", "cluster": 3, "pop": 12505204, "life_expect": 74.173, "fertility": 2.8175}, {"year": 2000, "country": "Egypt", "cluster": 5, "pop": 70492342, "life_expect": 69.806, "fertility": 3.174}, {"year": 2000, "country": "El Salvador", "cluster": 3, "pop": 6122515, "life_expect": 70.734, "fertility": 2.883}, {"year": 2000, "country": "Finland", "cluster": 1, "pop": 5168595, "life_expect": 78.37, "fertility": 1.754}, {"year": 2000, "country": "France", "cluster": 1, "pop": 59381628, "life_expect": 79.59, "fertility": 1.8833000000000002}, {"year": 2000, "country": "Georgia", "cluster": 1, "pop": 4777209, "life_expect": 70.476, "fertility": 1.478}, {"year": 2000, "country": "Germany", "cluster": 1, "pop": 82187909, "life_expect": 78.67, "fertility": 1.346}, {"year": 2000, "country": "Greece", "cluster": 1, "pop": 10559110, "life_expect": 78.256, "fertility": 1.2770000000000001}, {"year": 2000, "country": "Grenada", "cluster": 3, "pop": 89312, "life_expect": 67.746, "fertility": 2.429}, {"year": 2000, "country": "Haiti", "cluster": 3, "pop": 7306302, "life_expect": 58.137, "fertility": 4.0}, {"year": 2000, "country": "Hong Kong", "cluster": 4, "pop": 6658720, "life_expect": 81.495, "fertility": 0.9400000000000001}, {"year": 2000, "country": "Iceland", "cluster": 1, "pop": 281043, "life_expect": 80.5, "fertility": 1.9929999999999999}, {"year": 2000, "country": "India", "cluster": 0, "pop": 1007702000, "life_expect": 62.879, "fertility": 3.1132}, {"year": 2000, "country": "Indonesia", "cluster": 4, "pop": 206265000, "life_expect": 68.588, "fertility": 2.3761}, {"year": 2000, "country": "Iran", "cluster": 5, "pop": 65660289, "life_expect": 69.451, "fertility": 2.124}, {"year": 2000, "country": "Iraq", "cluster": 5, "pop": 22675617, "life_expect": 57.046, "fertility": 4.858}, {"year": 2000, "country": "Ireland", "cluster": 1, "pop": 3791690, "life_expect": 77.783, "fertility": 1.9689999999999999}, {"year": 2000, "country": "Israel", "cluster": 5, "pop": 5842454, "life_expect": 79.696, "fertility": 2.906}, {"year": 2000, "country": "Italy", "cluster": 1, "pop": 57719337, "life_expect": 80.24, "fertility": 1.286}, {"year": 2000, "country": "Jamaica", "cluster": 3, "pop": 2615467, "life_expect": 72.047, "fertility": 2.628}, {"year": 2000, "country": "Japan", "cluster": 4, "pop": 126699784, "life_expect": 82.0, "fertility": 1.291}, {"year": 2000, "country": "Kenya", "cluster": 2, "pop": 29985839, "life_expect": 50.992, "fertility": 5.0}, {"year": 2000, "country": "South Korea", "cluster": 4, "pop": 21647682, "life_expect": 66.662, "fertility": 1.9173}, {"year": 2000, "country": "North Korea", "cluster": 4, "pop": 47351083, "life_expect": 77.045, "fertility": 1.242}, {"year": 2000, "country": "Lebanon", "cluster": 5, "pop": 3578036, "life_expect": 71.028, "fertility": 2.319}, {"year": 2000, "country": "Mexico", "cluster": 3, "pop": 99926620, "life_expect": 74.902, "fertility": 2.4005}, {"year": 2000, "country": "Netherlands", "cluster": 1, "pop": 15907853, "life_expect": 78.53, "fertility": 1.726}, {"year": 2000, "country": "New Zealand", "cluster": 4, "pop": 3819762, "life_expect": 79.11, "fertility": 1.964}, {"year": 2000, "country": "Nigeria", "cluster": 2, "pop": 114306700, "life_expect": 46.608, "fertility": 5.845}, {"year": 2000, "country": "Norway", "cluster": 1, "pop": 4492400, "life_expect": 79.05, "fertility": 1.8010000000000002}, {"year": 2000, "country": "Pakistan", "cluster": 0, "pop": 146342958, "life_expect": 63.61, "fertility": 3.9936}, {"year": 2000, "country": "Peru", "cluster": 3, "pop": 25979722, "life_expect": 69.906, "fertility": 2.7005}, {"year": 2000, "country": "Philippines", "cluster": 4, "pop": 79739825, "life_expect": 70.303, "fertility": 3.5436}, {"year": 2000, "country": "Poland", "cluster": 1, "pop": 38654164, "life_expect": 74.67, "fertility": 1.251}, {"year": 2000, "country": "Portugal", "cluster": 1, "pop": 10335597, "life_expect": 77.29, "fertility": 1.454}, {"year": 2000, "country": "Rwanda", "cluster": 2, "pop": 7507056, "life_expect": 43.413, "fertility": 6.01}, {"year": 2000, "country": "Saudi Arabia", "cluster": 5, "pop": 23153090, "life_expect": 71.626, "fertility": 3.81}, {"year": 2000, "country": "South Africa", "cluster": 2, "pop": 44066197, "life_expect": 53.365, "fertility": 2.802}, {"year": 2000, "country": "Spain", "cluster": 1, "pop": 40016081, "life_expect": 79.78, "fertility": 1.287}, {"year": 2000, "country": "Switzerland", "cluster": 1, "pop": 7266920, "life_expect": 80.62, "fertility": 1.415}, {"year": 2000, "country": "Turkey", "cluster": 1, "pop": 65666677, "life_expect": 70.845, "fertility": 2.23}, {"year": 2000, "country": "United Kingdom", "cluster": 1, "pop": 59522468, "life_expect": 78.471, "fertility": 1.695}, {"year": 2000, "country": "United States", "cluster": 3, "pop": 282338631, "life_expect": 77.31, "fertility": 2.038}, {"year": 2000, "country": "Venezuela", "cluster": 3, "pop": 23542649, "life_expect": 72.766, "fertility": 2.723}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<p>上記のプロットは画面に収まりきらず、すべてのサブプロットを比較するのが難しくなっています。デフォルトの<code class="docutils literal notranslate"><span class="pre">width</span></code>と<code class="docutils literal notranslate"><span class="pre">height</span></code>プロパティを設定して、より小さなスモールマルチプルを作成できます。また、列ヘッダーがすでに<code class="docutils literal notranslate"><span class="pre">cluster</span></code>の値をラベルとして表示しているため、<code class="docutils literal notranslate"><span class="pre">color</span></code>の凡例を<code class="docutils literal notranslate"><span class="pre">None</span></code>に設定して削除しましょう。さらに、スペースを有効活用するために、<code class="docutils literal notranslate"><span class="pre">size</span></code>の凡例をチャートの<code class="docutils literal notranslate"><span class="pre">'bottom'</span></code>に配置するよう設定することもできます。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">data2000</span><span class="p">)</span><span class="o">.</span><span class="n">mark_point</span><span class="p">(</span><span class="n">filled</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;fertility:Q&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;life_expect:Q&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Size</span><span class="p">(</span><span class="s1">&#39;pop:Q&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="nb">range</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1000</span><span class="p">]),</span>
             <span class="n">legend</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Legend</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s1">&#39;bottom&#39;</span><span class="p">,</span> <span class="n">titleOrient</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">)),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s1">&#39;cluster:N&#39;</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">None</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">OpacityValue</span><span class="p">(</span><span class="mf">0.5</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Tooltip</span><span class="p">(</span><span class="s1">&#39;country:N&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Order</span><span class="p">(</span><span class="s1">&#39;pop:Q&#39;</span><span class="p">,</span> <span class="n">sort</span><span class="o">=</span><span class="s1">&#39;descending&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="s1">&#39;cluster:N&#39;</span><span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">135</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">135</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-c7b294644d2d406a8fc5cc2e1fbb51d2.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-c7b294644d2d406a8fc5cc2e1fbb51d2.vega-embed details,
  #altair-viz-c7b294644d2d406a8fc5cc2e1fbb51d2.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-c7b294644d2d406a8fc5cc2e1fbb51d2"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-c7b294644d2d406a8fc5cc2e1fbb51d2") {
      outputDiv = document.getElementById("altair-viz-c7b294644d2d406a8fc5cc2e1fbb51d2");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.16.3?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.16.3"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-fdeb0b749a6385830bd1445d39ad6ea0"}, "mark": {"type": "point", "filled": true}, "encoding": {"color": {"field": "cluster", "legend": null, "type": "nominal"}, "column": {"field": "cluster", "type": "nominal"}, "opacity": {"value": 0.5}, "order": {"field": "pop", "sort": "descending", "type": "quantitative"}, "size": {"field": "pop", "legend": {"orient": "bottom", "titleOrient": "left"}, "scale": {"range": [0, 1000]}, "type": "quantitative"}, "tooltip": {"field": "country", "type": "nominal"}, "x": {"field": "fertility", "type": "quantitative"}, "y": {"field": "life_expect", "type": "quantitative"}}, "height": 135, "width": 135, "$schema": "https://vega.github.io/schema/vega-lite/v5.16.3.json", "datasets": {"data-fdeb0b749a6385830bd1445d39ad6ea0": [{"year": 2000, "country": "Afghanistan", "cluster": 0, "pop": 23898198, "life_expect": 42.129, "fertility": 7.4792}, {"year": 2000, "country": "Argentina", "cluster": 3, "pop": 37497728, "life_expect": 74.34, "fertility": 2.35}, {"year": 2000, "country": "Aruba", "cluster": 3, "pop": 69539, "life_expect": 73.451, "fertility": 2.124}, {"year": 2000, "country": "Australia", "cluster": 4, "pop": 19164620, "life_expect": 80.37, "fertility": 1.756}, {"year": 2000, "country": "Austria", "cluster": 1, "pop": 8113413, "life_expect": 78.98, "fertility": 1.3820000000000001}, {"year": 2000, "country": "Bahamas", "cluster": 3, "pop": 290075, "life_expect": 71.068, "fertility": 2.1111}, {"year": 2000, "country": "Bangladesh", "cluster": 0, "pop": 130406594, "life_expect": 62.013, "fertility": 3.224}, {"year": 2000, "country": "Barbados", "cluster": 3, "pop": 273483, "life_expect": 75.97, "fertility": 1.5}, {"year": 2000, "country": "Belgium", "cluster": 1, "pop": 10263618, "life_expect": 78.32, "fertility": 1.638}, {"year": 2000, "country": "Bolivia", "cluster": 3, "pop": 8152620, "life_expect": 63.883, "fertility": 3.9585}, {"year": 2000, "country": "Brazil", "cluster": 3, "pop": 175552771, "life_expect": 71.006, "fertility": 2.345}, {"year": 2000, "country": "Canada", "cluster": 3, "pop": 31278097, "life_expect": 79.77, "fertility": 1.522}, {"year": 2000, "country": "Chile", "cluster": 3, "pop": 15153450, "life_expect": 77.86, "fertility": 2.0}, {"year": 2000, "country": "China", "cluster": 4, "pop": 1262645000, "life_expect": 72.028, "fertility": 1.7000000000000002}, {"year": 2000, "country": "Colombia", "cluster": 3, "pop": 39685655, "life_expect": 71.682, "fertility": 2.4705}, {"year": 2000, "country": "Costa Rica", "cluster": 3, "pop": 3710558, "life_expect": 78.123, "fertility": 2.2815}, {"year": 2000, "country": "Croatia", "cluster": 1, "pop": 4410830, "life_expect": 74.876, "fertility": 1.348}, {"year": 2000, "country": "Cuba", "cluster": 3, "pop": 11134273, "life_expect": 77.158, "fertility": 1.63}, {"year": 2000, "country": "Dominican Republic", "cluster": 3, "pop": 8385828, "life_expect": 70.847, "fertility": 2.95}, {"year": 2000, "country": "Ecuador", "cluster": 3, "pop": 12505204, "life_expect": 74.173, "fertility": 2.8175}, {"year": 2000, "country": "Egypt", "cluster": 5, "pop": 70492342, "life_expect": 69.806, "fertility": 3.174}, {"year": 2000, "country": "El Salvador", "cluster": 3, "pop": 6122515, "life_expect": 70.734, "fertility": 2.883}, {"year": 2000, "country": "Finland", "cluster": 1, "pop": 5168595, "life_expect": 78.37, "fertility": 1.754}, {"year": 2000, "country": "France", "cluster": 1, "pop": 59381628, "life_expect": 79.59, "fertility": 1.8833000000000002}, {"year": 2000, "country": "Georgia", "cluster": 1, "pop": 4777209, "life_expect": 70.476, "fertility": 1.478}, {"year": 2000, "country": "Germany", "cluster": 1, "pop": 82187909, "life_expect": 78.67, "fertility": 1.346}, {"year": 2000, "country": "Greece", "cluster": 1, "pop": 10559110, "life_expect": 78.256, "fertility": 1.2770000000000001}, {"year": 2000, "country": "Grenada", "cluster": 3, "pop": 89312, "life_expect": 67.746, "fertility": 2.429}, {"year": 2000, "country": "Haiti", "cluster": 3, "pop": 7306302, "life_expect": 58.137, "fertility": 4.0}, {"year": 2000, "country": "Hong Kong", "cluster": 4, "pop": 6658720, "life_expect": 81.495, "fertility": 0.9400000000000001}, {"year": 2000, "country": "Iceland", "cluster": 1, "pop": 281043, "life_expect": 80.5, "fertility": 1.9929999999999999}, {"year": 2000, "country": "India", "cluster": 0, "pop": 1007702000, "life_expect": 62.879, "fertility": 3.1132}, {"year": 2000, "country": "Indonesia", "cluster": 4, "pop": 206265000, "life_expect": 68.588, "fertility": 2.3761}, {"year": 2000, "country": "Iran", "cluster": 5, "pop": 65660289, "life_expect": 69.451, "fertility": 2.124}, {"year": 2000, "country": "Iraq", "cluster": 5, "pop": 22675617, "life_expect": 57.046, "fertility": 4.858}, {"year": 2000, "country": "Ireland", "cluster": 1, "pop": 3791690, "life_expect": 77.783, "fertility": 1.9689999999999999}, {"year": 2000, "country": "Israel", "cluster": 5, "pop": 5842454, "life_expect": 79.696, "fertility": 2.906}, {"year": 2000, "country": "Italy", "cluster": 1, "pop": 57719337, "life_expect": 80.24, "fertility": 1.286}, {"year": 2000, "country": "Jamaica", "cluster": 3, "pop": 2615467, "life_expect": 72.047, "fertility": 2.628}, {"year": 2000, "country": "Japan", "cluster": 4, "pop": 126699784, "life_expect": 82.0, "fertility": 1.291}, {"year": 2000, "country": "Kenya", "cluster": 2, "pop": 29985839, "life_expect": 50.992, "fertility": 5.0}, {"year": 2000, "country": "South Korea", "cluster": 4, "pop": 21647682, "life_expect": 66.662, "fertility": 1.9173}, {"year": 2000, "country": "North Korea", "cluster": 4, "pop": 47351083, "life_expect": 77.045, "fertility": 1.242}, {"year": 2000, "country": "Lebanon", "cluster": 5, "pop": 3578036, "life_expect": 71.028, "fertility": 2.319}, {"year": 2000, "country": "Mexico", "cluster": 3, "pop": 99926620, "life_expect": 74.902, "fertility": 2.4005}, {"year": 2000, "country": "Netherlands", "cluster": 1, "pop": 15907853, "life_expect": 78.53, "fertility": 1.726}, {"year": 2000, "country": "New Zealand", "cluster": 4, "pop": 3819762, "life_expect": 79.11, "fertility": 1.964}, {"year": 2000, "country": "Nigeria", "cluster": 2, "pop": 114306700, "life_expect": 46.608, "fertility": 5.845}, {"year": 2000, "country": "Norway", "cluster": 1, "pop": 4492400, "life_expect": 79.05, "fertility": 1.8010000000000002}, {"year": 2000, "country": "Pakistan", "cluster": 0, "pop": 146342958, "life_expect": 63.61, "fertility": 3.9936}, {"year": 2000, "country": "Peru", "cluster": 3, "pop": 25979722, "life_expect": 69.906, "fertility": 2.7005}, {"year": 2000, "country": "Philippines", "cluster": 4, "pop": 79739825, "life_expect": 70.303, "fertility": 3.5436}, {"year": 2000, "country": "Poland", "cluster": 1, "pop": 38654164, "life_expect": 74.67, "fertility": 1.251}, {"year": 2000, "country": "Portugal", "cluster": 1, "pop": 10335597, "life_expect": 77.29, "fertility": 1.454}, {"year": 2000, "country": "Rwanda", "cluster": 2, "pop": 7507056, "life_expect": 43.413, "fertility": 6.01}, {"year": 2000, "country": "Saudi Arabia", "cluster": 5, "pop": 23153090, "life_expect": 71.626, "fertility": 3.81}, {"year": 2000, "country": "South Africa", "cluster": 2, "pop": 44066197, "life_expect": 53.365, "fertility": 2.802}, {"year": 2000, "country": "Spain", "cluster": 1, "pop": 40016081, "life_expect": 79.78, "fertility": 1.287}, {"year": 2000, "country": "Switzerland", "cluster": 1, "pop": 7266920, "life_expect": 80.62, "fertility": 1.415}, {"year": 2000, "country": "Turkey", "cluster": 1, "pop": 65666677, "life_expect": 70.845, "fertility": 2.23}, {"year": 2000, "country": "United Kingdom", "cluster": 1, "pop": 59522468, "life_expect": 78.471, "fertility": 1.695}, {"year": 2000, "country": "United States", "cluster": 3, "pop": 282338631, "life_expect": 77.31, "fertility": 2.038}, {"year": 2000, "country": "Venezuela", "cluster": 3, "pop": 23542649, "life_expect": 72.766, "fertility": 2.723}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">column</span></code>と<code class="docutils literal notranslate"><span class="pre">row</span></code>のエンコーディングは、内部的には<code class="docutils literal notranslate"><span class="pre">facet</span></code>ビュー構成オペレーターを使用する新しい仕様に変換されます。この<code class="docutils literal notranslate"><span class="pre">facet</span></code>については後ほどさらに詳しく取り上げます！</p>
<p>それまでの間に、<em>上記のチャートを列ではなく行に分割するように書き換えることができますか？</em></p>
</section>
<section id="id10">
<h3><span class="section-number">2.3.8. </span>先取り: インタラクティブフィルタリング<a class="headerlink" href="#id10" title="Link to this heading">#</a></h3>
<p>後のモジュールでは、データ探索のためのインタラクション手法を詳しく学びます。ここではその先取りとして、<code class="docutils literal notranslate"><span class="pre">year</span></code>フィールドにレンジスライダーをバインドし、各年のデータをインタラクティブにスクラブできる機能を紹介します。この時点で以下のコードが少し難しく感じられても心配しないでください。後でインタラクションについて詳しく説明します。</p>
<p><em>スライダーを前後に動かして、データ値が時間とともにどのように変化するかを確認してください！</em></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">select_year</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">selection_single</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;select&#39;</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">],</span> <span class="n">init</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;year&#39;</span><span class="p">:</span> <span class="mi">1955</span><span class="p">},</span>
    <span class="n">bind</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">binding_range</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">1955</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">2005</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">mark_point</span><span class="p">(</span><span class="n">filled</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;fertility:Q&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">9</span><span class="p">])),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;life_expect:Q&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">90</span><span class="p">])),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Size</span><span class="p">(</span><span class="s1">&#39;pop:Q&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1200000000</span><span class="p">],</span> <span class="nb">range</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1000</span><span class="p">])),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s1">&#39;cluster:N&#39;</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">None</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">OpacityValue</span><span class="p">(</span><span class="mf">0.5</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Tooltip</span><span class="p">(</span><span class="s1">&#39;country:N&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Order</span><span class="p">(</span><span class="s1">&#39;pop:Q&#39;</span><span class="p">,</span> <span class="n">sort</span><span class="o">=</span><span class="s1">&#39;descending&#39;</span><span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">add_selection</span><span class="p">(</span><span class="n">select_year</span><span class="p">)</span><span class="o">.</span><span class="n">transform_filter</span><span class="p">(</span><span class="n">select_year</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/Users/yuichiyazaki/.pyenv/versions/miniforge3-4.10.3-10/lib/python3.9/site-packages/altair/utils/deprecation.py:65: AltairDeprecationWarning: &#39;selection_single&#39; is deprecated.  Use &#39;selection_point&#39;
  warnings.warn(message, AltairDeprecationWarning, stacklevel=1)
/Users/yuichiyazaki/.pyenv/versions/miniforge3-4.10.3-10/lib/python3.9/site-packages/altair/vegalite/v5/api.py:417: AltairDeprecationWarning: Use &#39;value&#39; instead of &#39;init&#39;.
  warnings.warn(
</pre></div>
</div>
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">TypeError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span> <span class="p">[</span><span class="mi">22</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">select_year</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">selection_single</span><span class="p">(</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span>     <span class="n">name</span><span class="o">=</span><span class="s1">&#39;select&#39;</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">],</span> <span class="n">init</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;year&#39;</span><span class="p">:</span> <span class="mi">1955</span><span class="p">},</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span>     <span class="n">bind</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">binding_range</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">1955</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">2005</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">6</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">mark_point</span><span class="p">(</span><span class="n">filled</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
<span class="g g-Whitespace">      </span><span class="mi">7</span>     <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;fertility:Q&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">9</span><span class="p">])),</span>
<span class="g g-Whitespace">      </span><span class="mi">8</span>     <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;life_expect:Q&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">domain</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">90</span><span class="p">])),</span>
   <span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">13</span>     <span class="n">alt</span><span class="o">.</span><span class="n">Order</span><span class="p">(</span><span class="s1">&#39;pop:Q&#39;</span><span class="p">,</span> <span class="n">sort</span><span class="o">=</span><span class="s1">&#39;descending&#39;</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">14</span> <span class="p">)</span><span class="o">.</span><span class="n">add_selection</span><span class="p">(</span><span class="n">select_year</span><span class="p">)</span><span class="o">.</span><span class="n">transform_filter</span><span class="p">(</span><span class="n">select_year</span><span class="p">)</span>

<span class="nn">File ~/.pyenv/versions/miniforge3-4.10.3-10/lib/python3.9/site-packages/altair/utils/deprecation.py:66,</span> in <span class="ni">_deprecate.&lt;locals&gt;.new_obj</span><span class="nt">(*args, **kwargs)</span>
<span class="g g-Whitespace">     </span><span class="mi">63</span> <span class="nd">@functools</span><span class="o">.</span><span class="n">wraps</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">64</span> <span class="k">def</span><span class="w"> </span><span class="nf">new_obj</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="g g-Whitespace">     </span><span class="mi">65</span>     <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">AltairDeprecationWarning</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="ne">---&gt; </span><span class="mi">66</span>     <span class="k">return</span> <span class="n">obj</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<span class="nn">File ~/.pyenv/versions/miniforge3-4.10.3-10/lib/python3.9/site-packages/altair/vegalite/v5/api.py:753,</span> in <span class="ni">selection_single</span><span class="nt">(**kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">747</span> <span class="nd">@utils</span><span class="o">.</span><span class="n">deprecation</span><span class="o">.</span><span class="n">deprecated</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">748</span>     <span class="n">message</span><span class="o">=</span><span class="s2">&quot;&#39;selection_single&#39; is deprecated.  Use &#39;selection_point&#39;&quot;</span>
<span class="g g-Whitespace">    </span><span class="mi">749</span> <span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">750</span> <span class="nd">@utils</span><span class="o">.</span><span class="n">use_signature</span><span class="p">(</span><span class="n">core</span><span class="o">.</span><span class="n">PointSelectionConfig</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">751</span> <span class="k">def</span><span class="w"> </span><span class="nf">selection_single</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="g g-Whitespace">    </span><span class="mi">752</span><span class="w">     </span><span class="sd">&quot;&quot;&quot;&#39;selection_single&#39; is deprecated.  Use &#39;selection_point&#39;&quot;&quot;&quot;</span>
<span class="ne">--&gt; </span><span class="mi">753</span>     <span class="k">return</span> <span class="n">_selection</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s2">&quot;point&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<span class="nn">File ~/.pyenv/versions/miniforge3-4.10.3-10/lib/python3.9/site-packages/altair/vegalite/v5/api.py:478,</span> in <span class="ni">_selection</span><span class="nt">(type, **kwds)</span>
<span class="g g-Whitespace">    </span><span class="mi">475</span> <span class="k">else</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">476</span>     <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;&#39;type&#39; must be &#39;point&#39; or &#39;interval&#39;&quot;&quot;&quot;</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">478</span> <span class="k">return</span> <span class="n">param</span><span class="p">(</span><span class="n">select</span><span class="o">=</span><span class="n">select</span><span class="p">,</span> <span class="o">**</span><span class="n">param_kwds</span><span class="p">)</span>

<span class="nn">File ~/.pyenv/versions/miniforge3-4.10.3-10/lib/python3.9/site-packages/altair/vegalite/v5/api.py:444,</span> in <span class="ni">param</span><span class="nt">(name, value, bind, empty, expr, **kwds)</span>
<span class="g g-Whitespace">    </span><span class="mi">442</span>     <span class="n">parameter</span><span class="o">.</span><span class="n">param_type</span> <span class="o">=</span> <span class="s2">&quot;selection&quot;</span>
<span class="g g-Whitespace">    </span><span class="mi">443</span> <span class="k">else</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">444</span>     <span class="n">parameter</span><span class="o">.</span><span class="n">param</span> <span class="o">=</span> <span class="n">core</span><span class="o">.</span><span class="n">SelectionParameter</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">445</span>         <span class="n">name</span><span class="o">=</span><span class="n">parameter</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">bind</span><span class="o">=</span><span class="n">bind</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span> <span class="n">expr</span><span class="o">=</span><span class="n">expr</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span>
<span class="g g-Whitespace">    </span><span class="mi">446</span>     <span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">447</span>     <span class="n">parameter</span><span class="o">.</span><span class="n">param_type</span> <span class="o">=</span> <span class="s2">&quot;selection&quot;</span>
<span class="g g-Whitespace">    </span><span class="mi">449</span> <span class="k">return</span> <span class="n">parameter</span>

<span class="ne">TypeError</span>: altair.vegalite.v5.schema.core.SelectionParameter() got multiple values for keyword argument &#39;value&#39;
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="id11">
<h2><span class="section-number">2.4. </span>グラフィカルマーク<a class="headerlink" href="#id11" title="Link to this heading">#</a></h2>
<p>上記でエンコーディングチャネルを探求する際には、<code class="docutils literal notranslate"><span class="pre">point</span></code>マークを使用してデータを可視化してきました。しかし、<code class="docutils literal notranslate"><span class="pre">point</span></code>マークはデータを視覚的に表現するために使用できる多くの幾何学的形状の1つに過ぎません。Altairには、以下を含む多くの組み込みマークタイプが用意されています：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">mark_area()</span></code> - トップラインとベースラインで定義された塗りつぶしエリア。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mark_bar()</span></code> - 長方形の棒グラフ。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mark_circle()</span></code> - 散布図のポイントとして使用される塗りつぶした円。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mark_line()</span></code> - 接続された線分。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mark_point()</span></code> - 形状を設定可能な散布図のポイント。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mark_rect()</span></code> - 塗りつぶされた長方形（ヒートマップに便利）。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mark_rule()</span></code> - 軸をまたぐ垂直または水平の線。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mark_square()</span></code> - 散布図のポイントとして使用される塗りつぶした四角形。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mark_text()</span></code> - テキストで表現された散布図のポイント。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mark_tick()</span></code> - 垂直または水平の目盛り線。</p></li>
</ul>
<p>完全なリストや例へのリンクについては、<a class="reference external" href="https://altair-viz.github.io/user_guide/marks/index.html">Altairマークのドキュメント</a>を参照してください。次に、統計グラフィックで最も一般的に使用されるマークタイプをいくつか順に紹介します。</p>
<section id="id12">
<h3><span class="section-number">2.4.1. </span>ポイントマーク<a class="headerlink" href="#id12" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">point</span></code>マークタイプは、<em>散布図</em>や<em>ドットプロット</em>のように特定のポイントを表現します。<code class="docutils literal notranslate"><span class="pre">x</span></code>および<code class="docutils literal notranslate"><span class="pre">y</span></code>エンコーディングチャネル（2Dポイントの位置を指定）に加えて、<code class="docutils literal notranslate"><span class="pre">point</span></code>マークは<code class="docutils literal notranslate"><span class="pre">color</span></code>、<code class="docutils literal notranslate"><span class="pre">size</span></code>、<code class="docutils literal notranslate"><span class="pre">shape</span></code>のエンコーディングを使用して追加のデータフィールドを伝達できます。</p>
<p>以下は、<code class="docutils literal notranslate"><span class="pre">fertility</span></code>のドットプロットで、<code class="docutils literal notranslate"><span class="pre">cluster</span></code>フィールドを<code class="docutils literal notranslate"><span class="pre">y</span></code>と<code class="docutils literal notranslate"><span class="pre">shape</span></code>チャネルの両方で冗長的にエンコードしています。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">data2000</span><span class="p">)</span><span class="o">.</span><span class="n">mark_point</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;fertility:Q&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;cluster:N&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Shape</span><span class="p">(</span><span class="s1">&#39;cluster:N&#39;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-e0d24f24d6914962b1ef3e0bb2e62b5c.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-e0d24f24d6914962b1ef3e0bb2e62b5c.vega-embed details,
  #altair-viz-e0d24f24d6914962b1ef3e0bb2e62b5c.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-e0d24f24d6914962b1ef3e0bb2e62b5c"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-e0d24f24d6914962b1ef3e0bb2e62b5c") {
      outputDiv = document.getElementById("altair-viz-e0d24f24d6914962b1ef3e0bb2e62b5c");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.16.3?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.16.3"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-fdeb0b749a6385830bd1445d39ad6ea0"}, "mark": {"type": "point"}, "encoding": {"shape": {"field": "cluster", "type": "nominal"}, "x": {"field": "fertility", "type": "quantitative"}, "y": {"field": "cluster", "type": "nominal"}}, "$schema": "https://vega.github.io/schema/vega-lite/v5.16.3.json", "datasets": {"data-fdeb0b749a6385830bd1445d39ad6ea0": [{"year": 2000, "country": "Afghanistan", "cluster": 0, "pop": 23898198, "life_expect": 42.129, "fertility": 7.4792}, {"year": 2000, "country": "Argentina", "cluster": 3, "pop": 37497728, "life_expect": 74.34, "fertility": 2.35}, {"year": 2000, "country": "Aruba", "cluster": 3, "pop": 69539, "life_expect": 73.451, "fertility": 2.124}, {"year": 2000, "country": "Australia", "cluster": 4, "pop": 19164620, "life_expect": 80.37, "fertility": 1.756}, {"year": 2000, "country": "Austria", "cluster": 1, "pop": 8113413, "life_expect": 78.98, "fertility": 1.3820000000000001}, {"year": 2000, "country": "Bahamas", "cluster": 3, "pop": 290075, "life_expect": 71.068, "fertility": 2.1111}, {"year": 2000, "country": "Bangladesh", "cluster": 0, "pop": 130406594, "life_expect": 62.013, "fertility": 3.224}, {"year": 2000, "country": "Barbados", "cluster": 3, "pop": 273483, "life_expect": 75.97, "fertility": 1.5}, {"year": 2000, "country": "Belgium", "cluster": 1, "pop": 10263618, "life_expect": 78.32, "fertility": 1.638}, {"year": 2000, "country": "Bolivia", "cluster": 3, "pop": 8152620, "life_expect": 63.883, "fertility": 3.9585}, {"year": 2000, "country": "Brazil", "cluster": 3, "pop": 175552771, "life_expect": 71.006, "fertility": 2.345}, {"year": 2000, "country": "Canada", "cluster": 3, "pop": 31278097, "life_expect": 79.77, "fertility": 1.522}, {"year": 2000, "country": "Chile", "cluster": 3, "pop": 15153450, "life_expect": 77.86, "fertility": 2.0}, {"year": 2000, "country": "China", "cluster": 4, "pop": 1262645000, "life_expect": 72.028, "fertility": 1.7000000000000002}, {"year": 2000, "country": "Colombia", "cluster": 3, "pop": 39685655, "life_expect": 71.682, "fertility": 2.4705}, {"year": 2000, "country": "Costa Rica", "cluster": 3, "pop": 3710558, "life_expect": 78.123, "fertility": 2.2815}, {"year": 2000, "country": "Croatia", "cluster": 1, "pop": 4410830, "life_expect": 74.876, "fertility": 1.348}, {"year": 2000, "country": "Cuba", "cluster": 3, "pop": 11134273, "life_expect": 77.158, "fertility": 1.63}, {"year": 2000, "country": "Dominican Republic", "cluster": 3, "pop": 8385828, "life_expect": 70.847, "fertility": 2.95}, {"year": 2000, "country": "Ecuador", "cluster": 3, "pop": 12505204, "life_expect": 74.173, "fertility": 2.8175}, {"year": 2000, "country": "Egypt", "cluster": 5, "pop": 70492342, "life_expect": 69.806, "fertility": 3.174}, {"year": 2000, "country": "El Salvador", "cluster": 3, "pop": 6122515, "life_expect": 70.734, "fertility": 2.883}, {"year": 2000, "country": "Finland", "cluster": 1, "pop": 5168595, "life_expect": 78.37, "fertility": 1.754}, {"year": 2000, "country": "France", "cluster": 1, "pop": 59381628, "life_expect": 79.59, "fertility": 1.8833000000000002}, {"year": 2000, "country": "Georgia", "cluster": 1, "pop": 4777209, "life_expect": 70.476, "fertility": 1.478}, {"year": 2000, "country": "Germany", "cluster": 1, "pop": 82187909, "life_expect": 78.67, "fertility": 1.346}, {"year": 2000, "country": "Greece", "cluster": 1, "pop": 10559110, "life_expect": 78.256, "fertility": 1.2770000000000001}, {"year": 2000, "country": "Grenada", "cluster": 3, "pop": 89312, "life_expect": 67.746, "fertility": 2.429}, {"year": 2000, "country": "Haiti", "cluster": 3, "pop": 7306302, "life_expect": 58.137, "fertility": 4.0}, {"year": 2000, "country": "Hong Kong", "cluster": 4, "pop": 6658720, "life_expect": 81.495, "fertility": 0.9400000000000001}, {"year": 2000, "country": "Iceland", "cluster": 1, "pop": 281043, "life_expect": 80.5, "fertility": 1.9929999999999999}, {"year": 2000, "country": "India", "cluster": 0, "pop": 1007702000, "life_expect": 62.879, "fertility": 3.1132}, {"year": 2000, "country": "Indonesia", "cluster": 4, "pop": 206265000, "life_expect": 68.588, "fertility": 2.3761}, {"year": 2000, "country": "Iran", "cluster": 5, "pop": 65660289, "life_expect": 69.451, "fertility": 2.124}, {"year": 2000, "country": "Iraq", "cluster": 5, "pop": 22675617, "life_expect": 57.046, "fertility": 4.858}, {"year": 2000, "country": "Ireland", "cluster": 1, "pop": 3791690, "life_expect": 77.783, "fertility": 1.9689999999999999}, {"year": 2000, "country": "Israel", "cluster": 5, "pop": 5842454, "life_expect": 79.696, "fertility": 2.906}, {"year": 2000, "country": "Italy", "cluster": 1, "pop": 57719337, "life_expect": 80.24, "fertility": 1.286}, {"year": 2000, "country": "Jamaica", "cluster": 3, "pop": 2615467, "life_expect": 72.047, "fertility": 2.628}, {"year": 2000, "country": "Japan", "cluster": 4, "pop": 126699784, "life_expect": 82.0, "fertility": 1.291}, {"year": 2000, "country": "Kenya", "cluster": 2, "pop": 29985839, "life_expect": 50.992, "fertility": 5.0}, {"year": 2000, "country": "South Korea", "cluster": 4, "pop": 21647682, "life_expect": 66.662, "fertility": 1.9173}, {"year": 2000, "country": "North Korea", "cluster": 4, "pop": 47351083, "life_expect": 77.045, "fertility": 1.242}, {"year": 2000, "country": "Lebanon", "cluster": 5, "pop": 3578036, "life_expect": 71.028, "fertility": 2.319}, {"year": 2000, "country": "Mexico", "cluster": 3, "pop": 99926620, "life_expect": 74.902, "fertility": 2.4005}, {"year": 2000, "country": "Netherlands", "cluster": 1, "pop": 15907853, "life_expect": 78.53, "fertility": 1.726}, {"year": 2000, "country": "New Zealand", "cluster": 4, "pop": 3819762, "life_expect": 79.11, "fertility": 1.964}, {"year": 2000, "country": "Nigeria", "cluster": 2, "pop": 114306700, "life_expect": 46.608, "fertility": 5.845}, {"year": 2000, "country": "Norway", "cluster": 1, "pop": 4492400, "life_expect": 79.05, "fertility": 1.8010000000000002}, {"year": 2000, "country": "Pakistan", "cluster": 0, "pop": 146342958, "life_expect": 63.61, "fertility": 3.9936}, {"year": 2000, "country": "Peru", "cluster": 3, "pop": 25979722, "life_expect": 69.906, "fertility": 2.7005}, {"year": 2000, "country": "Philippines", "cluster": 4, "pop": 79739825, "life_expect": 70.303, "fertility": 3.5436}, {"year": 2000, "country": "Poland", "cluster": 1, "pop": 38654164, "life_expect": 74.67, "fertility": 1.251}, {"year": 2000, "country": "Portugal", "cluster": 1, "pop": 10335597, "life_expect": 77.29, "fertility": 1.454}, {"year": 2000, "country": "Rwanda", "cluster": 2, "pop": 7507056, "life_expect": 43.413, "fertility": 6.01}, {"year": 2000, "country": "Saudi Arabia", "cluster": 5, "pop": 23153090, "life_expect": 71.626, "fertility": 3.81}, {"year": 2000, "country": "South Africa", "cluster": 2, "pop": 44066197, "life_expect": 53.365, "fertility": 2.802}, {"year": 2000, "country": "Spain", "cluster": 1, "pop": 40016081, "life_expect": 79.78, "fertility": 1.287}, {"year": 2000, "country": "Switzerland", "cluster": 1, "pop": 7266920, "life_expect": 80.62, "fertility": 1.415}, {"year": 2000, "country": "Turkey", "cluster": 1, "pop": 65666677, "life_expect": 70.845, "fertility": 2.23}, {"year": 2000, "country": "United Kingdom", "cluster": 1, "pop": 59522468, "life_expect": 78.471, "fertility": 1.695}, {"year": 2000, "country": "United States", "cluster": 3, "pop": 282338631, "life_expect": 77.31, "fertility": 2.038}, {"year": 2000, "country": "Venezuela", "cluster": 3, "pop": 23542649, "life_expect": 72.766, "fertility": 2.723}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<p>エンコーディングチャネルに加えて、<code class="docutils literal notranslate"><span class="pre">mark_*()</span></code>メソッドに値を渡すことでマークをスタイリングすることができます。</p>
<p>例えば、ポイントマークはデフォルトではアウトライン付きで描画されますが、<code class="docutils literal notranslate"><span class="pre">filled</span></code>形状を使用するように指定することも可能です。同様に、デフォルトの<code class="docutils literal notranslate"><span class="pre">size</span></code>を設定してポイントマークの総ピクセル面積を指定することもできます。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">data2000</span><span class="p">)</span><span class="o">.</span><span class="n">mark_point</span><span class="p">(</span><span class="n">filled</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;fertility:Q&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;cluster:N&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Shape</span><span class="p">(</span><span class="s1">&#39;cluster:N&#39;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-4f9d06e359ed4d8f8ea7ad1a0915aea8.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-4f9d06e359ed4d8f8ea7ad1a0915aea8.vega-embed details,
  #altair-viz-4f9d06e359ed4d8f8ea7ad1a0915aea8.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-4f9d06e359ed4d8f8ea7ad1a0915aea8"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-4f9d06e359ed4d8f8ea7ad1a0915aea8") {
      outputDiv = document.getElementById("altair-viz-4f9d06e359ed4d8f8ea7ad1a0915aea8");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.16.3?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.16.3"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-fdeb0b749a6385830bd1445d39ad6ea0"}, "mark": {"type": "point", "filled": true, "size": 100}, "encoding": {"shape": {"field": "cluster", "type": "nominal"}, "x": {"field": "fertility", "type": "quantitative"}, "y": {"field": "cluster", "type": "nominal"}}, "$schema": "https://vega.github.io/schema/vega-lite/v5.16.3.json", "datasets": {"data-fdeb0b749a6385830bd1445d39ad6ea0": [{"year": 2000, "country": "Afghanistan", "cluster": 0, "pop": 23898198, "life_expect": 42.129, "fertility": 7.4792}, {"year": 2000, "country": "Argentina", "cluster": 3, "pop": 37497728, "life_expect": 74.34, "fertility": 2.35}, {"year": 2000, "country": "Aruba", "cluster": 3, "pop": 69539, "life_expect": 73.451, "fertility": 2.124}, {"year": 2000, "country": "Australia", "cluster": 4, "pop": 19164620, "life_expect": 80.37, "fertility": 1.756}, {"year": 2000, "country": "Austria", "cluster": 1, "pop": 8113413, "life_expect": 78.98, "fertility": 1.3820000000000001}, {"year": 2000, "country": "Bahamas", "cluster": 3, "pop": 290075, "life_expect": 71.068, "fertility": 2.1111}, {"year": 2000, "country": "Bangladesh", "cluster": 0, "pop": 130406594, "life_expect": 62.013, "fertility": 3.224}, {"year": 2000, "country": "Barbados", "cluster": 3, "pop": 273483, "life_expect": 75.97, "fertility": 1.5}, {"year": 2000, "country": "Belgium", "cluster": 1, "pop": 10263618, "life_expect": 78.32, "fertility": 1.638}, {"year": 2000, "country": "Bolivia", "cluster": 3, "pop": 8152620, "life_expect": 63.883, "fertility": 3.9585}, {"year": 2000, "country": "Brazil", "cluster": 3, "pop": 175552771, "life_expect": 71.006, "fertility": 2.345}, {"year": 2000, "country": "Canada", "cluster": 3, "pop": 31278097, "life_expect": 79.77, "fertility": 1.522}, {"year": 2000, "country": "Chile", "cluster": 3, "pop": 15153450, "life_expect": 77.86, "fertility": 2.0}, {"year": 2000, "country": "China", "cluster": 4, "pop": 1262645000, "life_expect": 72.028, "fertility": 1.7000000000000002}, {"year": 2000, "country": "Colombia", "cluster": 3, "pop": 39685655, "life_expect": 71.682, "fertility": 2.4705}, {"year": 2000, "country": "Costa Rica", "cluster": 3, "pop": 3710558, "life_expect": 78.123, "fertility": 2.2815}, {"year": 2000, "country": "Croatia", "cluster": 1, "pop": 4410830, "life_expect": 74.876, "fertility": 1.348}, {"year": 2000, "country": "Cuba", "cluster": 3, "pop": 11134273, "life_expect": 77.158, "fertility": 1.63}, {"year": 2000, "country": "Dominican Republic", "cluster": 3, "pop": 8385828, "life_expect": 70.847, "fertility": 2.95}, {"year": 2000, "country": "Ecuador", "cluster": 3, "pop": 12505204, "life_expect": 74.173, "fertility": 2.8175}, {"year": 2000, "country": "Egypt", "cluster": 5, "pop": 70492342, "life_expect": 69.806, "fertility": 3.174}, {"year": 2000, "country": "El Salvador", "cluster": 3, "pop": 6122515, "life_expect": 70.734, "fertility": 2.883}, {"year": 2000, "country": "Finland", "cluster": 1, "pop": 5168595, "life_expect": 78.37, "fertility": 1.754}, {"year": 2000, "country": "France", "cluster": 1, "pop": 59381628, "life_expect": 79.59, "fertility": 1.8833000000000002}, {"year": 2000, "country": "Georgia", "cluster": 1, "pop": 4777209, "life_expect": 70.476, "fertility": 1.478}, {"year": 2000, "country": "Germany", "cluster": 1, "pop": 82187909, "life_expect": 78.67, "fertility": 1.346}, {"year": 2000, "country": "Greece", "cluster": 1, "pop": 10559110, "life_expect": 78.256, "fertility": 1.2770000000000001}, {"year": 2000, "country": "Grenada", "cluster": 3, "pop": 89312, "life_expect": 67.746, "fertility": 2.429}, {"year": 2000, "country": "Haiti", "cluster": 3, "pop": 7306302, "life_expect": 58.137, "fertility": 4.0}, {"year": 2000, "country": "Hong Kong", "cluster": 4, "pop": 6658720, "life_expect": 81.495, "fertility": 0.9400000000000001}, {"year": 2000, "country": "Iceland", "cluster": 1, "pop": 281043, "life_expect": 80.5, "fertility": 1.9929999999999999}, {"year": 2000, "country": "India", "cluster": 0, "pop": 1007702000, "life_expect": 62.879, "fertility": 3.1132}, {"year": 2000, "country": "Indonesia", "cluster": 4, "pop": 206265000, "life_expect": 68.588, "fertility": 2.3761}, {"year": 2000, "country": "Iran", "cluster": 5, "pop": 65660289, "life_expect": 69.451, "fertility": 2.124}, {"year": 2000, "country": "Iraq", "cluster": 5, "pop": 22675617, "life_expect": 57.046, "fertility": 4.858}, {"year": 2000, "country": "Ireland", "cluster": 1, "pop": 3791690, "life_expect": 77.783, "fertility": 1.9689999999999999}, {"year": 2000, "country": "Israel", "cluster": 5, "pop": 5842454, "life_expect": 79.696, "fertility": 2.906}, {"year": 2000, "country": "Italy", "cluster": 1, "pop": 57719337, "life_expect": 80.24, "fertility": 1.286}, {"year": 2000, "country": "Jamaica", "cluster": 3, "pop": 2615467, "life_expect": 72.047, "fertility": 2.628}, {"year": 2000, "country": "Japan", "cluster": 4, "pop": 126699784, "life_expect": 82.0, "fertility": 1.291}, {"year": 2000, "country": "Kenya", "cluster": 2, "pop": 29985839, "life_expect": 50.992, "fertility": 5.0}, {"year": 2000, "country": "South Korea", "cluster": 4, "pop": 21647682, "life_expect": 66.662, "fertility": 1.9173}, {"year": 2000, "country": "North Korea", "cluster": 4, "pop": 47351083, "life_expect": 77.045, "fertility": 1.242}, {"year": 2000, "country": "Lebanon", "cluster": 5, "pop": 3578036, "life_expect": 71.028, "fertility": 2.319}, {"year": 2000, "country": "Mexico", "cluster": 3, "pop": 99926620, "life_expect": 74.902, "fertility": 2.4005}, {"year": 2000, "country": "Netherlands", "cluster": 1, "pop": 15907853, "life_expect": 78.53, "fertility": 1.726}, {"year": 2000, "country": "New Zealand", "cluster": 4, "pop": 3819762, "life_expect": 79.11, "fertility": 1.964}, {"year": 2000, "country": "Nigeria", "cluster": 2, "pop": 114306700, "life_expect": 46.608, "fertility": 5.845}, {"year": 2000, "country": "Norway", "cluster": 1, "pop": 4492400, "life_expect": 79.05, "fertility": 1.8010000000000002}, {"year": 2000, "country": "Pakistan", "cluster": 0, "pop": 146342958, "life_expect": 63.61, "fertility": 3.9936}, {"year": 2000, "country": "Peru", "cluster": 3, "pop": 25979722, "life_expect": 69.906, "fertility": 2.7005}, {"year": 2000, "country": "Philippines", "cluster": 4, "pop": 79739825, "life_expect": 70.303, "fertility": 3.5436}, {"year": 2000, "country": "Poland", "cluster": 1, "pop": 38654164, "life_expect": 74.67, "fertility": 1.251}, {"year": 2000, "country": "Portugal", "cluster": 1, "pop": 10335597, "life_expect": 77.29, "fertility": 1.454}, {"year": 2000, "country": "Rwanda", "cluster": 2, "pop": 7507056, "life_expect": 43.413, "fertility": 6.01}, {"year": 2000, "country": "Saudi Arabia", "cluster": 5, "pop": 23153090, "life_expect": 71.626, "fertility": 3.81}, {"year": 2000, "country": "South Africa", "cluster": 2, "pop": 44066197, "life_expect": 53.365, "fertility": 2.802}, {"year": 2000, "country": "Spain", "cluster": 1, "pop": 40016081, "life_expect": 79.78, "fertility": 1.287}, {"year": 2000, "country": "Switzerland", "cluster": 1, "pop": 7266920, "life_expect": 80.62, "fertility": 1.415}, {"year": 2000, "country": "Turkey", "cluster": 1, "pop": 65666677, "life_expect": 70.845, "fertility": 2.23}, {"year": 2000, "country": "United Kingdom", "cluster": 1, "pop": 59522468, "life_expect": 78.471, "fertility": 1.695}, {"year": 2000, "country": "United States", "cluster": 3, "pop": 282338631, "life_expect": 77.31, "fertility": 2.038}, {"year": 2000, "country": "Venezuela", "cluster": 3, "pop": 23542649, "life_expect": 72.766, "fertility": 2.723}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
</section>
<section id="id13">
<h3><span class="section-number">2.4.2. </span>サークルマーク<a class="headerlink" href="#id13" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">circle</span></code>マークタイプは、塗りつぶされた円として描画される<code class="docutils literal notranslate"><span class="pre">point</span></code>マークの便利な省略形です。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">data2000</span><span class="p">)</span><span class="o">.</span><span class="n">mark_circle</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;fertility:Q&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;cluster:N&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Shape</span><span class="p">(</span><span class="s1">&#39;cluster:N&#39;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-7f2a25a60fd24dcb8d8c4922c79c9daf.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-7f2a25a60fd24dcb8d8c4922c79c9daf.vega-embed details,
  #altair-viz-7f2a25a60fd24dcb8d8c4922c79c9daf.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-7f2a25a60fd24dcb8d8c4922c79c9daf"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-7f2a25a60fd24dcb8d8c4922c79c9daf") {
      outputDiv = document.getElementById("altair-viz-7f2a25a60fd24dcb8d8c4922c79c9daf");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.16.3?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.16.3"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-fdeb0b749a6385830bd1445d39ad6ea0"}, "mark": {"type": "circle", "size": 100}, "encoding": {"shape": {"field": "cluster", "type": "nominal"}, "x": {"field": "fertility", "type": "quantitative"}, "y": {"field": "cluster", "type": "nominal"}}, "$schema": "https://vega.github.io/schema/vega-lite/v5.16.3.json", "datasets": {"data-fdeb0b749a6385830bd1445d39ad6ea0": [{"year": 2000, "country": "Afghanistan", "cluster": 0, "pop": 23898198, "life_expect": 42.129, "fertility": 7.4792}, {"year": 2000, "country": "Argentina", "cluster": 3, "pop": 37497728, "life_expect": 74.34, "fertility": 2.35}, {"year": 2000, "country": "Aruba", "cluster": 3, "pop": 69539, "life_expect": 73.451, "fertility": 2.124}, {"year": 2000, "country": "Australia", "cluster": 4, "pop": 19164620, "life_expect": 80.37, "fertility": 1.756}, {"year": 2000, "country": "Austria", "cluster": 1, "pop": 8113413, "life_expect": 78.98, "fertility": 1.3820000000000001}, {"year": 2000, "country": "Bahamas", "cluster": 3, "pop": 290075, "life_expect": 71.068, "fertility": 2.1111}, {"year": 2000, "country": "Bangladesh", "cluster": 0, "pop": 130406594, "life_expect": 62.013, "fertility": 3.224}, {"year": 2000, "country": "Barbados", "cluster": 3, "pop": 273483, "life_expect": 75.97, "fertility": 1.5}, {"year": 2000, "country": "Belgium", "cluster": 1, "pop": 10263618, "life_expect": 78.32, "fertility": 1.638}, {"year": 2000, "country": "Bolivia", "cluster": 3, "pop": 8152620, "life_expect": 63.883, "fertility": 3.9585}, {"year": 2000, "country": "Brazil", "cluster": 3, "pop": 175552771, "life_expect": 71.006, "fertility": 2.345}, {"year": 2000, "country": "Canada", "cluster": 3, "pop": 31278097, "life_expect": 79.77, "fertility": 1.522}, {"year": 2000, "country": "Chile", "cluster": 3, "pop": 15153450, "life_expect": 77.86, "fertility": 2.0}, {"year": 2000, "country": "China", "cluster": 4, "pop": 1262645000, "life_expect": 72.028, "fertility": 1.7000000000000002}, {"year": 2000, "country": "Colombia", "cluster": 3, "pop": 39685655, "life_expect": 71.682, "fertility": 2.4705}, {"year": 2000, "country": "Costa Rica", "cluster": 3, "pop": 3710558, "life_expect": 78.123, "fertility": 2.2815}, {"year": 2000, "country": "Croatia", "cluster": 1, "pop": 4410830, "life_expect": 74.876, "fertility": 1.348}, {"year": 2000, "country": "Cuba", "cluster": 3, "pop": 11134273, "life_expect": 77.158, "fertility": 1.63}, {"year": 2000, "country": "Dominican Republic", "cluster": 3, "pop": 8385828, "life_expect": 70.847, "fertility": 2.95}, {"year": 2000, "country": "Ecuador", "cluster": 3, "pop": 12505204, "life_expect": 74.173, "fertility": 2.8175}, {"year": 2000, "country": "Egypt", "cluster": 5, "pop": 70492342, "life_expect": 69.806, "fertility": 3.174}, {"year": 2000, "country": "El Salvador", "cluster": 3, "pop": 6122515, "life_expect": 70.734, "fertility": 2.883}, {"year": 2000, "country": "Finland", "cluster": 1, "pop": 5168595, "life_expect": 78.37, "fertility": 1.754}, {"year": 2000, "country": "France", "cluster": 1, "pop": 59381628, "life_expect": 79.59, "fertility": 1.8833000000000002}, {"year": 2000, "country": "Georgia", "cluster": 1, "pop": 4777209, "life_expect": 70.476, "fertility": 1.478}, {"year": 2000, "country": "Germany", "cluster": 1, "pop": 82187909, "life_expect": 78.67, "fertility": 1.346}, {"year": 2000, "country": "Greece", "cluster": 1, "pop": 10559110, "life_expect": 78.256, "fertility": 1.2770000000000001}, {"year": 2000, "country": "Grenada", "cluster": 3, "pop": 89312, "life_expect": 67.746, "fertility": 2.429}, {"year": 2000, "country": "Haiti", "cluster": 3, "pop": 7306302, "life_expect": 58.137, "fertility": 4.0}, {"year": 2000, "country": "Hong Kong", "cluster": 4, "pop": 6658720, "life_expect": 81.495, "fertility": 0.9400000000000001}, {"year": 2000, "country": "Iceland", "cluster": 1, "pop": 281043, "life_expect": 80.5, "fertility": 1.9929999999999999}, {"year": 2000, "country": "India", "cluster": 0, "pop": 1007702000, "life_expect": 62.879, "fertility": 3.1132}, {"year": 2000, "country": "Indonesia", "cluster": 4, "pop": 206265000, "life_expect": 68.588, "fertility": 2.3761}, {"year": 2000, "country": "Iran", "cluster": 5, "pop": 65660289, "life_expect": 69.451, "fertility": 2.124}, {"year": 2000, "country": "Iraq", "cluster": 5, "pop": 22675617, "life_expect": 57.046, "fertility": 4.858}, {"year": 2000, "country": "Ireland", "cluster": 1, "pop": 3791690, "life_expect": 77.783, "fertility": 1.9689999999999999}, {"year": 2000, "country": "Israel", "cluster": 5, "pop": 5842454, "life_expect": 79.696, "fertility": 2.906}, {"year": 2000, "country": "Italy", "cluster": 1, "pop": 57719337, "life_expect": 80.24, "fertility": 1.286}, {"year": 2000, "country": "Jamaica", "cluster": 3, "pop": 2615467, "life_expect": 72.047, "fertility": 2.628}, {"year": 2000, "country": "Japan", "cluster": 4, "pop": 126699784, "life_expect": 82.0, "fertility": 1.291}, {"year": 2000, "country": "Kenya", "cluster": 2, "pop": 29985839, "life_expect": 50.992, "fertility": 5.0}, {"year": 2000, "country": "South Korea", "cluster": 4, "pop": 21647682, "life_expect": 66.662, "fertility": 1.9173}, {"year": 2000, "country": "North Korea", "cluster": 4, "pop": 47351083, "life_expect": 77.045, "fertility": 1.242}, {"year": 2000, "country": "Lebanon", "cluster": 5, "pop": 3578036, "life_expect": 71.028, "fertility": 2.319}, {"year": 2000, "country": "Mexico", "cluster": 3, "pop": 99926620, "life_expect": 74.902, "fertility": 2.4005}, {"year": 2000, "country": "Netherlands", "cluster": 1, "pop": 15907853, "life_expect": 78.53, "fertility": 1.726}, {"year": 2000, "country": "New Zealand", "cluster": 4, "pop": 3819762, "life_expect": 79.11, "fertility": 1.964}, {"year": 2000, "country": "Nigeria", "cluster": 2, "pop": 114306700, "life_expect": 46.608, "fertility": 5.845}, {"year": 2000, "country": "Norway", "cluster": 1, "pop": 4492400, "life_expect": 79.05, "fertility": 1.8010000000000002}, {"year": 2000, "country": "Pakistan", "cluster": 0, "pop": 146342958, "life_expect": 63.61, "fertility": 3.9936}, {"year": 2000, "country": "Peru", "cluster": 3, "pop": 25979722, "life_expect": 69.906, "fertility": 2.7005}, {"year": 2000, "country": "Philippines", "cluster": 4, "pop": 79739825, "life_expect": 70.303, "fertility": 3.5436}, {"year": 2000, "country": "Poland", "cluster": 1, "pop": 38654164, "life_expect": 74.67, "fertility": 1.251}, {"year": 2000, "country": "Portugal", "cluster": 1, "pop": 10335597, "life_expect": 77.29, "fertility": 1.454}, {"year": 2000, "country": "Rwanda", "cluster": 2, "pop": 7507056, "life_expect": 43.413, "fertility": 6.01}, {"year": 2000, "country": "Saudi Arabia", "cluster": 5, "pop": 23153090, "life_expect": 71.626, "fertility": 3.81}, {"year": 2000, "country": "South Africa", "cluster": 2, "pop": 44066197, "life_expect": 53.365, "fertility": 2.802}, {"year": 2000, "country": "Spain", "cluster": 1, "pop": 40016081, "life_expect": 79.78, "fertility": 1.287}, {"year": 2000, "country": "Switzerland", "cluster": 1, "pop": 7266920, "life_expect": 80.62, "fertility": 1.415}, {"year": 2000, "country": "Turkey", "cluster": 1, "pop": 65666677, "life_expect": 70.845, "fertility": 2.23}, {"year": 2000, "country": "United Kingdom", "cluster": 1, "pop": 59522468, "life_expect": 78.471, "fertility": 1.695}, {"year": 2000, "country": "United States", "cluster": 3, "pop": 282338631, "life_expect": 77.31, "fertility": 2.038}, {"year": 2000, "country": "Venezuela", "cluster": 3, "pop": 23542649, "life_expect": 72.766, "fertility": 2.723}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
</section>
<section id="id14">
<h3><span class="section-number">2.4.3. </span>スクエアマーク<a class="headerlink" href="#id14" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">square</span></code>マークタイプは、塗りつぶされた四角形として描画される<code class="docutils literal notranslate"><span class="pre">point</span></code>マークの便利な省略形です。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">data2000</span><span class="p">)</span><span class="o">.</span><span class="n">mark_square</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;fertility:Q&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;cluster:N&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Shape</span><span class="p">(</span><span class="s1">&#39;cluster:N&#39;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-06db251b7617428ea23543014aa4db1e.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-06db251b7617428ea23543014aa4db1e.vega-embed details,
  #altair-viz-06db251b7617428ea23543014aa4db1e.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-06db251b7617428ea23543014aa4db1e"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-06db251b7617428ea23543014aa4db1e") {
      outputDiv = document.getElementById("altair-viz-06db251b7617428ea23543014aa4db1e");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.16.3?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.16.3"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-fdeb0b749a6385830bd1445d39ad6ea0"}, "mark": {"type": "square", "size": 100}, "encoding": {"shape": {"field": "cluster", "type": "nominal"}, "x": {"field": "fertility", "type": "quantitative"}, "y": {"field": "cluster", "type": "nominal"}}, "$schema": "https://vega.github.io/schema/vega-lite/v5.16.3.json", "datasets": {"data-fdeb0b749a6385830bd1445d39ad6ea0": [{"year": 2000, "country": "Afghanistan", "cluster": 0, "pop": 23898198, "life_expect": 42.129, "fertility": 7.4792}, {"year": 2000, "country": "Argentina", "cluster": 3, "pop": 37497728, "life_expect": 74.34, "fertility": 2.35}, {"year": 2000, "country": "Aruba", "cluster": 3, "pop": 69539, "life_expect": 73.451, "fertility": 2.124}, {"year": 2000, "country": "Australia", "cluster": 4, "pop": 19164620, "life_expect": 80.37, "fertility": 1.756}, {"year": 2000, "country": "Austria", "cluster": 1, "pop": 8113413, "life_expect": 78.98, "fertility": 1.3820000000000001}, {"year": 2000, "country": "Bahamas", "cluster": 3, "pop": 290075, "life_expect": 71.068, "fertility": 2.1111}, {"year": 2000, "country": "Bangladesh", "cluster": 0, "pop": 130406594, "life_expect": 62.013, "fertility": 3.224}, {"year": 2000, "country": "Barbados", "cluster": 3, "pop": 273483, "life_expect": 75.97, "fertility": 1.5}, {"year": 2000, "country": "Belgium", "cluster": 1, "pop": 10263618, "life_expect": 78.32, "fertility": 1.638}, {"year": 2000, "country": "Bolivia", "cluster": 3, "pop": 8152620, "life_expect": 63.883, "fertility": 3.9585}, {"year": 2000, "country": "Brazil", "cluster": 3, "pop": 175552771, "life_expect": 71.006, "fertility": 2.345}, {"year": 2000, "country": "Canada", "cluster": 3, "pop": 31278097, "life_expect": 79.77, "fertility": 1.522}, {"year": 2000, "country": "Chile", "cluster": 3, "pop": 15153450, "life_expect": 77.86, "fertility": 2.0}, {"year": 2000, "country": "China", "cluster": 4, "pop": 1262645000, "life_expect": 72.028, "fertility": 1.7000000000000002}, {"year": 2000, "country": "Colombia", "cluster": 3, "pop": 39685655, "life_expect": 71.682, "fertility": 2.4705}, {"year": 2000, "country": "Costa Rica", "cluster": 3, "pop": 3710558, "life_expect": 78.123, "fertility": 2.2815}, {"year": 2000, "country": "Croatia", "cluster": 1, "pop": 4410830, "life_expect": 74.876, "fertility": 1.348}, {"year": 2000, "country": "Cuba", "cluster": 3, "pop": 11134273, "life_expect": 77.158, "fertility": 1.63}, {"year": 2000, "country": "Dominican Republic", "cluster": 3, "pop": 8385828, "life_expect": 70.847, "fertility": 2.95}, {"year": 2000, "country": "Ecuador", "cluster": 3, "pop": 12505204, "life_expect": 74.173, "fertility": 2.8175}, {"year": 2000, "country": "Egypt", "cluster": 5, "pop": 70492342, "life_expect": 69.806, "fertility": 3.174}, {"year": 2000, "country": "El Salvador", "cluster": 3, "pop": 6122515, "life_expect": 70.734, "fertility": 2.883}, {"year": 2000, "country": "Finland", "cluster": 1, "pop": 5168595, "life_expect": 78.37, "fertility": 1.754}, {"year": 2000, "country": "France", "cluster": 1, "pop": 59381628, "life_expect": 79.59, "fertility": 1.8833000000000002}, {"year": 2000, "country": "Georgia", "cluster": 1, "pop": 4777209, "life_expect": 70.476, "fertility": 1.478}, {"year": 2000, "country": "Germany", "cluster": 1, "pop": 82187909, "life_expect": 78.67, "fertility": 1.346}, {"year": 2000, "country": "Greece", "cluster": 1, "pop": 10559110, "life_expect": 78.256, "fertility": 1.2770000000000001}, {"year": 2000, "country": "Grenada", "cluster": 3, "pop": 89312, "life_expect": 67.746, "fertility": 2.429}, {"year": 2000, "country": "Haiti", "cluster": 3, "pop": 7306302, "life_expect": 58.137, "fertility": 4.0}, {"year": 2000, "country": "Hong Kong", "cluster": 4, "pop": 6658720, "life_expect": 81.495, "fertility": 0.9400000000000001}, {"year": 2000, "country": "Iceland", "cluster": 1, "pop": 281043, "life_expect": 80.5, "fertility": 1.9929999999999999}, {"year": 2000, "country": "India", "cluster": 0, "pop": 1007702000, "life_expect": 62.879, "fertility": 3.1132}, {"year": 2000, "country": "Indonesia", "cluster": 4, "pop": 206265000, "life_expect": 68.588, "fertility": 2.3761}, {"year": 2000, "country": "Iran", "cluster": 5, "pop": 65660289, "life_expect": 69.451, "fertility": 2.124}, {"year": 2000, "country": "Iraq", "cluster": 5, "pop": 22675617, "life_expect": 57.046, "fertility": 4.858}, {"year": 2000, "country": "Ireland", "cluster": 1, "pop": 3791690, "life_expect": 77.783, "fertility": 1.9689999999999999}, {"year": 2000, "country": "Israel", "cluster": 5, "pop": 5842454, "life_expect": 79.696, "fertility": 2.906}, {"year": 2000, "country": "Italy", "cluster": 1, "pop": 57719337, "life_expect": 80.24, "fertility": 1.286}, {"year": 2000, "country": "Jamaica", "cluster": 3, "pop": 2615467, "life_expect": 72.047, "fertility": 2.628}, {"year": 2000, "country": "Japan", "cluster": 4, "pop": 126699784, "life_expect": 82.0, "fertility": 1.291}, {"year": 2000, "country": "Kenya", "cluster": 2, "pop": 29985839, "life_expect": 50.992, "fertility": 5.0}, {"year": 2000, "country": "South Korea", "cluster": 4, "pop": 21647682, "life_expect": 66.662, "fertility": 1.9173}, {"year": 2000, "country": "North Korea", "cluster": 4, "pop": 47351083, "life_expect": 77.045, "fertility": 1.242}, {"year": 2000, "country": "Lebanon", "cluster": 5, "pop": 3578036, "life_expect": 71.028, "fertility": 2.319}, {"year": 2000, "country": "Mexico", "cluster": 3, "pop": 99926620, "life_expect": 74.902, "fertility": 2.4005}, {"year": 2000, "country": "Netherlands", "cluster": 1, "pop": 15907853, "life_expect": 78.53, "fertility": 1.726}, {"year": 2000, "country": "New Zealand", "cluster": 4, "pop": 3819762, "life_expect": 79.11, "fertility": 1.964}, {"year": 2000, "country": "Nigeria", "cluster": 2, "pop": 114306700, "life_expect": 46.608, "fertility": 5.845}, {"year": 2000, "country": "Norway", "cluster": 1, "pop": 4492400, "life_expect": 79.05, "fertility": 1.8010000000000002}, {"year": 2000, "country": "Pakistan", "cluster": 0, "pop": 146342958, "life_expect": 63.61, "fertility": 3.9936}, {"year": 2000, "country": "Peru", "cluster": 3, "pop": 25979722, "life_expect": 69.906, "fertility": 2.7005}, {"year": 2000, "country": "Philippines", "cluster": 4, "pop": 79739825, "life_expect": 70.303, "fertility": 3.5436}, {"year": 2000, "country": "Poland", "cluster": 1, "pop": 38654164, "life_expect": 74.67, "fertility": 1.251}, {"year": 2000, "country": "Portugal", "cluster": 1, "pop": 10335597, "life_expect": 77.29, "fertility": 1.454}, {"year": 2000, "country": "Rwanda", "cluster": 2, "pop": 7507056, "life_expect": 43.413, "fertility": 6.01}, {"year": 2000, "country": "Saudi Arabia", "cluster": 5, "pop": 23153090, "life_expect": 71.626, "fertility": 3.81}, {"year": 2000, "country": "South Africa", "cluster": 2, "pop": 44066197, "life_expect": 53.365, "fertility": 2.802}, {"year": 2000, "country": "Spain", "cluster": 1, "pop": 40016081, "life_expect": 79.78, "fertility": 1.287}, {"year": 2000, "country": "Switzerland", "cluster": 1, "pop": 7266920, "life_expect": 80.62, "fertility": 1.415}, {"year": 2000, "country": "Turkey", "cluster": 1, "pop": 65666677, "life_expect": 70.845, "fertility": 2.23}, {"year": 2000, "country": "United Kingdom", "cluster": 1, "pop": 59522468, "life_expect": 78.471, "fertility": 1.695}, {"year": 2000, "country": "United States", "cluster": 3, "pop": 282338631, "life_expect": 77.31, "fertility": 2.038}, {"year": 2000, "country": "Venezuela", "cluster": 3, "pop": 23542649, "life_expect": 72.766, "fertility": 2.723}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
</section>
<section id="id15">
<h3><span class="section-number">2.4.4. </span>ティックマーク<a class="headerlink" href="#id15" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">tick</span></code>マークタイプは、短い線分または「目盛り」を使用してデータポイントを表現します。これらは、1次元に沿った値を最小限の重なりで比較するのに特に有用です。ティックマークで描画された<em>ドットプロット</em>は、<em>ストリッププロット</em>と呼ばれることもあります。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">data2000</span><span class="p">)</span><span class="o">.</span><span class="n">mark_tick</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;fertility:Q&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;cluster:N&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Shape</span><span class="p">(</span><span class="s1">&#39;cluster:N&#39;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-6465d5a32f324cea8783f996a42ab8c9.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-6465d5a32f324cea8783f996a42ab8c9.vega-embed details,
  #altair-viz-6465d5a32f324cea8783f996a42ab8c9.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-6465d5a32f324cea8783f996a42ab8c9"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-6465d5a32f324cea8783f996a42ab8c9") {
      outputDiv = document.getElementById("altair-viz-6465d5a32f324cea8783f996a42ab8c9");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.16.3?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.16.3"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-fdeb0b749a6385830bd1445d39ad6ea0"}, "mark": {"type": "tick"}, "encoding": {"shape": {"field": "cluster", "type": "nominal"}, "x": {"field": "fertility", "type": "quantitative"}, "y": {"field": "cluster", "type": "nominal"}}, "$schema": "https://vega.github.io/schema/vega-lite/v5.16.3.json", "datasets": {"data-fdeb0b749a6385830bd1445d39ad6ea0": [{"year": 2000, "country": "Afghanistan", "cluster": 0, "pop": 23898198, "life_expect": 42.129, "fertility": 7.4792}, {"year": 2000, "country": "Argentina", "cluster": 3, "pop": 37497728, "life_expect": 74.34, "fertility": 2.35}, {"year": 2000, "country": "Aruba", "cluster": 3, "pop": 69539, "life_expect": 73.451, "fertility": 2.124}, {"year": 2000, "country": "Australia", "cluster": 4, "pop": 19164620, "life_expect": 80.37, "fertility": 1.756}, {"year": 2000, "country": "Austria", "cluster": 1, "pop": 8113413, "life_expect": 78.98, "fertility": 1.3820000000000001}, {"year": 2000, "country": "Bahamas", "cluster": 3, "pop": 290075, "life_expect": 71.068, "fertility": 2.1111}, {"year": 2000, "country": "Bangladesh", "cluster": 0, "pop": 130406594, "life_expect": 62.013, "fertility": 3.224}, {"year": 2000, "country": "Barbados", "cluster": 3, "pop": 273483, "life_expect": 75.97, "fertility": 1.5}, {"year": 2000, "country": "Belgium", "cluster": 1, "pop": 10263618, "life_expect": 78.32, "fertility": 1.638}, {"year": 2000, "country": "Bolivia", "cluster": 3, "pop": 8152620, "life_expect": 63.883, "fertility": 3.9585}, {"year": 2000, "country": "Brazil", "cluster": 3, "pop": 175552771, "life_expect": 71.006, "fertility": 2.345}, {"year": 2000, "country": "Canada", "cluster": 3, "pop": 31278097, "life_expect": 79.77, "fertility": 1.522}, {"year": 2000, "country": "Chile", "cluster": 3, "pop": 15153450, "life_expect": 77.86, "fertility": 2.0}, {"year": 2000, "country": "China", "cluster": 4, "pop": 1262645000, "life_expect": 72.028, "fertility": 1.7000000000000002}, {"year": 2000, "country": "Colombia", "cluster": 3, "pop": 39685655, "life_expect": 71.682, "fertility": 2.4705}, {"year": 2000, "country": "Costa Rica", "cluster": 3, "pop": 3710558, "life_expect": 78.123, "fertility": 2.2815}, {"year": 2000, "country": "Croatia", "cluster": 1, "pop": 4410830, "life_expect": 74.876, "fertility": 1.348}, {"year": 2000, "country": "Cuba", "cluster": 3, "pop": 11134273, "life_expect": 77.158, "fertility": 1.63}, {"year": 2000, "country": "Dominican Republic", "cluster": 3, "pop": 8385828, "life_expect": 70.847, "fertility": 2.95}, {"year": 2000, "country": "Ecuador", "cluster": 3, "pop": 12505204, "life_expect": 74.173, "fertility": 2.8175}, {"year": 2000, "country": "Egypt", "cluster": 5, "pop": 70492342, "life_expect": 69.806, "fertility": 3.174}, {"year": 2000, "country": "El Salvador", "cluster": 3, "pop": 6122515, "life_expect": 70.734, "fertility": 2.883}, {"year": 2000, "country": "Finland", "cluster": 1, "pop": 5168595, "life_expect": 78.37, "fertility": 1.754}, {"year": 2000, "country": "France", "cluster": 1, "pop": 59381628, "life_expect": 79.59, "fertility": 1.8833000000000002}, {"year": 2000, "country": "Georgia", "cluster": 1, "pop": 4777209, "life_expect": 70.476, "fertility": 1.478}, {"year": 2000, "country": "Germany", "cluster": 1, "pop": 82187909, "life_expect": 78.67, "fertility": 1.346}, {"year": 2000, "country": "Greece", "cluster": 1, "pop": 10559110, "life_expect": 78.256, "fertility": 1.2770000000000001}, {"year": 2000, "country": "Grenada", "cluster": 3, "pop": 89312, "life_expect": 67.746, "fertility": 2.429}, {"year": 2000, "country": "Haiti", "cluster": 3, "pop": 7306302, "life_expect": 58.137, "fertility": 4.0}, {"year": 2000, "country": "Hong Kong", "cluster": 4, "pop": 6658720, "life_expect": 81.495, "fertility": 0.9400000000000001}, {"year": 2000, "country": "Iceland", "cluster": 1, "pop": 281043, "life_expect": 80.5, "fertility": 1.9929999999999999}, {"year": 2000, "country": "India", "cluster": 0, "pop": 1007702000, "life_expect": 62.879, "fertility": 3.1132}, {"year": 2000, "country": "Indonesia", "cluster": 4, "pop": 206265000, "life_expect": 68.588, "fertility": 2.3761}, {"year": 2000, "country": "Iran", "cluster": 5, "pop": 65660289, "life_expect": 69.451, "fertility": 2.124}, {"year": 2000, "country": "Iraq", "cluster": 5, "pop": 22675617, "life_expect": 57.046, "fertility": 4.858}, {"year": 2000, "country": "Ireland", "cluster": 1, "pop": 3791690, "life_expect": 77.783, "fertility": 1.9689999999999999}, {"year": 2000, "country": "Israel", "cluster": 5, "pop": 5842454, "life_expect": 79.696, "fertility": 2.906}, {"year": 2000, "country": "Italy", "cluster": 1, "pop": 57719337, "life_expect": 80.24, "fertility": 1.286}, {"year": 2000, "country": "Jamaica", "cluster": 3, "pop": 2615467, "life_expect": 72.047, "fertility": 2.628}, {"year": 2000, "country": "Japan", "cluster": 4, "pop": 126699784, "life_expect": 82.0, "fertility": 1.291}, {"year": 2000, "country": "Kenya", "cluster": 2, "pop": 29985839, "life_expect": 50.992, "fertility": 5.0}, {"year": 2000, "country": "South Korea", "cluster": 4, "pop": 21647682, "life_expect": 66.662, "fertility": 1.9173}, {"year": 2000, "country": "North Korea", "cluster": 4, "pop": 47351083, "life_expect": 77.045, "fertility": 1.242}, {"year": 2000, "country": "Lebanon", "cluster": 5, "pop": 3578036, "life_expect": 71.028, "fertility": 2.319}, {"year": 2000, "country": "Mexico", "cluster": 3, "pop": 99926620, "life_expect": 74.902, "fertility": 2.4005}, {"year": 2000, "country": "Netherlands", "cluster": 1, "pop": 15907853, "life_expect": 78.53, "fertility": 1.726}, {"year": 2000, "country": "New Zealand", "cluster": 4, "pop": 3819762, "life_expect": 79.11, "fertility": 1.964}, {"year": 2000, "country": "Nigeria", "cluster": 2, "pop": 114306700, "life_expect": 46.608, "fertility": 5.845}, {"year": 2000, "country": "Norway", "cluster": 1, "pop": 4492400, "life_expect": 79.05, "fertility": 1.8010000000000002}, {"year": 2000, "country": "Pakistan", "cluster": 0, "pop": 146342958, "life_expect": 63.61, "fertility": 3.9936}, {"year": 2000, "country": "Peru", "cluster": 3, "pop": 25979722, "life_expect": 69.906, "fertility": 2.7005}, {"year": 2000, "country": "Philippines", "cluster": 4, "pop": 79739825, "life_expect": 70.303, "fertility": 3.5436}, {"year": 2000, "country": "Poland", "cluster": 1, "pop": 38654164, "life_expect": 74.67, "fertility": 1.251}, {"year": 2000, "country": "Portugal", "cluster": 1, "pop": 10335597, "life_expect": 77.29, "fertility": 1.454}, {"year": 2000, "country": "Rwanda", "cluster": 2, "pop": 7507056, "life_expect": 43.413, "fertility": 6.01}, {"year": 2000, "country": "Saudi Arabia", "cluster": 5, "pop": 23153090, "life_expect": 71.626, "fertility": 3.81}, {"year": 2000, "country": "South Africa", "cluster": 2, "pop": 44066197, "life_expect": 53.365, "fertility": 2.802}, {"year": 2000, "country": "Spain", "cluster": 1, "pop": 40016081, "life_expect": 79.78, "fertility": 1.287}, {"year": 2000, "country": "Switzerland", "cluster": 1, "pop": 7266920, "life_expect": 80.62, "fertility": 1.415}, {"year": 2000, "country": "Turkey", "cluster": 1, "pop": 65666677, "life_expect": 70.845, "fertility": 2.23}, {"year": 2000, "country": "United Kingdom", "cluster": 1, "pop": 59522468, "life_expect": 78.471, "fertility": 1.695}, {"year": 2000, "country": "United States", "cluster": 3, "pop": 282338631, "life_expect": 77.31, "fertility": 2.038}, {"year": 2000, "country": "Venezuela", "cluster": 3, "pop": 23542649, "life_expect": 72.766, "fertility": 2.723}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
</section>
<section id="id16">
<h3><span class="section-number">2.4.5. </span>バーマーク<a class="headerlink" href="#id16" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">bar</span></code>マークタイプは、位置、幅、高さを持つ長方形を描画します。</p>
<p>以下のプロットは、各国の人口（<code class="docutils literal notranslate"><span class="pre">pop</span></code>）を示すシンプルな棒グラフです。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">data2000</span><span class="p">)</span><span class="o">.</span><span class="n">mark_bar</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;country:N&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;pop:Q&#39;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-aa880f0385cc4c3ba189c43403789fd5.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-aa880f0385cc4c3ba189c43403789fd5.vega-embed details,
  #altair-viz-aa880f0385cc4c3ba189c43403789fd5.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-aa880f0385cc4c3ba189c43403789fd5"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-aa880f0385cc4c3ba189c43403789fd5") {
      outputDiv = document.getElementById("altair-viz-aa880f0385cc4c3ba189c43403789fd5");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.16.3?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.16.3"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-fdeb0b749a6385830bd1445d39ad6ea0"}, "mark": {"type": "bar"}, "encoding": {"x": {"field": "country", "type": "nominal"}, "y": {"field": "pop", "type": "quantitative"}}, "$schema": "https://vega.github.io/schema/vega-lite/v5.16.3.json", "datasets": {"data-fdeb0b749a6385830bd1445d39ad6ea0": [{"year": 2000, "country": "Afghanistan", "cluster": 0, "pop": 23898198, "life_expect": 42.129, "fertility": 7.4792}, {"year": 2000, "country": "Argentina", "cluster": 3, "pop": 37497728, "life_expect": 74.34, "fertility": 2.35}, {"year": 2000, "country": "Aruba", "cluster": 3, "pop": 69539, "life_expect": 73.451, "fertility": 2.124}, {"year": 2000, "country": "Australia", "cluster": 4, "pop": 19164620, "life_expect": 80.37, "fertility": 1.756}, {"year": 2000, "country": "Austria", "cluster": 1, "pop": 8113413, "life_expect": 78.98, "fertility": 1.3820000000000001}, {"year": 2000, "country": "Bahamas", "cluster": 3, "pop": 290075, "life_expect": 71.068, "fertility": 2.1111}, {"year": 2000, "country": "Bangladesh", "cluster": 0, "pop": 130406594, "life_expect": 62.013, "fertility": 3.224}, {"year": 2000, "country": "Barbados", "cluster": 3, "pop": 273483, "life_expect": 75.97, "fertility": 1.5}, {"year": 2000, "country": "Belgium", "cluster": 1, "pop": 10263618, "life_expect": 78.32, "fertility": 1.638}, {"year": 2000, "country": "Bolivia", "cluster": 3, "pop": 8152620, "life_expect": 63.883, "fertility": 3.9585}, {"year": 2000, "country": "Brazil", "cluster": 3, "pop": 175552771, "life_expect": 71.006, "fertility": 2.345}, {"year": 2000, "country": "Canada", "cluster": 3, "pop": 31278097, "life_expect": 79.77, "fertility": 1.522}, {"year": 2000, "country": "Chile", "cluster": 3, "pop": 15153450, "life_expect": 77.86, "fertility": 2.0}, {"year": 2000, "country": "China", "cluster": 4, "pop": 1262645000, "life_expect": 72.028, "fertility": 1.7000000000000002}, {"year": 2000, "country": "Colombia", "cluster": 3, "pop": 39685655, "life_expect": 71.682, "fertility": 2.4705}, {"year": 2000, "country": "Costa Rica", "cluster": 3, "pop": 3710558, "life_expect": 78.123, "fertility": 2.2815}, {"year": 2000, "country": "Croatia", "cluster": 1, "pop": 4410830, "life_expect": 74.876, "fertility": 1.348}, {"year": 2000, "country": "Cuba", "cluster": 3, "pop": 11134273, "life_expect": 77.158, "fertility": 1.63}, {"year": 2000, "country": "Dominican Republic", "cluster": 3, "pop": 8385828, "life_expect": 70.847, "fertility": 2.95}, {"year": 2000, "country": "Ecuador", "cluster": 3, "pop": 12505204, "life_expect": 74.173, "fertility": 2.8175}, {"year": 2000, "country": "Egypt", "cluster": 5, "pop": 70492342, "life_expect": 69.806, "fertility": 3.174}, {"year": 2000, "country": "El Salvador", "cluster": 3, "pop": 6122515, "life_expect": 70.734, "fertility": 2.883}, {"year": 2000, "country": "Finland", "cluster": 1, "pop": 5168595, "life_expect": 78.37, "fertility": 1.754}, {"year": 2000, "country": "France", "cluster": 1, "pop": 59381628, "life_expect": 79.59, "fertility": 1.8833000000000002}, {"year": 2000, "country": "Georgia", "cluster": 1, "pop": 4777209, "life_expect": 70.476, "fertility": 1.478}, {"year": 2000, "country": "Germany", "cluster": 1, "pop": 82187909, "life_expect": 78.67, "fertility": 1.346}, {"year": 2000, "country": "Greece", "cluster": 1, "pop": 10559110, "life_expect": 78.256, "fertility": 1.2770000000000001}, {"year": 2000, "country": "Grenada", "cluster": 3, "pop": 89312, "life_expect": 67.746, "fertility": 2.429}, {"year": 2000, "country": "Haiti", "cluster": 3, "pop": 7306302, "life_expect": 58.137, "fertility": 4.0}, {"year": 2000, "country": "Hong Kong", "cluster": 4, "pop": 6658720, "life_expect": 81.495, "fertility": 0.9400000000000001}, {"year": 2000, "country": "Iceland", "cluster": 1, "pop": 281043, "life_expect": 80.5, "fertility": 1.9929999999999999}, {"year": 2000, "country": "India", "cluster": 0, "pop": 1007702000, "life_expect": 62.879, "fertility": 3.1132}, {"year": 2000, "country": "Indonesia", "cluster": 4, "pop": 206265000, "life_expect": 68.588, "fertility": 2.3761}, {"year": 2000, "country": "Iran", "cluster": 5, "pop": 65660289, "life_expect": 69.451, "fertility": 2.124}, {"year": 2000, "country": "Iraq", "cluster": 5, "pop": 22675617, "life_expect": 57.046, "fertility": 4.858}, {"year": 2000, "country": "Ireland", "cluster": 1, "pop": 3791690, "life_expect": 77.783, "fertility": 1.9689999999999999}, {"year": 2000, "country": "Israel", "cluster": 5, "pop": 5842454, "life_expect": 79.696, "fertility": 2.906}, {"year": 2000, "country": "Italy", "cluster": 1, "pop": 57719337, "life_expect": 80.24, "fertility": 1.286}, {"year": 2000, "country": "Jamaica", "cluster": 3, "pop": 2615467, "life_expect": 72.047, "fertility": 2.628}, {"year": 2000, "country": "Japan", "cluster": 4, "pop": 126699784, "life_expect": 82.0, "fertility": 1.291}, {"year": 2000, "country": "Kenya", "cluster": 2, "pop": 29985839, "life_expect": 50.992, "fertility": 5.0}, {"year": 2000, "country": "South Korea", "cluster": 4, "pop": 21647682, "life_expect": 66.662, "fertility": 1.9173}, {"year": 2000, "country": "North Korea", "cluster": 4, "pop": 47351083, "life_expect": 77.045, "fertility": 1.242}, {"year": 2000, "country": "Lebanon", "cluster": 5, "pop": 3578036, "life_expect": 71.028, "fertility": 2.319}, {"year": 2000, "country": "Mexico", "cluster": 3, "pop": 99926620, "life_expect": 74.902, "fertility": 2.4005}, {"year": 2000, "country": "Netherlands", "cluster": 1, "pop": 15907853, "life_expect": 78.53, "fertility": 1.726}, {"year": 2000, "country": "New Zealand", "cluster": 4, "pop": 3819762, "life_expect": 79.11, "fertility": 1.964}, {"year": 2000, "country": "Nigeria", "cluster": 2, "pop": 114306700, "life_expect": 46.608, "fertility": 5.845}, {"year": 2000, "country": "Norway", "cluster": 1, "pop": 4492400, "life_expect": 79.05, "fertility": 1.8010000000000002}, {"year": 2000, "country": "Pakistan", "cluster": 0, "pop": 146342958, "life_expect": 63.61, "fertility": 3.9936}, {"year": 2000, "country": "Peru", "cluster": 3, "pop": 25979722, "life_expect": 69.906, "fertility": 2.7005}, {"year": 2000, "country": "Philippines", "cluster": 4, "pop": 79739825, "life_expect": 70.303, "fertility": 3.5436}, {"year": 2000, "country": "Poland", "cluster": 1, "pop": 38654164, "life_expect": 74.67, "fertility": 1.251}, {"year": 2000, "country": "Portugal", "cluster": 1, "pop": 10335597, "life_expect": 77.29, "fertility": 1.454}, {"year": 2000, "country": "Rwanda", "cluster": 2, "pop": 7507056, "life_expect": 43.413, "fertility": 6.01}, {"year": 2000, "country": "Saudi Arabia", "cluster": 5, "pop": 23153090, "life_expect": 71.626, "fertility": 3.81}, {"year": 2000, "country": "South Africa", "cluster": 2, "pop": 44066197, "life_expect": 53.365, "fertility": 2.802}, {"year": 2000, "country": "Spain", "cluster": 1, "pop": 40016081, "life_expect": 79.78, "fertility": 1.287}, {"year": 2000, "country": "Switzerland", "cluster": 1, "pop": 7266920, "life_expect": 80.62, "fertility": 1.415}, {"year": 2000, "country": "Turkey", "cluster": 1, "pop": 65666677, "life_expect": 70.845, "fertility": 2.23}, {"year": 2000, "country": "United Kingdom", "cluster": 1, "pop": 59522468, "life_expect": 78.471, "fertility": 1.695}, {"year": 2000, "country": "United States", "cluster": 3, "pop": 282338631, "life_expect": 77.31, "fertility": 2.038}, {"year": 2000, "country": "Venezuela", "cluster": 3, "pop": 23542649, "life_expect": 72.766, "fertility": 2.723}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<p>棒の幅はデフォルトのサイズに設定されています。棒の幅を調整する方法については、このノートブックの後半で説明します。（軸、スケール、および凡例の設定に関しては、後のノートブックで詳しく見ていきます。）</p>
<p>棒を積み重ねることも可能です。<code class="docutils literal notranslate"><span class="pre">x</span></code>エンコーディングを<code class="docutils literal notranslate"><span class="pre">cluster</span></code>フィールドに変更し、<code class="docutils literal notranslate"><span class="pre">country</span></code>を<code class="docutils literal notranslate"><span class="pre">color</span></code>チャネルでエンコードしてみましょう。また、すべての国の色を表示すると凡例が非常に長くなるため、凡例を無効にし、国名を表示するためにツールチップを使用します。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">data2000</span><span class="p">)</span><span class="o">.</span><span class="n">mark_bar</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;cluster:N&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;pop:Q&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s1">&#39;country:N&#39;</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">None</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Tooltip</span><span class="p">(</span><span class="s1">&#39;country:N&#39;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-c9a3f2a646f94a10b88b559b8da4668e.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-c9a3f2a646f94a10b88b559b8da4668e.vega-embed details,
  #altair-viz-c9a3f2a646f94a10b88b559b8da4668e.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-c9a3f2a646f94a10b88b559b8da4668e"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-c9a3f2a646f94a10b88b559b8da4668e") {
      outputDiv = document.getElementById("altair-viz-c9a3f2a646f94a10b88b559b8da4668e");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.16.3?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.16.3"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-fdeb0b749a6385830bd1445d39ad6ea0"}, "mark": {"type": "bar"}, "encoding": {"color": {"field": "country", "legend": null, "type": "nominal"}, "tooltip": {"field": "country", "type": "nominal"}, "x": {"field": "cluster", "type": "nominal"}, "y": {"field": "pop", "type": "quantitative"}}, "$schema": "https://vega.github.io/schema/vega-lite/v5.16.3.json", "datasets": {"data-fdeb0b749a6385830bd1445d39ad6ea0": [{"year": 2000, "country": "Afghanistan", "cluster": 0, "pop": 23898198, "life_expect": 42.129, "fertility": 7.4792}, {"year": 2000, "country": "Argentina", "cluster": 3, "pop": 37497728, "life_expect": 74.34, "fertility": 2.35}, {"year": 2000, "country": "Aruba", "cluster": 3, "pop": 69539, "life_expect": 73.451, "fertility": 2.124}, {"year": 2000, "country": "Australia", "cluster": 4, "pop": 19164620, "life_expect": 80.37, "fertility": 1.756}, {"year": 2000, "country": "Austria", "cluster": 1, "pop": 8113413, "life_expect": 78.98, "fertility": 1.3820000000000001}, {"year": 2000, "country": "Bahamas", "cluster": 3, "pop": 290075, "life_expect": 71.068, "fertility": 2.1111}, {"year": 2000, "country": "Bangladesh", "cluster": 0, "pop": 130406594, "life_expect": 62.013, "fertility": 3.224}, {"year": 2000, "country": "Barbados", "cluster": 3, "pop": 273483, "life_expect": 75.97, "fertility": 1.5}, {"year": 2000, "country": "Belgium", "cluster": 1, "pop": 10263618, "life_expect": 78.32, "fertility": 1.638}, {"year": 2000, "country": "Bolivia", "cluster": 3, "pop": 8152620, "life_expect": 63.883, "fertility": 3.9585}, {"year": 2000, "country": "Brazil", "cluster": 3, "pop": 175552771, "life_expect": 71.006, "fertility": 2.345}, {"year": 2000, "country": "Canada", "cluster": 3, "pop": 31278097, "life_expect": 79.77, "fertility": 1.522}, {"year": 2000, "country": "Chile", "cluster": 3, "pop": 15153450, "life_expect": 77.86, "fertility": 2.0}, {"year": 2000, "country": "China", "cluster": 4, "pop": 1262645000, "life_expect": 72.028, "fertility": 1.7000000000000002}, {"year": 2000, "country": "Colombia", "cluster": 3, "pop": 39685655, "life_expect": 71.682, "fertility": 2.4705}, {"year": 2000, "country": "Costa Rica", "cluster": 3, "pop": 3710558, "life_expect": 78.123, "fertility": 2.2815}, {"year": 2000, "country": "Croatia", "cluster": 1, "pop": 4410830, "life_expect": 74.876, "fertility": 1.348}, {"year": 2000, "country": "Cuba", "cluster": 3, "pop": 11134273, "life_expect": 77.158, "fertility": 1.63}, {"year": 2000, "country": "Dominican Republic", "cluster": 3, "pop": 8385828, "life_expect": 70.847, "fertility": 2.95}, {"year": 2000, "country": "Ecuador", "cluster": 3, "pop": 12505204, "life_expect": 74.173, "fertility": 2.8175}, {"year": 2000, "country": "Egypt", "cluster": 5, "pop": 70492342, "life_expect": 69.806, "fertility": 3.174}, {"year": 2000, "country": "El Salvador", "cluster": 3, "pop": 6122515, "life_expect": 70.734, "fertility": 2.883}, {"year": 2000, "country": "Finland", "cluster": 1, "pop": 5168595, "life_expect": 78.37, "fertility": 1.754}, {"year": 2000, "country": "France", "cluster": 1, "pop": 59381628, "life_expect": 79.59, "fertility": 1.8833000000000002}, {"year": 2000, "country": "Georgia", "cluster": 1, "pop": 4777209, "life_expect": 70.476, "fertility": 1.478}, {"year": 2000, "country": "Germany", "cluster": 1, "pop": 82187909, "life_expect": 78.67, "fertility": 1.346}, {"year": 2000, "country": "Greece", "cluster": 1, "pop": 10559110, "life_expect": 78.256, "fertility": 1.2770000000000001}, {"year": 2000, "country": "Grenada", "cluster": 3, "pop": 89312, "life_expect": 67.746, "fertility": 2.429}, {"year": 2000, "country": "Haiti", "cluster": 3, "pop": 7306302, "life_expect": 58.137, "fertility": 4.0}, {"year": 2000, "country": "Hong Kong", "cluster": 4, "pop": 6658720, "life_expect": 81.495, "fertility": 0.9400000000000001}, {"year": 2000, "country": "Iceland", "cluster": 1, "pop": 281043, "life_expect": 80.5, "fertility": 1.9929999999999999}, {"year": 2000, "country": "India", "cluster": 0, "pop": 1007702000, "life_expect": 62.879, "fertility": 3.1132}, {"year": 2000, "country": "Indonesia", "cluster": 4, "pop": 206265000, "life_expect": 68.588, "fertility": 2.3761}, {"year": 2000, "country": "Iran", "cluster": 5, "pop": 65660289, "life_expect": 69.451, "fertility": 2.124}, {"year": 2000, "country": "Iraq", "cluster": 5, "pop": 22675617, "life_expect": 57.046, "fertility": 4.858}, {"year": 2000, "country": "Ireland", "cluster": 1, "pop": 3791690, "life_expect": 77.783, "fertility": 1.9689999999999999}, {"year": 2000, "country": "Israel", "cluster": 5, "pop": 5842454, "life_expect": 79.696, "fertility": 2.906}, {"year": 2000, "country": "Italy", "cluster": 1, "pop": 57719337, "life_expect": 80.24, "fertility": 1.286}, {"year": 2000, "country": "Jamaica", "cluster": 3, "pop": 2615467, "life_expect": 72.047, "fertility": 2.628}, {"year": 2000, "country": "Japan", "cluster": 4, "pop": 126699784, "life_expect": 82.0, "fertility": 1.291}, {"year": 2000, "country": "Kenya", "cluster": 2, "pop": 29985839, "life_expect": 50.992, "fertility": 5.0}, {"year": 2000, "country": "South Korea", "cluster": 4, "pop": 21647682, "life_expect": 66.662, "fertility": 1.9173}, {"year": 2000, "country": "North Korea", "cluster": 4, "pop": 47351083, "life_expect": 77.045, "fertility": 1.242}, {"year": 2000, "country": "Lebanon", "cluster": 5, "pop": 3578036, "life_expect": 71.028, "fertility": 2.319}, {"year": 2000, "country": "Mexico", "cluster": 3, "pop": 99926620, "life_expect": 74.902, "fertility": 2.4005}, {"year": 2000, "country": "Netherlands", "cluster": 1, "pop": 15907853, "life_expect": 78.53, "fertility": 1.726}, {"year": 2000, "country": "New Zealand", "cluster": 4, "pop": 3819762, "life_expect": 79.11, "fertility": 1.964}, {"year": 2000, "country": "Nigeria", "cluster": 2, "pop": 114306700, "life_expect": 46.608, "fertility": 5.845}, {"year": 2000, "country": "Norway", "cluster": 1, "pop": 4492400, "life_expect": 79.05, "fertility": 1.8010000000000002}, {"year": 2000, "country": "Pakistan", "cluster": 0, "pop": 146342958, "life_expect": 63.61, "fertility": 3.9936}, {"year": 2000, "country": "Peru", "cluster": 3, "pop": 25979722, "life_expect": 69.906, "fertility": 2.7005}, {"year": 2000, "country": "Philippines", "cluster": 4, "pop": 79739825, "life_expect": 70.303, "fertility": 3.5436}, {"year": 2000, "country": "Poland", "cluster": 1, "pop": 38654164, "life_expect": 74.67, "fertility": 1.251}, {"year": 2000, "country": "Portugal", "cluster": 1, "pop": 10335597, "life_expect": 77.29, "fertility": 1.454}, {"year": 2000, "country": "Rwanda", "cluster": 2, "pop": 7507056, "life_expect": 43.413, "fertility": 6.01}, {"year": 2000, "country": "Saudi Arabia", "cluster": 5, "pop": 23153090, "life_expect": 71.626, "fertility": 3.81}, {"year": 2000, "country": "South Africa", "cluster": 2, "pop": 44066197, "life_expect": 53.365, "fertility": 2.802}, {"year": 2000, "country": "Spain", "cluster": 1, "pop": 40016081, "life_expect": 79.78, "fertility": 1.287}, {"year": 2000, "country": "Switzerland", "cluster": 1, "pop": 7266920, "life_expect": 80.62, "fertility": 1.415}, {"year": 2000, "country": "Turkey", "cluster": 1, "pop": 65666677, "life_expect": 70.845, "fertility": 2.23}, {"year": 2000, "country": "United Kingdom", "cluster": 1, "pop": 59522468, "life_expect": 78.471, "fertility": 1.695}, {"year": 2000, "country": "United States", "cluster": 3, "pop": 282338631, "life_expect": 77.31, "fertility": 2.038}, {"year": 2000, "country": "Venezuela", "cluster": 3, "pop": 23542649, "life_expect": 72.766, "fertility": 2.723}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<p>上記のチャートでは、<code class="docutils literal notranslate"><span class="pre">color</span></code>エンコーディングチャネルの使用により、Altair / Vega-Liteが自動的にバーを積み重ねています。これがなければ、バーが互いに重なって描画されてしまいます！<code class="docutils literal notranslate"><span class="pre">y</span></code>エンコーディングチャネルにパラメータ<code class="docutils literal notranslate"><span class="pre">stack=None</span></code>を追加して、積み重ねを適用しない場合に何が起こるか試してみてください…</p>
<p>上記の例では、棒グラフはゼロ基準から作成されており、<code class="docutils literal notranslate"><span class="pre">y</span></code>チャネルは非ゼロ値（または棒の高さ）のみをエンコードしています。しかし、バーのマークでは、範囲を表現するために開始点と終了点を指定することも可能です。</p>
<p>以下のチャートでは、<code class="docutils literal notranslate"><span class="pre">x</span></code>（開始点）と<code class="docutils literal notranslate"><span class="pre">x2</span></code>（終了点）チャネルを使用して、各地域クラスター内の平均寿命の範囲を示しています。この例では、範囲の終端を決定するために<code class="docutils literal notranslate"><span class="pre">min</span></code>と<code class="docutils literal notranslate"><span class="pre">max</span></code>の集計関数を使用しています。集計については、次のノートブックで詳しく説明します！</p>
<p>また、<code class="docutils literal notranslate"><span class="pre">x</span></code>と<code class="docutils literal notranslate"><span class="pre">width</span></code>を使用して、開始点とオフセットを指定することで、<code class="docutils literal notranslate"><span class="pre">x2</span> <span class="pre">=</span> <span class="pre">x</span> <span class="pre">+</span> <span class="pre">width</span></code>のように終了点を設定することもできます。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">data2000</span><span class="p">)</span><span class="o">.</span><span class="n">mark_bar</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;min(life_expect):Q&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">X2</span><span class="p">(</span><span class="s1">&#39;max(life_expect):Q&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;cluster:N&#39;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-e19d9a235d7e4eabae025f894c839903.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-e19d9a235d7e4eabae025f894c839903.vega-embed details,
  #altair-viz-e19d9a235d7e4eabae025f894c839903.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-e19d9a235d7e4eabae025f894c839903"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-e19d9a235d7e4eabae025f894c839903") {
      outputDiv = document.getElementById("altair-viz-e19d9a235d7e4eabae025f894c839903");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.16.3?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.16.3"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-fdeb0b749a6385830bd1445d39ad6ea0"}, "mark": {"type": "bar"}, "encoding": {"x": {"aggregate": "min", "field": "life_expect", "type": "quantitative"}, "x2": {"aggregate": "max", "field": "life_expect"}, "y": {"field": "cluster", "type": "nominal"}}, "$schema": "https://vega.github.io/schema/vega-lite/v5.16.3.json", "datasets": {"data-fdeb0b749a6385830bd1445d39ad6ea0": [{"year": 2000, "country": "Afghanistan", "cluster": 0, "pop": 23898198, "life_expect": 42.129, "fertility": 7.4792}, {"year": 2000, "country": "Argentina", "cluster": 3, "pop": 37497728, "life_expect": 74.34, "fertility": 2.35}, {"year": 2000, "country": "Aruba", "cluster": 3, "pop": 69539, "life_expect": 73.451, "fertility": 2.124}, {"year": 2000, "country": "Australia", "cluster": 4, "pop": 19164620, "life_expect": 80.37, "fertility": 1.756}, {"year": 2000, "country": "Austria", "cluster": 1, "pop": 8113413, "life_expect": 78.98, "fertility": 1.3820000000000001}, {"year": 2000, "country": "Bahamas", "cluster": 3, "pop": 290075, "life_expect": 71.068, "fertility": 2.1111}, {"year": 2000, "country": "Bangladesh", "cluster": 0, "pop": 130406594, "life_expect": 62.013, "fertility": 3.224}, {"year": 2000, "country": "Barbados", "cluster": 3, "pop": 273483, "life_expect": 75.97, "fertility": 1.5}, {"year": 2000, "country": "Belgium", "cluster": 1, "pop": 10263618, "life_expect": 78.32, "fertility": 1.638}, {"year": 2000, "country": "Bolivia", "cluster": 3, "pop": 8152620, "life_expect": 63.883, "fertility": 3.9585}, {"year": 2000, "country": "Brazil", "cluster": 3, "pop": 175552771, "life_expect": 71.006, "fertility": 2.345}, {"year": 2000, "country": "Canada", "cluster": 3, "pop": 31278097, "life_expect": 79.77, "fertility": 1.522}, {"year": 2000, "country": "Chile", "cluster": 3, "pop": 15153450, "life_expect": 77.86, "fertility": 2.0}, {"year": 2000, "country": "China", "cluster": 4, "pop": 1262645000, "life_expect": 72.028, "fertility": 1.7000000000000002}, {"year": 2000, "country": "Colombia", "cluster": 3, "pop": 39685655, "life_expect": 71.682, "fertility": 2.4705}, {"year": 2000, "country": "Costa Rica", "cluster": 3, "pop": 3710558, "life_expect": 78.123, "fertility": 2.2815}, {"year": 2000, "country": "Croatia", "cluster": 1, "pop": 4410830, "life_expect": 74.876, "fertility": 1.348}, {"year": 2000, "country": "Cuba", "cluster": 3, "pop": 11134273, "life_expect": 77.158, "fertility": 1.63}, {"year": 2000, "country": "Dominican Republic", "cluster": 3, "pop": 8385828, "life_expect": 70.847, "fertility": 2.95}, {"year": 2000, "country": "Ecuador", "cluster": 3, "pop": 12505204, "life_expect": 74.173, "fertility": 2.8175}, {"year": 2000, "country": "Egypt", "cluster": 5, "pop": 70492342, "life_expect": 69.806, "fertility": 3.174}, {"year": 2000, "country": "El Salvador", "cluster": 3, "pop": 6122515, "life_expect": 70.734, "fertility": 2.883}, {"year": 2000, "country": "Finland", "cluster": 1, "pop": 5168595, "life_expect": 78.37, "fertility": 1.754}, {"year": 2000, "country": "France", "cluster": 1, "pop": 59381628, "life_expect": 79.59, "fertility": 1.8833000000000002}, {"year": 2000, "country": "Georgia", "cluster": 1, "pop": 4777209, "life_expect": 70.476, "fertility": 1.478}, {"year": 2000, "country": "Germany", "cluster": 1, "pop": 82187909, "life_expect": 78.67, "fertility": 1.346}, {"year": 2000, "country": "Greece", "cluster": 1, "pop": 10559110, "life_expect": 78.256, "fertility": 1.2770000000000001}, {"year": 2000, "country": "Grenada", "cluster": 3, "pop": 89312, "life_expect": 67.746, "fertility": 2.429}, {"year": 2000, "country": "Haiti", "cluster": 3, "pop": 7306302, "life_expect": 58.137, "fertility": 4.0}, {"year": 2000, "country": "Hong Kong", "cluster": 4, "pop": 6658720, "life_expect": 81.495, "fertility": 0.9400000000000001}, {"year": 2000, "country": "Iceland", "cluster": 1, "pop": 281043, "life_expect": 80.5, "fertility": 1.9929999999999999}, {"year": 2000, "country": "India", "cluster": 0, "pop": 1007702000, "life_expect": 62.879, "fertility": 3.1132}, {"year": 2000, "country": "Indonesia", "cluster": 4, "pop": 206265000, "life_expect": 68.588, "fertility": 2.3761}, {"year": 2000, "country": "Iran", "cluster": 5, "pop": 65660289, "life_expect": 69.451, "fertility": 2.124}, {"year": 2000, "country": "Iraq", "cluster": 5, "pop": 22675617, "life_expect": 57.046, "fertility": 4.858}, {"year": 2000, "country": "Ireland", "cluster": 1, "pop": 3791690, "life_expect": 77.783, "fertility": 1.9689999999999999}, {"year": 2000, "country": "Israel", "cluster": 5, "pop": 5842454, "life_expect": 79.696, "fertility": 2.906}, {"year": 2000, "country": "Italy", "cluster": 1, "pop": 57719337, "life_expect": 80.24, "fertility": 1.286}, {"year": 2000, "country": "Jamaica", "cluster": 3, "pop": 2615467, "life_expect": 72.047, "fertility": 2.628}, {"year": 2000, "country": "Japan", "cluster": 4, "pop": 126699784, "life_expect": 82.0, "fertility": 1.291}, {"year": 2000, "country": "Kenya", "cluster": 2, "pop": 29985839, "life_expect": 50.992, "fertility": 5.0}, {"year": 2000, "country": "South Korea", "cluster": 4, "pop": 21647682, "life_expect": 66.662, "fertility": 1.9173}, {"year": 2000, "country": "North Korea", "cluster": 4, "pop": 47351083, "life_expect": 77.045, "fertility": 1.242}, {"year": 2000, "country": "Lebanon", "cluster": 5, "pop": 3578036, "life_expect": 71.028, "fertility": 2.319}, {"year": 2000, "country": "Mexico", "cluster": 3, "pop": 99926620, "life_expect": 74.902, "fertility": 2.4005}, {"year": 2000, "country": "Netherlands", "cluster": 1, "pop": 15907853, "life_expect": 78.53, "fertility": 1.726}, {"year": 2000, "country": "New Zealand", "cluster": 4, "pop": 3819762, "life_expect": 79.11, "fertility": 1.964}, {"year": 2000, "country": "Nigeria", "cluster": 2, "pop": 114306700, "life_expect": 46.608, "fertility": 5.845}, {"year": 2000, "country": "Norway", "cluster": 1, "pop": 4492400, "life_expect": 79.05, "fertility": 1.8010000000000002}, {"year": 2000, "country": "Pakistan", "cluster": 0, "pop": 146342958, "life_expect": 63.61, "fertility": 3.9936}, {"year": 2000, "country": "Peru", "cluster": 3, "pop": 25979722, "life_expect": 69.906, "fertility": 2.7005}, {"year": 2000, "country": "Philippines", "cluster": 4, "pop": 79739825, "life_expect": 70.303, "fertility": 3.5436}, {"year": 2000, "country": "Poland", "cluster": 1, "pop": 38654164, "life_expect": 74.67, "fertility": 1.251}, {"year": 2000, "country": "Portugal", "cluster": 1, "pop": 10335597, "life_expect": 77.29, "fertility": 1.454}, {"year": 2000, "country": "Rwanda", "cluster": 2, "pop": 7507056, "life_expect": 43.413, "fertility": 6.01}, {"year": 2000, "country": "Saudi Arabia", "cluster": 5, "pop": 23153090, "life_expect": 71.626, "fertility": 3.81}, {"year": 2000, "country": "South Africa", "cluster": 2, "pop": 44066197, "life_expect": 53.365, "fertility": 2.802}, {"year": 2000, "country": "Spain", "cluster": 1, "pop": 40016081, "life_expect": 79.78, "fertility": 1.287}, {"year": 2000, "country": "Switzerland", "cluster": 1, "pop": 7266920, "life_expect": 80.62, "fertility": 1.415}, {"year": 2000, "country": "Turkey", "cluster": 1, "pop": 65666677, "life_expect": 70.845, "fertility": 2.23}, {"year": 2000, "country": "United Kingdom", "cluster": 1, "pop": 59522468, "life_expect": 78.471, "fertility": 1.695}, {"year": 2000, "country": "United States", "cluster": 3, "pop": 282338631, "life_expect": 77.31, "fertility": 2.038}, {"year": 2000, "country": "Venezuela", "cluster": 3, "pop": 23542649, "life_expect": 72.766, "fertility": 2.723}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
</section>
<section id="id17">
<h3><span class="section-number">2.4.6. </span>ラインマーク<a class="headerlink" href="#id17" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">line</span></code>マークタイプは、プロットされたポイントを線分で接続します。例えば、線の傾きが変化率に関する情報を伝えるために使用されます。</p>
<p>ここでは、フィルタリングされていない世界開発データフレーム全体を使用して、年ごとの各国の出生率を示すラインチャートを作成します。凡例は非表示にし、代わりにツールチップを使用します。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">mark_line</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;year:O&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;fertility:Q&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s1">&#39;country:N&#39;</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">None</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Tooltip</span><span class="p">(</span><span class="s1">&#39;country:N&#39;</span><span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">400</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-e56e1352fe084d9c9b660cedd3e01244.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-e56e1352fe084d9c9b660cedd3e01244.vega-embed details,
  #altair-viz-e56e1352fe084d9c9b660cedd3e01244.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-e56e1352fe084d9c9b660cedd3e01244"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-e56e1352fe084d9c9b660cedd3e01244") {
      outputDiv = document.getElementById("altair-viz-e56e1352fe084d9c9b660cedd3e01244");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.16.3?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.16.3"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-89be1acdd14c7effd56f4dd0fabf92c3"}, "mark": {"type": "line"}, "encoding": {"color": {"field": "country", "legend": null, "type": "nominal"}, "tooltip": {"field": "country", "type": "nominal"}, "x": {"field": "year", "type": "ordinal"}, "y": {"field": "fertility", "type": "quantitative"}}, "width": 400, "$schema": "https://vega.github.io/schema/vega-lite/v5.16.3.json", "datasets": {"data-89be1acdd14c7effd56f4dd0fabf92c3": [{"year": 1955, "country": "Afghanistan", "cluster": 0, "pop": 8891209, "life_expect": 30.332, "fertility": 7.7}, {"year": 1960, "country": "Afghanistan", "cluster": 0, "pop": 9829450, "life_expect": 31.997, "fertility": 7.7}, {"year": 1965, "country": "Afghanistan", "cluster": 0, "pop": 10997885, "life_expect": 34.02, "fertility": 7.7}, {"year": 1970, "country": "Afghanistan", "cluster": 0, "pop": 12430623, "life_expect": 36.088, "fertility": 7.7}, {"year": 1975, "country": "Afghanistan", "cluster": 0, "pop": 14132019, "life_expect": 38.438, "fertility": 7.7}, {"year": 1980, "country": "Afghanistan", "cluster": 0, "pop": 15112149, "life_expect": 39.854, "fertility": 7.8}, {"year": 1985, "country": "Afghanistan", "cluster": 0, "pop": 13796928, "life_expect": 40.822, "fertility": 7.9}, {"year": 1990, "country": "Afghanistan", "cluster": 0, "pop": 14669339, "life_expect": 41.674, "fertility": 8.0}, {"year": 1995, "country": "Afghanistan", "cluster": 0, "pop": 20881480, "life_expect": 41.763, "fertility": 8.0}, {"year": 2000, "country": "Afghanistan", "cluster": 0, "pop": 23898198, "life_expect": 42.129, "fertility": 7.4792}, {"year": 2005, "country": "Afghanistan", "cluster": 0, "pop": 29928987, "life_expect": 43.828, "fertility": 7.0685}, {"year": 1955, "country": "Argentina", "cluster": 3, "pop": 18927821, "life_expect": 64.399, "fertility": 3.1265}, {"year": 1960, "country": "Argentina", "cluster": 3, "pop": 20616009, "life_expect": 65.142, "fertility": 3.0895}, {"year": 1965, "country": "Argentina", "cluster": 3, "pop": 22283100, "life_expect": 65.634, "fertility": 3.049}, {"year": 1970, "country": "Argentina", "cluster": 3, "pop": 23962313, "life_expect": 67.065, "fertility": 3.1455}, {"year": 1975, "country": "Argentina", "cluster": 3, "pop": 26081880, "life_expect": 68.481, "fertility": 3.44}, {"year": 1980, "country": "Argentina", "cluster": 3, "pop": 28369799, "life_expect": 69.942, "fertility": 3.15}, {"year": 1985, "country": "Argentina", "cluster": 3, "pop": 30675059, "life_expect": 70.774, "fertility": 3.053}, {"year": 1990, "country": "Argentina", "cluster": 3, "pop": 33022202, "life_expect": 71.868, "fertility": 2.9}, {"year": 1995, "country": "Argentina", "cluster": 3, "pop": 35311049, "life_expect": 73.275, "fertility": 2.63}, {"year": 2000, "country": "Argentina", "cluster": 3, "pop": 37497728, "life_expect": 74.34, "fertility": 2.35}, {"year": 2005, "country": "Argentina", "cluster": 3, "pop": 39537943, "life_expect": 75.32, "fertility": 2.254}, {"year": 1955, "country": "Aruba", "cluster": 3, "pop": 53865, "life_expect": 64.381, "fertility": 5.15}, {"year": 1960, "country": "Aruba", "cluster": 3, "pop": 57203, "life_expect": 66.606, "fertility": 4.399}, {"year": 1965, "country": "Aruba", "cluster": 3, "pop": 59020, "life_expect": 68.336, "fertility": 3.301}, {"year": 1970, "country": "Aruba", "cluster": 3, "pop": 59039, "life_expect": 70.941, "fertility": 2.651}, {"year": 1975, "country": "Aruba", "cluster": 3, "pop": 59390, "life_expect": 71.83, "fertility": 2.45}, {"year": 1980, "country": "Aruba", "cluster": 3, "pop": 60266, "life_expect": 74.116, "fertility": 2.358}, {"year": 1985, "country": "Aruba", "cluster": 3, "pop": 64129, "life_expect": 74.494, "fertility": 2.3}, {"year": 1990, "country": "Aruba", "cluster": 3, "pop": 66653, "life_expect": 74.108, "fertility": 2.2800000000000002}, {"year": 1995, "country": "Aruba", "cluster": 3, "pop": 67836, "life_expect": 73.011, "fertility": 2.208}, {"year": 2000, "country": "Aruba", "cluster": 3, "pop": 69539, "life_expect": 73.451, "fertility": 2.124}, {"year": 2005, "country": "Aruba", "cluster": 3, "pop": 71566, "life_expect": 74.239, "fertility": 2.04}, {"year": 1955, "country": "Australia", "cluster": 4, "pop": 9277087, "life_expect": 70.33, "fertility": 3.406}, {"year": 1960, "country": "Australia", "cluster": 4, "pop": 10361273, "life_expect": 70.93, "fertility": 3.274}, {"year": 1965, "country": "Australia", "cluster": 4, "pop": 11439384, "life_expect": 71.1, "fertility": 2.871}, {"year": 1970, "country": "Australia", "cluster": 4, "pop": 12660160, "life_expect": 71.93, "fertility": 2.535}, {"year": 1975, "country": "Australia", "cluster": 4, "pop": 13771400, "life_expect": 73.49, "fertility": 1.9889999999999999}, {"year": 1980, "country": "Australia", "cluster": 4, "pop": 14615900, "life_expect": 74.74, "fertility": 1.907}, {"year": 1985, "country": "Australia", "cluster": 4, "pop": 15788300, "life_expect": 76.32, "fertility": 1.859}, {"year": 1990, "country": "Australia", "cluster": 4, "pop": 17022133, "life_expect": 77.56, "fertility": 1.8599999999999999}, {"year": 1995, "country": "Australia", "cluster": 4, "pop": 18116171, "life_expect": 78.83, "fertility": 1.776}, {"year": 2000, "country": "Australia", "cluster": 4, "pop": 19164620, "life_expect": 80.37, "fertility": 1.756}, {"year": 2005, "country": "Australia", "cluster": 4, "pop": 20090437, "life_expect": 81.235, "fertility": 1.788}, {"year": 1955, "country": "Austria", "cluster": 1, "pop": 6946885, "life_expect": 67.48, "fertility": 2.52}, {"year": 1960, "country": "Austria", "cluster": 1, "pop": 7047437, "life_expect": 69.54, "fertility": 2.7800000000000002}, {"year": 1965, "country": "Austria", "cluster": 1, "pop": 7270889, "life_expect": 70.14, "fertility": 2.5300000000000002}, {"year": 1970, "country": "Austria", "cluster": 1, "pop": 7467086, "life_expect": 70.63, "fertility": 2.02}, {"year": 1975, "country": "Austria", "cluster": 1, "pop": 7578903, "life_expect": 72.17, "fertility": 1.6400000000000001}, {"year": 1980, "country": "Austria", "cluster": 1, "pop": 7549433, "life_expect": 73.18, "fertility": 1.62}, {"year": 1985, "country": "Austria", "cluster": 1, "pop": 7559776, "life_expect": 74.94, "fertility": 1.45}, {"year": 1990, "country": "Austria", "cluster": 1, "pop": 7722953, "life_expect": 76.04, "fertility": 1.47}, {"year": 1995, "country": "Austria", "cluster": 1, "pop": 8047433, "life_expect": 77.51, "fertility": 1.388}, {"year": 2000, "country": "Austria", "cluster": 1, "pop": 8113413, "life_expect": 78.98, "fertility": 1.3820000000000001}, {"year": 2005, "country": "Austria", "cluster": 1, "pop": 8184691, "life_expect": 79.829, "fertility": 1.42}, {"year": 1955, "country": "Bahamas", "cluster": 3, "pop": 87138, "life_expect": 62.405, "fertility": 4.305}, {"year": 1960, "country": "Bahamas", "cluster": 3, "pop": 112234, "life_expect": 64.209, "fertility": 4.503}, {"year": 1965, "country": "Bahamas", "cluster": 3, "pop": 139205, "life_expect": 65.795, "fertility": 3.794}, {"year": 1970, "country": "Bahamas", "cluster": 3, "pop": 170323, "life_expect": 66.515, "fertility": 3.444}, {"year": 1975, "country": "Bahamas", "cluster": 3, "pop": 189139, "life_expect": 67.199, "fertility": 3.221}, {"year": 1980, "country": "Bahamas", "cluster": 3, "pop": 209944, "life_expect": 67.874, "fertility": 3.16}, {"year": 1985, "country": "Bahamas", "cluster": 3, "pop": 234988, "life_expect": 69.524, "fertility": 2.62}, {"year": 1990, "country": "Bahamas", "cluster": 3, "pop": 257253, "life_expect": 69.171, "fertility": 2.6}, {"year": 1995, "country": "Bahamas", "cluster": 3, "pop": 275303, "life_expect": 68.472, "fertility": 2.4}, {"year": 2000, "country": "Bahamas", "cluster": 3, "pop": 290075, "life_expect": 71.068, "fertility": 2.1111}, {"year": 2005, "country": "Bahamas", "cluster": 3, "pop": 301790, "life_expect": 73.495, "fertility": 2.0221}, {"year": 1955, "country": "Bangladesh", "cluster": 0, "pop": 49601520, "life_expect": 39.348, "fertility": 6.76}, {"year": 1960, "country": "Bangladesh", "cluster": 0, "pop": 54621538, "life_expect": 41.216, "fertility": 6.85}, {"year": 1965, "country": "Bangladesh", "cluster": 0, "pop": 60332117, "life_expect": 43.453, "fertility": 6.6}, {"year": 1970, "country": "Bangladesh", "cluster": 0, "pop": 67402621, "life_expect": 45.252, "fertility": 6.15}, {"year": 1975, "country": "Bangladesh", "cluster": 0, "pop": 76253310, "life_expect": 46.923, "fertility": 5.6}, {"year": 1980, "country": "Bangladesh", "cluster": 0, "pop": 88076996, "life_expect": 50.009, "fertility": 5.25}, {"year": 1985, "country": "Bangladesh", "cluster": 0, "pop": 99752733, "life_expect": 52.819, "fertility": 4.629}, {"year": 1990, "country": "Bangladesh", "cluster": 0, "pop": 109896945, "life_expect": 56.018, "fertility": 4.117}, {"year": 1995, "country": "Bangladesh", "cluster": 0, "pop": 119186448, "life_expect": 59.412, "fertility": 3.5042999999999997}, {"year": 2000, "country": "Bangladesh", "cluster": 0, "pop": 130406594, "life_expect": 62.013, "fertility": 3.224}, {"year": 2005, "country": "Bangladesh", "cluster": 0, "pop": 144319628, "life_expect": 64.062, "fertility": 2.826}, {"year": 1955, "country": "Barbados", "cluster": 3, "pop": 227255, "life_expect": 62.57, "fertility": 4.67}, {"year": 1960, "country": "Barbados", "cluster": 3, "pop": 232339, "life_expect": 65.87, "fertility": 4.26}, {"year": 1965, "country": "Barbados", "cluster": 3, "pop": 234980, "life_expect": 67.62, "fertility": 3.45}, {"year": 1970, "country": "Barbados", "cluster": 3, "pop": 238756, "life_expect": 69.42, "fertility": 2.74}, {"year": 1975, "country": "Barbados", "cluster": 3, "pop": 247147, "life_expect": 71.27, "fertility": 2.19}, {"year": 1980, "country": "Barbados", "cluster": 3, "pop": 251966, "life_expect": 72.695, "fertility": 1.92}, {"year": 1985, "country": "Barbados", "cluster": 3, "pop": 257446, "life_expect": 74.027, "fertility": 1.75}, {"year": 1990, "country": "Barbados", "cluster": 3, "pop": 262624, "life_expect": 74.894, "fertility": 1.6}, {"year": 1995, "country": "Barbados", "cluster": 3, "pop": 267907, "life_expect": 74.912, "fertility": 1.5}, {"year": 2000, "country": "Barbados", "cluster": 3, "pop": 273483, "life_expect": 75.97, "fertility": 1.5}, {"year": 2005, "country": "Barbados", "cluster": 3, "pop": 278870, "life_expect": 77.296, "fertility": 1.5}, {"year": 1955, "country": "Belgium", "cluster": 1, "pop": 8868475, "life_expect": 69.24, "fertility": 2.496}, {"year": 1960, "country": "Belgium", "cluster": 1, "pop": 9118700, "life_expect": 70.25, "fertility": 2.644}, {"year": 1965, "country": "Belgium", "cluster": 1, "pop": 9448100, "life_expect": 70.94, "fertility": 2.392}, {"year": 1970, "country": "Belgium", "cluster": 1, "pop": 9637800, "life_expect": 71.44, "fertility": 2.015}, {"year": 1975, "country": "Belgium", "cluster": 1, "pop": 9794800, "life_expect": 72.8, "fertility": 1.705}, {"year": 1980, "country": "Belgium", "cluster": 1, "pop": 9846800, "life_expect": 73.93, "fertility": 1.595}, {"year": 1985, "country": "Belgium", "cluster": 1, "pop": 9858200, "life_expect": 75.35, "fertility": 1.5590000000000002}, {"year": 1990, "country": "Belgium", "cluster": 1, "pop": 9969310, "life_expect": 76.46, "fertility": 1.613}, {"year": 1995, "country": "Belgium", "cluster": 1, "pop": 10155459, "life_expect": 77.53, "fertility": 1.604}, {"year": 2000, "country": "Belgium", "cluster": 1, "pop": 10263618, "life_expect": 78.32, "fertility": 1.638}, {"year": 2005, "country": "Belgium", "cluster": 1, "pop": 10364388, "life_expect": 79.441, "fertility": 1.646}, {"year": 1955, "country": "Bolivia", "cluster": 3, "pop": 3074311, "life_expect": 41.89, "fertility": 6.75}, {"year": 1960, "country": "Bolivia", "cluster": 3, "pop": 3434073, "life_expect": 43.428, "fertility": 6.63}, {"year": 1965, "country": "Bolivia", "cluster": 3, "pop": 3853315, "life_expect": 45.032, "fertility": 6.5600000000000005}, {"year": 1970, "country": "Bolivia", "cluster": 3, "pop": 4346218, "life_expect": 46.714, "fertility": 6.5}, {"year": 1975, "country": "Bolivia", "cluster": 3, "pop": 4914316, "life_expect": 50.023, "fertility": 5.8}, {"year": 1980, "country": "Bolivia", "cluster": 3, "pop": 5441298, "life_expect": 53.859, "fertility": 5.2995}, {"year": 1985, "country": "Bolivia", "cluster": 3, "pop": 5934935, "life_expect": 57.251, "fertility": 5.0}, {"year": 1990, "country": "Bolivia", "cluster": 3, "pop": 6573900, "life_expect": 59.957, "fertility": 4.8}, {"year": 1995, "country": "Bolivia", "cluster": 3, "pop": 7376582, "life_expect": 62.05, "fertility": 4.324}, {"year": 2000, "country": "Bolivia", "cluster": 3, "pop": 8152620, "life_expect": 63.883, "fertility": 3.9585}, {"year": 2005, "country": "Bolivia", "cluster": 3, "pop": 8857870, "life_expect": 65.554, "fertility": 3.5}, {"year": 1955, "country": "Brazil", "cluster": 3, "pop": 61773546, "life_expect": 53.285, "fertility": 6.1501}, {"year": 1960, "country": "Brazil", "cluster": 3, "pop": 71694810, "life_expect": 55.665, "fertility": 6.1501}, {"year": 1965, "country": "Brazil", "cluster": 3, "pop": 83092908, "life_expect": 57.632, "fertility": 5.38}, {"year": 1970, "country": "Brazil", "cluster": 3, "pop": 95684297, "life_expect": 59.504, "fertility": 4.7175}, {"year": 1975, "country": "Brazil", "cluster": 3, "pop": 108823732, "life_expect": 61.489, "fertility": 4.305}, {"year": 1980, "country": "Brazil", "cluster": 3, "pop": 122958132, "life_expect": 63.336, "fertility": 3.8}, {"year": 1985, "country": "Brazil", "cluster": 3, "pop": 137302933, "life_expect": 65.205, "fertility": 3.1}, {"year": 1990, "country": "Brazil", "cluster": 3, "pop": 151083809, "life_expect": 67.057, "fertility": 2.6}, {"year": 1995, "country": "Brazil", "cluster": 3, "pop": 163542501, "life_expect": 69.388, "fertility": 2.45}, {"year": 2000, "country": "Brazil", "cluster": 3, "pop": 175552771, "life_expect": 71.006, "fertility": 2.345}, {"year": 2005, "country": "Brazil", "cluster": 3, "pop": 186112794, "life_expect": 72.39, "fertility": 2.245}, {"year": 1955, "country": "Canada", "cluster": 3, "pop": 16050356, "life_expect": 69.96, "fertility": 3.882}, {"year": 1960, "country": "Canada", "cluster": 3, "pop": 18266765, "life_expect": 71.3, "fertility": 3.675}, {"year": 1965, "country": "Canada", "cluster": 3, "pop": 20071104, "life_expect": 72.13, "fertility": 2.61}, {"year": 1970, "country": "Canada", "cluster": 3, "pop": 21749986, "life_expect": 72.88, "fertility": 1.976}, {"year": 1975, "country": "Canada", "cluster": 3, "pop": 23209200, "life_expect": 74.21, "fertility": 1.734}, {"year": 1980, "country": "Canada", "cluster": 3, "pop": 24593300, "life_expect": 75.76, "fertility": 1.634}, {"year": 1985, "country": "Canada", "cluster": 3, "pop": 25941600, "life_expect": 76.86, "fertility": 1.616}, {"year": 1990, "country": "Canada", "cluster": 3, "pop": 27790600, "life_expect": 77.95, "fertility": 1.694}, {"year": 1995, "country": "Canada", "cluster": 3, "pop": 29619002, "life_expect": 78.61, "fertility": 1.564}, {"year": 2000, "country": "Canada", "cluster": 3, "pop": 31278097, "life_expect": 79.77, "fertility": 1.522}, {"year": 2005, "country": "Canada", "cluster": 3, "pop": 32805041, "life_expect": 80.653, "fertility": 1.5270000000000001}, {"year": 1955, "country": "Chile", "cluster": 3, "pop": 6743269, "life_expect": 56.074, "fertility": 5.486}, {"year": 1960, "country": "Chile", "cluster": 3, "pop": 7585349, "life_expect": 57.924, "fertility": 5.4385}, {"year": 1965, "country": "Chile", "cluster": 3, "pop": 8509950, "life_expect": 60.523, "fertility": 4.4405}, {"year": 1970, "country": "Chile", "cluster": 3, "pop": 9368558, "life_expect": 63.441, "fertility": 3.63}, {"year": 1975, "country": "Chile", "cluster": 3, "pop": 10251542, "life_expect": 67.052, "fertility": 2.803}, {"year": 1980, "country": "Chile", "cluster": 3, "pop": 11093718, "life_expect": 70.565, "fertility": 2.6710000000000003}, {"year": 1985, "country": "Chile", "cluster": 3, "pop": 12066701, "life_expect": 72.492, "fertility": 2.65}, {"year": 1990, "country": "Chile", "cluster": 3, "pop": 13127760, "life_expect": 74.126, "fertility": 2.55}, {"year": 1995, "country": "Chile", "cluster": 3, "pop": 14205449, "life_expect": 75.816, "fertility": 2.21}, {"year": 2000, "country": "Chile", "cluster": 3, "pop": 15153450, "life_expect": 77.86, "fertility": 2.0}, {"year": 2005, "country": "Chile", "cluster": 3, "pop": 15980912, "life_expect": 78.553, "fertility": 1.944}, {"year": 1955, "country": "China", "cluster": 4, "pop": 608655000, "life_expect": 50.54896, "fertility": 5.59}, {"year": 1960, "country": "China", "cluster": 4, "pop": 667070000, "life_expect": 44.50136, "fertility": 5.72}, {"year": 1965, "country": "China", "cluster": 4, "pop": 715185000, "life_expect": 58.38112, "fertility": 6.06}, {"year": 1970, "country": "China", "cluster": 4, "pop": 818315000, "life_expect": 63.11888, "fertility": 4.86}, {"year": 1975, "country": "China", "cluster": 4, "pop": 916395000, "life_expect": 63.96736, "fertility": 3.32}, {"year": 1980, "country": "China", "cluster": 4, "pop": 981235000, "life_expect": 65.525, "fertility": 2.55}, {"year": 1985, "country": "China", "cluster": 4, "pop": 1051040000, "life_expect": 67.274, "fertility": 2.46}, {"year": 1990, "country": "China", "cluster": 4, "pop": 1135185000, "life_expect": 68.69, "fertility": 1.92}, {"year": 1995, "country": "China", "cluster": 4, "pop": 1204855000, "life_expect": 70.426, "fertility": 1.7810000000000001}, {"year": 2000, "country": "China", "cluster": 4, "pop": 1262645000, "life_expect": 72.028, "fertility": 1.7000000000000002}, {"year": 2005, "country": "China", "cluster": 4, "pop": 1303182268, "life_expect": 72.961, "fertility": 1.725}, {"year": 1955, "country": "Colombia", "cluster": 3, "pop": 13588405, "life_expect": 55.118, "fertility": 6.76}, {"year": 1960, "country": "Colombia", "cluster": 3, "pop": 15952727, "life_expect": 57.863, "fertility": 6.76}, {"year": 1965, "country": "Colombia", "cluster": 3, "pop": 18646175, "life_expect": 59.963, "fertility": 6.18}, {"year": 1970, "country": "Colombia", "cluster": 3, "pop": 21429658, "life_expect": 61.623, "fertility": 5.0005}, {"year": 1975, "country": "Colombia", "cluster": 3, "pop": 24114177, "life_expect": 63.837, "fertility": 4.3385}, {"year": 1980, "country": "Colombia", "cluster": 3, "pop": 26582811, "life_expect": 66.653, "fertility": 3.685}, {"year": 1985, "country": "Colombia", "cluster": 3, "pop": 29678395, "life_expect": 67.768, "fertility": 3.172}, {"year": 1990, "country": "Colombia", "cluster": 3, "pop": 32858579, "life_expect": 68.421, "fertility": 2.93005}, {"year": 1995, "country": "Colombia", "cluster": 3, "pop": 36280883, "life_expect": 70.313, "fertility": 2.7}, {"year": 2000, "country": "Colombia", "cluster": 3, "pop": 39685655, "life_expect": 71.682, "fertility": 2.4705}, {"year": 2005, "country": "Colombia", "cluster": 3, "pop": 42954279, "life_expect": 72.889, "fertility": 2.2205}, {"year": 1955, "country": "Costa Rica", "cluster": 3, "pop": 1031782, "life_expect": 60.026, "fertility": 7.1135}, {"year": 1960, "country": "Costa Rica", "cluster": 3, "pop": 1248022, "life_expect": 62.842, "fertility": 7.2245}, {"year": 1965, "country": "Costa Rica", "cluster": 3, "pop": 1487605, "life_expect": 65.424, "fertility": 5.801}, {"year": 1970, "country": "Costa Rica", "cluster": 3, "pop": 1735523, "life_expect": 67.849, "fertility": 4.346}, {"year": 1975, "country": "Costa Rica", "cluster": 3, "pop": 1991580, "life_expect": 70.75, "fertility": 3.7755}, {"year": 1980, "country": "Costa Rica", "cluster": 3, "pop": 2299124, "life_expect": 73.45, "fertility": 3.527}, {"year": 1985, "country": "Costa Rica", "cluster": 3, "pop": 2643808, "life_expect": 74.752, "fertility": 3.374}, {"year": 1990, "country": "Costa Rica", "cluster": 3, "pop": 3027175, "life_expect": 75.713, "fertility": 2.9450000000000003}, {"year": 1995, "country": "Costa Rica", "cluster": 3, "pop": 3383786, "life_expect": 77.26, "fertility": 2.5835}, {"year": 2000, "country": "Costa Rica", "cluster": 3, "pop": 3710558, "life_expect": 78.123, "fertility": 2.2815}, {"year": 2005, "country": "Costa Rica", "cluster": 3, "pop": 4016173, "life_expect": 78.782, "fertility": 2.0985}, {"year": 1955, "country": "Croatia", "cluster": 1, "pop": 3955526, "life_expect": 64.77, "fertility": 2.42}, {"year": 1960, "country": "Croatia", "cluster": 1, "pop": 4036145, "life_expect": 67.13, "fertility": 2.27}, {"year": 1965, "country": "Croatia", "cluster": 1, "pop": 4133313, "life_expect": 68.5, "fertility": 2.09}, {"year": 1970, "country": "Croatia", "cluster": 1, "pop": 4205389, "life_expect": 69.61, "fertility": 1.96}, {"year": 1975, "country": "Croatia", "cluster": 1, "pop": 4255000, "life_expect": 70.64, "fertility": 2.02}, {"year": 1980, "country": "Croatia", "cluster": 1, "pop": 4383000, "life_expect": 70.46, "fertility": 1.96}, {"year": 1985, "country": "Croatia", "cluster": 1, "pop": 4457874, "life_expect": 71.52, "fertility": 1.8399999999999999}, {"year": 1990, "country": "Croatia", "cluster": 1, "pop": 4508347, "life_expect": 72.527, "fertility": 1.52}, {"year": 1995, "country": "Croatia", "cluster": 1, "pop": 4496683, "life_expect": 73.68, "fertility": 1.537}, {"year": 2000, "country": "Croatia", "cluster": 1, "pop": 4410830, "life_expect": 74.876, "fertility": 1.348}, {"year": 2005, "country": "Croatia", "cluster": 1, "pop": 4495904, "life_expect": 75.748, "fertility": 1.346}, {"year": 1955, "country": "Cuba", "cluster": 3, "pop": 6381106, "life_expect": 62.325, "fertility": 3.6995}, {"year": 1960, "country": "Cuba", "cluster": 3, "pop": 7027210, "life_expect": 65.246, "fertility": 4.6805}, {"year": 1965, "country": "Cuba", "cluster": 3, "pop": 7809916, "life_expect": 68.29, "fertility": 4.3}, {"year": 1970, "country": "Cuba", "cluster": 3, "pop": 8542746, "life_expect": 70.723, "fertility": 3.6}, {"year": 1975, "country": "Cuba", "cluster": 3, "pop": 9290074, "life_expect": 72.649, "fertility": 2.15}, {"year": 1980, "country": "Cuba", "cluster": 3, "pop": 9652975, "life_expect": 73.717, "fertility": 1.8495}, {"year": 1985, "country": "Cuba", "cluster": 3, "pop": 10078658, "life_expect": 74.174, "fertility": 1.8495}, {"year": 1990, "country": "Cuba", "cluster": 3, "pop": 10544793, "life_expect": 74.414, "fertility": 1.6505}, {"year": 1995, "country": "Cuba", "cluster": 3, "pop": 10896802, "life_expect": 76.151, "fertility": 1.6095000000000002}, {"year": 2000, "country": "Cuba", "cluster": 3, "pop": 11134273, "life_expect": 77.158, "fertility": 1.63}, {"year": 2005, "country": "Cuba", "cluster": 3, "pop": 11346670, "life_expect": 78.273, "fertility": 1.49}, {"year": 1955, "country": "Dominican Republic", "cluster": 3, "pop": 2737257, "life_expect": 49.828, "fertility": 7.6405}, {"year": 1960, "country": "Dominican Republic", "cluster": 3, "pop": 3231488, "life_expect": 53.459, "fertility": 7.3505}, {"year": 1965, "country": "Dominican Republic", "cluster": 3, "pop": 3805881, "life_expect": 56.751, "fertility": 6.6495}, {"year": 1970, "country": "Dominican Republic", "cluster": 3, "pop": 4422755, "life_expect": 59.631, "fertility": 5.71}, {"year": 1975, "country": "Dominican Republic", "cluster": 3, "pop": 5048499, "life_expect": 61.788, "fertility": 4.76}, {"year": 1980, "country": "Dominican Republic", "cluster": 3, "pop": 5696855, "life_expect": 63.727, "fertility": 4.0}, {"year": 1985, "country": "Dominican Republic", "cluster": 3, "pop": 6377765, "life_expect": 66.046, "fertility": 3.47}, {"year": 1990, "country": "Dominican Republic", "cluster": 3, "pop": 7077651, "life_expect": 68.457, "fertility": 3.1995}, {"year": 1995, "country": "Dominican Republic", "cluster": 3, "pop": 7730224, "life_expect": 69.957, "fertility": 3.05}, {"year": 2000, "country": "Dominican Republic", "cluster": 3, "pop": 8385828, "life_expect": 70.847, "fertility": 2.95}, {"year": 2005, "country": "Dominican Republic", "cluster": 3, "pop": 9049595, "life_expect": 72.235, "fertility": 2.81}, {"year": 1955, "country": "Ecuador", "cluster": 3, "pop": 3842399, "life_expect": 51.356, "fertility": 6.7}, {"year": 1960, "country": "Ecuador", "cluster": 3, "pop": 4415956, "life_expect": 54.64, "fertility": 6.7}, {"year": 1965, "country": "Ecuador", "cluster": 3, "pop": 5117779, "life_expect": 56.678, "fertility": 6.5}, {"year": 1970, "country": "Ecuador", "cluster": 3, "pop": 5939246, "life_expect": 58.796, "fertility": 6.0005}, {"year": 1975, "country": "Ecuador", "cluster": 3, "pop": 6871698, "life_expect": 61.31, "fertility": 5.4005}, {"year": 1980, "country": "Ecuador", "cluster": 3, "pop": 7920499, "life_expect": 64.342, "fertility": 4.7005}, {"year": 1985, "country": "Ecuador", "cluster": 3, "pop": 9061664, "life_expect": 67.231, "fertility": 4.0}, {"year": 1990, "country": "Ecuador", "cluster": 3, "pop": 10318036, "life_expect": 69.613, "fertility": 3.4005}, {"year": 1995, "country": "Ecuador", "cluster": 3, "pop": 11438004, "life_expect": 72.312, "fertility": 3.1}, {"year": 2000, "country": "Ecuador", "cluster": 3, "pop": 12505204, "life_expect": 74.173, "fertility": 2.8175}, {"year": 2005, "country": "Ecuador", "cluster": 3, "pop": 13363593, "life_expect": 74.994, "fertility": 2.578}, {"year": 1955, "country": "Egypt", "cluster": 5, "pop": 23855527, "life_expect": 44.444, "fertility": 6.97}, {"year": 1960, "country": "Egypt", "cluster": 5, "pop": 26846610, "life_expect": 46.992, "fertility": 7.073}, {"year": 1965, "country": "Egypt", "cluster": 5, "pop": 30265148, "life_expect": 49.293, "fertility": 6.5600000000000005}, {"year": 1970, "country": "Egypt", "cluster": 5, "pop": 33574026, "life_expect": 51.137, "fertility": 5.855}, {"year": 1975, "country": "Egypt", "cluster": 5, "pop": 36952499, "life_expect": 53.319, "fertility": 5.609}, {"year": 1980, "country": "Egypt", "cluster": 5, "pop": 42634215, "life_expect": 56.006, "fertility": 5.332}, {"year": 1985, "country": "Egypt", "cluster": 5, "pop": 50052381, "life_expect": 59.797, "fertility": 4.833}, {"year": 1990, "country": "Egypt", "cluster": 5, "pop": 56694413, "life_expect": 63.674, "fertility": 3.908}, {"year": 1995, "country": "Egypt", "cluster": 5, "pop": 63321615, "life_expect": 67.217, "fertility": 3.5}, {"year": 2000, "country": "Egypt", "cluster": 5, "pop": 70492342, "life_expect": 69.806, "fertility": 3.174}, {"year": 2005, "country": "Egypt", "cluster": 5, "pop": 77505756, "life_expect": 71.338, "fertility": 2.891}, {"year": 1955, "country": "El Salvador", "cluster": 3, "pop": 2221139, "life_expect": 48.57, "fertility": 6.8065}, {"year": 1960, "country": "El Salvador", "cluster": 3, "pop": 2581583, "life_expect": 52.307, "fertility": 6.8469999999999995}, {"year": 1965, "country": "El Salvador", "cluster": 3, "pop": 3017852, "life_expect": 55.855, "fertility": 6.621}, {"year": 1970, "country": "El Salvador", "cluster": 3, "pop": 3603907, "life_expect": 58.207, "fertility": 6.0995}, {"year": 1975, "country": "El Salvador", "cluster": 3, "pop": 4071179, "life_expect": 56.696, "fertility": 5.5996}, {"year": 1980, "country": "El Salvador", "cluster": 3, "pop": 4566199, "life_expect": 56.604, "fertility": 4.5}, {"year": 1985, "country": "El Salvador", "cluster": 3, "pop": 4664361, "life_expect": 63.154, "fertility": 3.901}, {"year": 1990, "country": "El Salvador", "cluster": 3, "pop": 5099884, "life_expect": 66.798, "fertility": 3.52}, {"year": 1995, "country": "El Salvador", "cluster": 3, "pop": 5568437, "life_expect": 69.535, "fertility": 3.17}, {"year": 2000, "country": "El Salvador", "cluster": 3, "pop": 6122515, "life_expect": 70.734, "fertility": 2.883}, {"year": 2005, "country": "El Salvador", "cluster": 3, "pop": 6704932, "life_expect": 71.878, "fertility": 2.6825}, {"year": 1955, "country": "Finland", "cluster": 1, "pop": 4234900, "life_expect": 67.49, "fertility": 2.769}, {"year": 1960, "country": "Finland", "cluster": 1, "pop": 4429600, "life_expect": 68.75, "fertility": 2.66}, {"year": 1965, "country": "Finland", "cluster": 1, "pop": 4563732, "life_expect": 69.83, "fertility": 2.191}, {"year": 1970, "country": "Finland", "cluster": 1, "pop": 4606307, "life_expect": 70.87, "fertility": 1.623}, {"year": 1975, "country": "Finland", "cluster": 1, "pop": 4711439, "life_expect": 72.52, "fertility": 1.663}, {"year": 1980, "country": "Finland", "cluster": 1, "pop": 4779535, "life_expect": 74.55, "fertility": 1.685}, {"year": 1985, "country": "Finland", "cluster": 1, "pop": 4901783, "life_expect": 74.83, "fertility": 1.6600000000000001}, {"year": 1990, "country": "Finland", "cluster": 1, "pop": 4986431, "life_expect": 75.7, "fertility": 1.819}, {"year": 1995, "country": "Finland", "cluster": 1, "pop": 5104654, "life_expect": 77.13, "fertility": 1.7429999999999999}, {"year": 2000, "country": "Finland", "cluster": 1, "pop": 5168595, "life_expect": 78.37, "fertility": 1.754}, {"year": 2005, "country": "Finland", "cluster": 1, "pop": 5223442, "life_expect": 79.313, "fertility": 1.8250000000000002}, {"year": 1955, "country": "France", "cluster": 1, "pop": 43427669, "life_expect": 68.93, "fertility": 2.7119999999999997}, {"year": 1960, "country": "France", "cluster": 1, "pop": 45670000, "life_expect": 70.51, "fertility": 2.85}, {"year": 1965, "country": "France", "cluster": 1, "pop": 48763000, "life_expect": 71.55, "fertility": 2.607}, {"year": 1970, "country": "France", "cluster": 1, "pop": 50787000, "life_expect": 72.38, "fertility": 2.31}, {"year": 1975, "country": "France", "cluster": 1, "pop": 52758427, "life_expect": 73.83, "fertility": 1.862}, {"year": 1980, "country": "France", "cluster": 1, "pop": 53869743, "life_expect": 74.89, "fertility": 1.866}, {"year": 1985, "country": "France", "cluster": 1, "pop": 55171224, "life_expect": 76.34, "fertility": 1.8050000000000002}, {"year": 1990, "country": "France", "cluster": 1, "pop": 56735161, "life_expect": 77.46, "fertility": 1.713}, {"year": 1995, "country": "France", "cluster": 1, "pop": 58149727, "life_expect": 78.64, "fertility": 1.7624}, {"year": 2000, "country": "France", "cluster": 1, "pop": 59381628, "life_expect": 79.59, "fertility": 1.8833000000000002}, {"year": 2005, "country": "France", "cluster": 1, "pop": 60656178, "life_expect": 80.657, "fertility": 1.8916}, {"year": 1955, "country": "Georgia", "cluster": 1, "pop": 3827154, "life_expect": 62.625, "fertility": 2.909}, {"year": 1960, "country": "Georgia", "cluster": 1, "pop": 4146570, "life_expect": 64.644, "fertility": 2.979}, {"year": 1965, "country": "Georgia", "cluster": 1, "pop": 4464959, "life_expect": 66.654, "fertility": 2.6109999999999998}, {"year": 1970, "country": "Georgia", "cluster": 1, "pop": 4694491, "life_expect": 68.158, "fertility": 2.601}, {"year": 1975, "country": "Georgia", "cluster": 1, "pop": 4897656, "life_expect": 69.634, "fertility": 2.39}, {"year": 1980, "country": "Georgia", "cluster": 1, "pop": 5045697, "life_expect": 69.638, "fertility": 2.269}, {"year": 1985, "country": "Georgia", "cluster": 1, "pop": 5192957, "life_expect": 70.45, "fertility": 2.263}, {"year": 1990, "country": "Georgia", "cluster": 1, "pop": 5426207, "life_expect": 70.465, "fertility": 1.9500000000000002}, {"year": 1995, "country": "Georgia", "cluster": 1, "pop": 5012952, "life_expect": 70.49, "fertility": 1.58}, {"year": 2000, "country": "Georgia", "cluster": 1, "pop": 4777209, "life_expect": 70.476, "fertility": 1.478}, {"year": 2005, "country": "Georgia", "cluster": 1, "pop": 4677401, "life_expect": 70.987, "fertility": 1.407}, {"year": 1955, "country": "Germany", "cluster": 1, "pop": 70195612, "life_expect": 69.1, "fertility": 2.3}, {"year": 1960, "country": "Germany", "cluster": 1, "pop": 72480869, "life_expect": 70.3, "fertility": 2.49}, {"year": 1965, "country": "Germany", "cluster": 1, "pop": 75638851, "life_expect": 70.8, "fertility": 2.32}, {"year": 1970, "country": "Germany", "cluster": 1, "pop": 77783164, "life_expect": 71.0, "fertility": 1.6400000000000001}, {"year": 1975, "country": "Germany", "cluster": 1, "pop": 78682325, "life_expect": 72.5, "fertility": 1.52}, {"year": 1980, "country": "Germany", "cluster": 1, "pop": 78297904, "life_expect": 73.8, "fertility": 1.46}, {"year": 1985, "country": "Germany", "cluster": 1, "pop": 77684907, "life_expect": 74.847, "fertility": 1.43}, {"year": 1990, "country": "Germany", "cluster": 1, "pop": 79380394, "life_expect": 76.07, "fertility": 1.31}, {"year": 1995, "country": "Germany", "cluster": 1, "pop": 81653702, "life_expect": 77.34, "fertility": 1.34}, {"year": 2000, "country": "Germany", "cluster": 1, "pop": 82187909, "life_expect": 78.67, "fertility": 1.346}, {"year": 2005, "country": "Germany", "cluster": 1, "pop": 82431390, "life_expect": 79.406, "fertility": 1.3599999999999999}, {"year": 1955, "country": "Greece", "cluster": 1, "pop": 7965538, "life_expect": 67.86, "fertility": 2.27}, {"year": 1960, "country": "Greece", "cluster": 1, "pop": 8327405, "life_expect": 69.51, "fertility": 2.2}, {"year": 1965, "country": "Greece", "cluster": 1, "pop": 8550333, "life_expect": 71.0, "fertility": 2.38}, {"year": 1970, "country": "Greece", "cluster": 1, "pop": 8792806, "life_expect": 72.34, "fertility": 2.32}, {"year": 1975, "country": "Greece", "cluster": 1, "pop": 9046542, "life_expect": 73.68, "fertility": 2.32}, {"year": 1980, "country": "Greece", "cluster": 1, "pop": 9642505, "life_expect": 75.24, "fertility": 1.96}, {"year": 1985, "country": "Greece", "cluster": 1, "pop": 9923253, "life_expect": 76.67, "fertility": 1.53}, {"year": 1990, "country": "Greece", "cluster": 1, "pop": 10129603, "life_expect": 77.03, "fertility": 1.37}, {"year": 1995, "country": "Greece", "cluster": 1, "pop": 10457554, "life_expect": 77.869, "fertility": 1.296}, {"year": 2000, "country": "Greece", "cluster": 1, "pop": 10559110, "life_expect": 78.256, "fertility": 1.2770000000000001}, {"year": 2005, "country": "Greece", "cluster": 1, "pop": 10668354, "life_expect": 79.483, "fertility": 1.325}, {"year": 1955, "country": "Grenada", "cluster": 3, "pop": 84621, "life_expect": 63.114, "fertility": 6.7}, {"year": 1960, "country": "Grenada", "cluster": 3, "pop": 90148, "life_expect": 63.608, "fertility": 6.4}, {"year": 1965, "country": "Grenada", "cluster": 3, "pop": 93290, "life_expect": 64.091, "fertility": 4.8}, {"year": 1970, "country": "Grenada", "cluster": 3, "pop": 95410, "life_expect": 64.577, "fertility": 4.6}, {"year": 1975, "country": "Grenada", "cluster": 3, "pop": 95819, "life_expect": 65.035, "fertility": 4.3}, {"year": 1980, "country": "Grenada", "cluster": 3, "pop": 90164, "life_expect": 65.503, "fertility": 4.23}, {"year": 1985, "country": "Grenada", "cluster": 3, "pop": 92203, "life_expect": 66.002, "fertility": 4.14}, {"year": 1990, "country": "Grenada", "cluster": 3, "pop": 92360, "life_expect": 66.469, "fertility": 3.26}, {"year": 1995, "country": "Grenada", "cluster": 3, "pop": 90603, "life_expect": 66.986, "fertility": 2.814}, {"year": 2000, "country": "Grenada", "cluster": 3, "pop": 89312, "life_expect": 67.746, "fertility": 2.429}, {"year": 2005, "country": "Grenada", "cluster": 3, "pop": 89502, "life_expect": 68.724, "fertility": 2.302}, {"year": 1955, "country": "Haiti", "cluster": 3, "pop": 3376419, "life_expect": 40.696, "fertility": 6.3}, {"year": 1960, "country": "Haiti", "cluster": 3, "pop": 3722743, "life_expect": 43.59, "fertility": 6.3}, {"year": 1965, "country": "Haiti", "cluster": 3, "pop": 4137405, "life_expect": 46.243, "fertility": 6.0}, {"year": 1970, "country": "Haiti", "cluster": 3, "pop": 4604915, "life_expect": 48.042, "fertility": 5.6005}, {"year": 1975, "country": "Haiti", "cluster": 3, "pop": 4828338, "life_expect": 49.923, "fertility": 5.8}, {"year": 1980, "country": "Haiti", "cluster": 3, "pop": 5029725, "life_expect": 51.461, "fertility": 6.2099}, {"year": 1985, "country": "Haiti", "cluster": 3, "pop": 5517977, "life_expect": 53.636, "fertility": 5.69985}, {"year": 1990, "country": "Haiti", "cluster": 3, "pop": 6126101, "life_expect": 55.089, "fertility": 5.14985}, {"year": 1995, "country": "Haiti", "cluster": 3, "pop": 6675578, "life_expect": 56.671, "fertility": 4.61995}, {"year": 2000, "country": "Haiti", "cluster": 3, "pop": 7306302, "life_expect": 58.137, "fertility": 4.0}, {"year": 2005, "country": "Haiti", "cluster": 3, "pop": 8121622, "life_expect": 60.916, "fertility": 3.5445}, {"year": 1955, "country": "Hong Kong", "cluster": 4, "pop": 2490400, "life_expect": 64.75, "fertility": 4.72}, {"year": 1960, "country": "Hong Kong", "cluster": 4, "pop": 3075300, "life_expect": 67.65, "fertility": 5.31}, {"year": 1965, "country": "Hong Kong", "cluster": 4, "pop": 3597900, "life_expect": 70.0, "fertility": 4.02}, {"year": 1970, "country": "Hong Kong", "cluster": 4, "pop": 3959000, "life_expect": 72.0, "fertility": 2.89}, {"year": 1975, "country": "Hong Kong", "cluster": 4, "pop": 4395800, "life_expect": 73.6, "fertility": 2.32}, {"year": 1980, "country": "Hong Kong", "cluster": 4, "pop": 5063100, "life_expect": 75.45, "fertility": 1.8}, {"year": 1985, "country": "Hong Kong", "cluster": 4, "pop": 5456200, "life_expect": 76.2, "fertility": 1.31}, {"year": 1990, "country": "Hong Kong", "cluster": 4, "pop": 5687959, "life_expect": 77.601, "fertility": 1.288}, {"year": 1995, "country": "Hong Kong", "cluster": 4, "pop": 6225347, "life_expect": 80.0, "fertility": 1.08}, {"year": 2000, "country": "Hong Kong", "cluster": 4, "pop": 6658720, "life_expect": 81.495, "fertility": 0.9400000000000001}, {"year": 2005, "country": "Hong Kong", "cluster": 4, "pop": 6898686, "life_expect": 82.208, "fertility": 0.966}, {"year": 1955, "country": "Iceland", "cluster": 1, "pop": 158044, "life_expect": 73.47, "fertility": 4.023}, {"year": 1960, "country": "Iceland", "cluster": 1, "pop": 175860, "life_expect": 73.68, "fertility": 3.943}, {"year": 1965, "country": "Iceland", "cluster": 1, "pop": 192288, "life_expect": 73.73, "fertility": 3.154}, {"year": 1970, "country": "Iceland", "cluster": 1, "pop": 204104, "life_expect": 74.46, "fertility": 2.843}, {"year": 1975, "country": "Iceland", "cluster": 1, "pop": 218031, "life_expect": 76.11, "fertility": 2.287}, {"year": 1980, "country": "Iceland", "cluster": 1, "pop": 228161, "life_expect": 76.99, "fertility": 2.248}, {"year": 1985, "country": "Iceland", "cluster": 1, "pop": 241403, "life_expect": 77.23, "fertility": 2.116}, {"year": 1990, "country": "Iceland", "cluster": 1, "pop": 254719, "life_expect": 78.77, "fertility": 2.194}, {"year": 1995, "country": "Iceland", "cluster": 1, "pop": 267527, "life_expect": 78.95, "fertility": 2.056}, {"year": 2000, "country": "Iceland", "cluster": 1, "pop": 281043, "life_expect": 80.5, "fertility": 1.9929999999999999}, {"year": 2005, "country": "Iceland", "cluster": 1, "pop": 296737, "life_expect": 81.757, "fertility": 2.052}, {"year": 1955, "country": "India", "cluster": 0, "pop": 393000000, "life_expect": 40.249, "fertility": 5.8961}, {"year": 1960, "country": "India", "cluster": 0, "pop": 434000000, "life_expect": 43.605, "fertility": 5.8216}, {"year": 1965, "country": "India", "cluster": 0, "pop": 485000000, "life_expect": 47.193, "fertility": 5.6058}, {"year": 1970, "country": "India", "cluster": 0, "pop": 541000000, "life_expect": 50.651, "fertility": 5.264}, {"year": 1975, "country": "India", "cluster": 0, "pop": 607000000, "life_expect": 54.208, "fertility": 4.8888}, {"year": 1980, "country": "India", "cluster": 0, "pop": 679000000, "life_expect": 56.596, "fertility": 4.4975}, {"year": 1985, "country": "India", "cluster": 0, "pop": 755000000, "life_expect": 58.553, "fertility": 4.15}, {"year": 1990, "country": "India", "cluster": 0, "pop": 839000000, "life_expect": 60.223, "fertility": 3.8648}, {"year": 1995, "country": "India", "cluster": 0, "pop": 927000000, "life_expect": 61.765, "fertility": 3.4551}, {"year": 2000, "country": "India", "cluster": 0, "pop": 1007702000, "life_expect": 62.879, "fertility": 3.1132}, {"year": 2005, "country": "India", "cluster": 0, "pop": 1080264388, "life_expect": 64.698, "fertility": 2.8073}, {"year": 1955, "country": "Indonesia", "cluster": 4, "pop": 86807000, "life_expect": 39.918, "fertility": 5.672}, {"year": 1960, "country": "Indonesia", "cluster": 4, "pop": 95254000, "life_expect": 42.518, "fertility": 5.62}, {"year": 1965, "country": "Indonesia", "cluster": 4, "pop": 105093000, "life_expect": 45.964, "fertility": 5.568}, {"year": 1970, "country": "Indonesia", "cluster": 4, "pop": 116044000, "life_expect": 49.203, "fertility": 5.3}, {"year": 1975, "country": "Indonesia", "cluster": 4, "pop": 130297000, "life_expect": 52.702, "fertility": 4.73}, {"year": 1980, "country": "Indonesia", "cluster": 4, "pop": 146995000, "life_expect": 56.159, "fertility": 4.109}, {"year": 1985, "country": "Indonesia", "cluster": 4, "pop": 163403000, "life_expect": 60.137, "fertility": 3.4}, {"year": 1990, "country": "Indonesia", "cluster": 4, "pop": 178500000, "life_expect": 62.681, "fertility": 2.9}, {"year": 1995, "country": "Indonesia", "cluster": 4, "pop": 194755000, "life_expect": 66.041, "fertility": 2.55}, {"year": 2000, "country": "Indonesia", "cluster": 4, "pop": 206265000, "life_expect": 68.588, "fertility": 2.3761}, {"year": 2005, "country": "Indonesia", "cluster": 4, "pop": 218465000, "life_expect": 70.65, "fertility": 2.182}, {"year": 1955, "country": "Iran", "cluster": 5, "pop": 18729000, "life_expect": 47.181, "fertility": 7.0}, {"year": 1960, "country": "Iran", "cluster": 5, "pop": 21577000, "life_expect": 49.325, "fertility": 7.0}, {"year": 1965, "country": "Iran", "cluster": 5, "pop": 25000000, "life_expect": 52.469, "fertility": 6.8}, {"year": 1970, "country": "Iran", "cluster": 5, "pop": 28933000, "life_expect": 55.234, "fertility": 6.4}, {"year": 1975, "country": "Iran", "cluster": 5, "pop": 33379000, "life_expect": 57.702, "fertility": 6.5}, {"year": 1980, "country": "Iran", "cluster": 5, "pop": 39583397, "life_expect": 59.62, "fertility": 6.63}, {"year": 1985, "country": "Iran", "cluster": 5, "pop": 48439952, "life_expect": 63.04, "fertility": 5.62}, {"year": 1990, "country": "Iran", "cluster": 5, "pop": 57035717, "life_expect": 65.742, "fertility": 4.328}, {"year": 1995, "country": "Iran", "cluster": 5, "pop": 61628116, "life_expect": 68.042, "fertility": 2.534}, {"year": 2000, "country": "Iran", "cluster": 5, "pop": 65660289, "life_expect": 69.451, "fertility": 2.124}, {"year": 2005, "country": "Iran", "cluster": 5, "pop": 68017860, "life_expect": 70.964, "fertility": 2.04}, {"year": 1955, "country": "Iraq", "cluster": 5, "pop": 5903253, "life_expect": 48.437, "fertility": 7.3}, {"year": 1960, "country": "Iraq", "cluster": 5, "pop": 6822030, "life_expect": 51.457, "fertility": 7.25}, {"year": 1965, "country": "Iraq", "cluster": 5, "pop": 7970746, "life_expect": 54.459, "fertility": 7.2}, {"year": 1970, "country": "Iraq", "cluster": 5, "pop": 9413671, "life_expect": 56.95, "fertility": 7.15}, {"year": 1975, "country": "Iraq", "cluster": 5, "pop": 11117804, "life_expect": 60.413, "fertility": 6.8}, {"year": 1980, "country": "Iraq", "cluster": 5, "pop": 13232839, "life_expect": 62.038, "fertility": 6.35}, {"year": 1985, "country": "Iraq", "cluster": 5, "pop": 15693620, "life_expect": 65.044, "fertility": 6.15}, {"year": 1990, "country": "Iraq", "cluster": 5, "pop": 18134702, "life_expect": 59.461, "fertility": 5.7}, {"year": 1995, "country": "Iraq", "cluster": 5, "pop": 19557247, "life_expect": 58.811, "fertility": 5.37}, {"year": 2000, "country": "Iraq", "cluster": 5, "pop": 22675617, "life_expect": 57.046, "fertility": 4.858}, {"year": 2005, "country": "Iraq", "cluster": 5, "pop": 26074906, "life_expect": 59.545, "fertility": 4.264}, {"year": 1955, "country": "Ireland", "cluster": 1, "pop": 2916133, "life_expect": 68.9, "fertility": 3.68}, {"year": 1960, "country": "Ireland", "cluster": 1, "pop": 2832000, "life_expect": 70.29, "fertility": 3.979}, {"year": 1965, "country": "Ireland", "cluster": 1, "pop": 2876000, "life_expect": 71.08, "fertility": 3.873}, {"year": 1970, "country": "Ireland", "cluster": 1, "pop": 2950100, "life_expect": 71.28, "fertility": 3.815}, {"year": 1975, "country": "Ireland", "cluster": 1, "pop": 3177300, "life_expect": 72.03, "fertility": 3.478}, {"year": 1980, "country": "Ireland", "cluster": 1, "pop": 3401000, "life_expect": 73.1, "fertility": 2.877}, {"year": 1985, "country": "Ireland", "cluster": 1, "pop": 3540000, "life_expect": 74.36, "fertility": 2.287}, {"year": 1990, "country": "Ireland", "cluster": 1, "pop": 3508200, "life_expect": 75.467, "fertility": 1.9689999999999999}, {"year": 1995, "country": "Ireland", "cluster": 1, "pop": 3613890, "life_expect": 76.122, "fertility": 1.9}, {"year": 2000, "country": "Ireland", "cluster": 1, "pop": 3791690, "life_expect": 77.783, "fertility": 1.9689999999999999}, {"year": 2005, "country": "Ireland", "cluster": 1, "pop": 4015676, "life_expect": 78.885, "fertility": 1.964}, {"year": 1955, "country": "Israel", "cluster": 5, "pop": 1772032, "life_expect": 67.84, "fertility": 3.893}, {"year": 1960, "country": "Israel", "cluster": 5, "pop": 2141495, "life_expect": 69.39, "fertility": 3.852}, {"year": 1965, "country": "Israel", "cluster": 5, "pop": 2578184, "life_expect": 70.75, "fertility": 3.79}, {"year": 1970, "country": "Israel", "cluster": 5, "pop": 2903434, "life_expect": 71.63, "fertility": 3.77}, {"year": 1975, "country": "Israel", "cluster": 5, "pop": 3354242, "life_expect": 73.06, "fertility": 3.409}, {"year": 1980, "country": "Israel", "cluster": 5, "pop": 3737473, "life_expect": 74.45, "fertility": 3.125}, {"year": 1985, "country": "Israel", "cluster": 5, "pop": 4074965, "life_expect": 75.6, "fertility": 3.051}, {"year": 1990, "country": "Israel", "cluster": 5, "pop": 4512068, "life_expect": 76.93, "fertility": 2.933}, {"year": 1995, "country": "Israel", "cluster": 5, "pop": 5305120, "life_expect": 78.269, "fertility": 2.942}, {"year": 2000, "country": "Israel", "cluster": 5, "pop": 5842454, "life_expect": 79.696, "fertility": 2.906}, {"year": 2005, "country": "Israel", "cluster": 5, "pop": 6276883, "life_expect": 80.745, "fertility": 2.75}, {"year": 1955, "country": "Italy", "cluster": 1, "pop": 48633000, "life_expect": 67.81, "fertility": 2.35}, {"year": 1960, "country": "Italy", "cluster": 1, "pop": 50197600, "life_expect": 69.24, "fertility": 2.498}, {"year": 1965, "country": "Italy", "cluster": 1, "pop": 51987100, "life_expect": 71.06, "fertility": 2.493}, {"year": 1970, "country": "Italy", "cluster": 1, "pop": 53661100, "life_expect": 72.19, "fertility": 2.325}, {"year": 1975, "country": "Italy", "cluster": 1, "pop": 55571894, "life_expect": 73.48, "fertility": 1.889}, {"year": 1980, "country": "Italy", "cluster": 1, "pop": 56451247, "life_expect": 74.98, "fertility": 1.53}, {"year": 1985, "country": "Italy", "cluster": 1, "pop": 56731215, "life_expect": 76.42, "fertility": 1.349}, {"year": 1990, "country": "Italy", "cluster": 1, "pop": 56742886, "life_expect": 77.44, "fertility": 1.275}, {"year": 1995, "country": "Italy", "cluster": 1, "pop": 57274531, "life_expect": 78.82, "fertility": 1.213}, {"year": 2000, "country": "Italy", "cluster": 1, "pop": 57719337, "life_expect": 80.24, "fertility": 1.286}, {"year": 2005, "country": "Italy", "cluster": 1, "pop": 58103033, "life_expect": 80.546, "fertility": 1.379}, {"year": 1955, "country": "Jamaica", "cluster": 3, "pop": 1488805, "life_expect": 62.61, "fertility": 5.08}, {"year": 1960, "country": "Jamaica", "cluster": 3, "pop": 1631784, "life_expect": 65.61, "fertility": 5.64}, {"year": 1965, "country": "Jamaica", "cluster": 3, "pop": 1777397, "life_expect": 67.51, "fertility": 5.78}, {"year": 1970, "country": "Jamaica", "cluster": 3, "pop": 1943787, "life_expect": 69.0, "fertility": 5.0}, {"year": 1975, "country": "Jamaica", "cluster": 3, "pop": 2104879, "life_expect": 70.11, "fertility": 4.0}, {"year": 1980, "country": "Jamaica", "cluster": 3, "pop": 2228803, "life_expect": 71.21, "fertility": 3.55}, {"year": 1985, "country": "Jamaica", "cluster": 3, "pop": 2318652, "life_expect": 71.77, "fertility": 3.1}, {"year": 1990, "country": "Jamaica", "cluster": 3, "pop": 2347922, "life_expect": 71.766, "fertility": 2.84}, {"year": 1995, "country": "Jamaica", "cluster": 3, "pop": 2469389, "life_expect": 72.262, "fertility": 2.67}, {"year": 2000, "country": "Jamaica", "cluster": 3, "pop": 2615467, "life_expect": 72.047, "fertility": 2.628}, {"year": 2005, "country": "Jamaica", "cluster": 3, "pop": 2735520, "life_expect": 72.567, "fertility": 2.4289}, {"year": 1955, "country": "Japan", "cluster": 4, "pop": 89815060, "life_expect": 65.5, "fertility": 2.08}, {"year": 1960, "country": "Japan", "cluster": 4, "pop": 94091638, "life_expect": 68.73, "fertility": 2.02}, {"year": 1965, "country": "Japan", "cluster": 4, "pop": 98882534, "life_expect": 71.43, "fertility": 2.0}, {"year": 1970, "country": "Japan", "cluster": 4, "pop": 104344973, "life_expect": 73.42, "fertility": 2.07}, {"year": 1975, "country": "Japan", "cluster": 4, "pop": 111573116, "life_expect": 75.38, "fertility": 1.81}, {"year": 1980, "country": "Japan", "cluster": 4, "pop": 116807309, "life_expect": 77.11, "fertility": 1.76}, {"year": 1985, "country": "Japan", "cluster": 4, "pop": 120754335, "life_expect": 78.67, "fertility": 1.6600000000000001}, {"year": 1990, "country": "Japan", "cluster": 4, "pop": 123537399, "life_expect": 79.36, "fertility": 1.49}, {"year": 1995, "country": "Japan", "cluster": 4, "pop": 125341354, "life_expect": 80.69, "fertility": 1.3900000000000001}, {"year": 2000, "country": "Japan", "cluster": 4, "pop": 126699784, "life_expect": 82.0, "fertility": 1.291}, {"year": 2005, "country": "Japan", "cluster": 4, "pop": 127417244, "life_expect": 82.603, "fertility": 1.27}, {"year": 1955, "country": "Kenya", "cluster": 2, "pop": 7033999, "life_expect": 44.686, "fertility": 7.816}, {"year": 1960, "country": "Kenya", "cluster": 2, "pop": 8156827, "life_expect": 47.949, "fertility": 8.12}, {"year": 1965, "country": "Kenya", "cluster": 2, "pop": 9549179, "life_expect": 50.654, "fertility": 8.12}, {"year": 1970, "country": "Kenya", "cluster": 2, "pop": 11247182, "life_expect": 53.559, "fertility": 8.0}, {"year": 1975, "country": "Kenya", "cluster": 2, "pop": 13433414, "life_expect": 56.155, "fertility": 7.6}, {"year": 1980, "country": "Kenya", "cluster": 2, "pop": 16331401, "life_expect": 58.766, "fertility": 7.2}, {"year": 1985, "country": "Kenya", "cluster": 2, "pop": 19763285, "life_expect": 59.339, "fertility": 6.5}, {"year": 1990, "country": "Kenya", "cluster": 2, "pop": 23358413, "life_expect": 59.285, "fertility": 5.4}, {"year": 1995, "country": "Kenya", "cluster": 2, "pop": 27060142, "life_expect": 54.407, "fertility": 5.0}, {"year": 2000, "country": "Kenya", "cluster": 2, "pop": 29985839, "life_expect": 50.992, "fertility": 5.0}, {"year": 2005, "country": "Kenya", "cluster": 2, "pop": 33829590, "life_expect": 54.11, "fertility": 4.959}, {"year": 1955, "country": "South Korea", "cluster": 4, "pop": 8839427, "life_expect": 54.081, "fertility": 3.8}, {"year": 1960, "country": "South Korea", "cluster": 4, "pop": 10391909, "life_expect": 56.656, "fertility": 3.41}, {"year": 1965, "country": "South Korea", "cluster": 4, "pop": 11868751, "life_expect": 59.942, "fertility": 4.09}, {"year": 1970, "country": "South Korea", "cluster": 4, "pop": 13911902, "life_expect": 63.983, "fertility": 3.7199999999999998}, {"year": 1975, "country": "South Korea", "cluster": 4, "pop": 15801308, "life_expect": 67.159, "fertility": 2.58}, {"year": 1980, "country": "South Korea", "cluster": 4, "pop": 17113626, "life_expect": 69.1, "fertility": 2.93}, {"year": 1985, "country": "South Korea", "cluster": 4, "pop": 18481420, "life_expect": 70.647, "fertility": 2.45}, {"year": 1990, "country": "South Korea", "cluster": 4, "pop": 20018546, "life_expect": 69.978, "fertility": 2.35}, {"year": 1995, "country": "South Korea", "cluster": 4, "pop": 21561856, "life_expect": 67.727, "fertility": 2.0938}, {"year": 2000, "country": "South Korea", "cluster": 4, "pop": 21647682, "life_expect": 66.662, "fertility": 1.9173}, {"year": 2005, "country": "South Korea", "cluster": 4, "pop": 22912177, "life_expect": 67.297, "fertility": 1.85}, {"year": 1955, "country": "North Korea", "cluster": 4, "pop": 21551834, "life_expect": 52.681, "fertility": 6.332}, {"year": 1960, "country": "North Korea", "cluster": 4, "pop": 24784140, "life_expect": 55.292, "fertility": 5.63}, {"year": 1965, "country": "North Korea", "cluster": 4, "pop": 28705000, "life_expect": 57.716, "fertility": 4.708}, {"year": 1970, "country": "North Korea", "cluster": 4, "pop": 32241000, "life_expect": 62.612, "fertility": 4.281}, {"year": 1975, "country": "North Korea", "cluster": 4, "pop": 35281000, "life_expect": 64.766, "fertility": 2.919}, {"year": 1980, "country": "North Korea", "cluster": 4, "pop": 38124000, "life_expect": 67.123, "fertility": 2.234}, {"year": 1985, "country": "North Korea", "cluster": 4, "pop": 40806000, "life_expect": 69.81, "fertility": 1.601}, {"year": 1990, "country": "North Korea", "cluster": 4, "pop": 42869000, "life_expect": 72.244, "fertility": 1.6960000000000002}, {"year": 1995, "country": "North Korea", "cluster": 4, "pop": 45264146, "life_expect": 74.647, "fertility": 1.514}, {"year": 2000, "country": "North Korea", "cluster": 4, "pop": 47351083, "life_expect": 77.045, "fertility": 1.242}, {"year": 2005, "country": "North Korea", "cluster": 4, "pop": 48640671, "life_expect": 78.623, "fertility": 1.21}, {"year": 1955, "country": "Lebanon", "cluster": 5, "pop": 1560985, "life_expect": 59.489, "fertility": 5.72}, {"year": 1960, "country": "Lebanon", "cluster": 5, "pop": 1786235, "life_expect": 62.094, "fertility": 5.689}, {"year": 1965, "country": "Lebanon", "cluster": 5, "pop": 2057945, "life_expect": 63.87, "fertility": 5.336}, {"year": 1970, "country": "Lebanon", "cluster": 5, "pop": 2383029, "life_expect": 65.421, "fertility": 4.78}, {"year": 1975, "country": "Lebanon", "cluster": 5, "pop": 3098159, "life_expect": 66.099, "fertility": 4.311}, {"year": 1980, "country": "Lebanon", "cluster": 5, "pop": 3085876, "life_expect": 66.983, "fertility": 3.895}, {"year": 1985, "country": "Lebanon", "cluster": 5, "pop": 3088235, "life_expect": 67.926, "fertility": 3.313}, {"year": 1990, "country": "Lebanon", "cluster": 5, "pop": 3147267, "life_expect": 69.292, "fertility": 3.0}, {"year": 1995, "country": "Lebanon", "cluster": 5, "pop": 3334733, "life_expect": 70.265, "fertility": 2.6950000000000003}, {"year": 2000, "country": "Lebanon", "cluster": 5, "pop": 3578036, "life_expect": 71.028, "fertility": 2.319}, {"year": 2005, "country": "Lebanon", "cluster": 5, "pop": 3826018, "life_expect": 71.993, "fertility": 2.209}, {"year": 1955, "country": "Mexico", "cluster": 3, "pop": 32929914, "life_expect": 55.19, "fertility": 6.8}, {"year": 1960, "country": "Mexico", "cluster": 3, "pop": 38578505, "life_expect": 58.299, "fertility": 6.7495}, {"year": 1965, "country": "Mexico", "cluster": 3, "pop": 45142399, "life_expect": 60.11, "fertility": 6.7495}, {"year": 1970, "country": "Mexico", "cluster": 3, "pop": 52775158, "life_expect": 62.361, "fertility": 6.5}, {"year": 1975, "country": "Mexico", "cluster": 3, "pop": 60678045, "life_expect": 65.032, "fertility": 5.2505}, {"year": 1980, "country": "Mexico", "cluster": 3, "pop": 68347479, "life_expect": 67.405, "fertility": 4.25}, {"year": 1985, "country": "Mexico", "cluster": 3, "pop": 76767225, "life_expect": 69.498, "fertility": 3.6295}, {"year": 1990, "country": "Mexico", "cluster": 3, "pop": 84913652, "life_expect": 71.455, "fertility": 3.1905}, {"year": 1995, "country": "Mexico", "cluster": 3, "pop": 92880353, "life_expect": 73.67, "fertility": 2.6705}, {"year": 2000, "country": "Mexico", "cluster": 3, "pop": 99926620, "life_expect": 74.902, "fertility": 2.4005}, {"year": 2005, "country": "Mexico", "cluster": 3, "pop": 106202903, "life_expect": 76.195, "fertility": 2.211}, {"year": 1955, "country": "Netherlands", "cluster": 1, "pop": 10750842, "life_expect": 72.99, "fertility": 3.095}, {"year": 1960, "country": "Netherlands", "cluster": 1, "pop": 11486000, "life_expect": 73.23, "fertility": 3.168}, {"year": 1965, "country": "Netherlands", "cluster": 1, "pop": 12292000, "life_expect": 73.82, "fertility": 2.797}, {"year": 1970, "country": "Netherlands", "cluster": 1, "pop": 13032335, "life_expect": 73.75, "fertility": 2.059}, {"year": 1975, "country": "Netherlands", "cluster": 1, "pop": 13653438, "life_expect": 75.24, "fertility": 1.596}, {"year": 1980, "country": "Netherlands", "cluster": 1, "pop": 14143901, "life_expect": 76.05, "fertility": 1.5150000000000001}, {"year": 1985, "country": "Netherlands", "cluster": 1, "pop": 14491380, "life_expect": 76.83, "fertility": 1.5550000000000002}, {"year": 1990, "country": "Netherlands", "cluster": 1, "pop": 14951510, "life_expect": 77.42, "fertility": 1.583}, {"year": 1995, "country": "Netherlands", "cluster": 1, "pop": 15459054, "life_expect": 78.03, "fertility": 1.6}, {"year": 2000, "country": "Netherlands", "cluster": 1, "pop": 15907853, "life_expect": 78.53, "fertility": 1.726}, {"year": 2005, "country": "Netherlands", "cluster": 1, "pop": 16407491, "life_expect": 79.762, "fertility": 1.721}, {"year": 1955, "country": "New Zealand", "cluster": 4, "pop": 2136168, "life_expect": 70.26, "fertility": 4.07}, {"year": 1960, "country": "New Zealand", "cluster": 4, "pop": 2371746, "life_expect": 71.24, "fertility": 4.022}, {"year": 1965, "country": "New Zealand", "cluster": 4, "pop": 2640400, "life_expect": 71.52, "fertility": 3.348}, {"year": 1970, "country": "New Zealand", "cluster": 4, "pop": 2828050, "life_expect": 71.89, "fertility": 2.843}, {"year": 1975, "country": "New Zealand", "cluster": 4, "pop": 3117800, "life_expect": 72.22, "fertility": 2.178}, {"year": 1980, "country": "New Zealand", "cluster": 4, "pop": 3170150, "life_expect": 73.84, "fertility": 1.963}, {"year": 1985, "country": "New Zealand", "cluster": 4, "pop": 3298050, "life_expect": 74.32, "fertility": 2.053}, {"year": 1990, "country": "New Zealand", "cluster": 4, "pop": 3359604, "life_expect": 76.33, "fertility": 2.061}, {"year": 1995, "country": "New Zealand", "cluster": 4, "pop": 3565990, "life_expect": 77.55, "fertility": 1.952}, {"year": 2000, "country": "New Zealand", "cluster": 4, "pop": 3819762, "life_expect": 79.11, "fertility": 1.964}, {"year": 2005, "country": "New Zealand", "cluster": 4, "pop": 4035461, "life_expect": 80.204, "fertility": 1.994}, {"year": 1955, "country": "Nigeria", "cluster": 2, "pop": 35458978, "life_expect": 37.802, "fertility": 6.9}, {"year": 1960, "country": "Nigeria", "cluster": 2, "pop": 39914593, "life_expect": 39.36, "fertility": 6.9}, {"year": 1965, "country": "Nigeria", "cluster": 2, "pop": 45020052, "life_expect": 41.04, "fertility": 6.9}, {"year": 1970, "country": "Nigeria", "cluster": 2, "pop": 51027516, "life_expect": 42.821, "fertility": 6.9}, {"year": 1975, "country": "Nigeria", "cluster": 2, "pop": 58522112, "life_expect": 44.514, "fertility": 6.9}, {"year": 1980, "country": "Nigeria", "cluster": 2, "pop": 68550274, "life_expect": 45.826, "fertility": 6.9}, {"year": 1985, "country": "Nigeria", "cluster": 2, "pop": 77573154, "life_expect": 46.886, "fertility": 6.834}, {"year": 1990, "country": "Nigeria", "cluster": 2, "pop": 88510354, "life_expect": 47.472, "fertility": 6.635}, {"year": 1995, "country": "Nigeria", "cluster": 2, "pop": 100960105, "life_expect": 47.464, "fertility": 6.246}, {"year": 2000, "country": "Nigeria", "cluster": 2, "pop": 114306700, "life_expect": 46.608, "fertility": 5.845}, {"year": 2005, "country": "Nigeria", "cluster": 2, "pop": 128765768, "life_expect": 46.859, "fertility": 5.322}, {"year": 1955, "country": "Norway", "cluster": 1, "pop": 3427409, "life_expect": 73.44, "fertility": 2.8369999999999997}, {"year": 1960, "country": "Norway", "cluster": 1, "pop": 3581239, "life_expect": 73.47, "fertility": 2.898}, {"year": 1965, "country": "Norway", "cluster": 1, "pop": 3723153, "life_expect": 74.08, "fertility": 2.719}, {"year": 1970, "country": "Norway", "cluster": 1, "pop": 3877386, "life_expect": 74.34, "fertility": 2.248}, {"year": 1975, "country": "Norway", "cluster": 1, "pop": 4007313, "life_expect": 75.37, "fertility": 1.81}, {"year": 1980, "country": "Norway", "cluster": 1, "pop": 4085620, "life_expect": 75.97, "fertility": 1.687}, {"year": 1985, "country": "Norway", "cluster": 1, "pop": 4152419, "life_expect": 75.89, "fertility": 1.8}, {"year": 1990, "country": "Norway", "cluster": 1, "pop": 4242006, "life_expect": 77.32, "fertility": 1.8860000000000001}, {"year": 1995, "country": "Norway", "cluster": 1, "pop": 4359101, "life_expect": 78.32, "fertility": 1.853}, {"year": 2000, "country": "Norway", "cluster": 1, "pop": 4492400, "life_expect": 79.05, "fertility": 1.8010000000000002}, {"year": 2005, "country": "Norway", "cluster": 1, "pop": 4593041, "life_expect": 80.196, "fertility": 1.8479999999999999}, {"year": 1955, "country": "Pakistan", "cluster": 0, "pop": 44434445, "life_expect": 45.557, "fertility": 6.6}, {"year": 1960, "country": "Pakistan", "cluster": 0, "pop": 50386898, "life_expect": 47.67, "fertility": 6.6}, {"year": 1965, "country": "Pakistan", "cluster": 0, "pop": 57494940, "life_expect": 49.8, "fertility": 6.6}, {"year": 1970, "country": "Pakistan", "cluster": 0, "pop": 65705964, "life_expect": 51.929, "fertility": 6.6}, {"year": 1975, "country": "Pakistan", "cluster": 0, "pop": 74711541, "life_expect": 54.043, "fertility": 6.6}, {"year": 1980, "country": "Pakistan", "cluster": 0, "pop": 85219117, "life_expect": 56.158, "fertility": 6.6}, {"year": 1985, "country": "Pakistan", "cluster": 0, "pop": 99060352, "life_expect": 58.245, "fertility": 6.66}, {"year": 1990, "country": "Pakistan", "cluster": 0, "pop": 114578478, "life_expect": 60.838, "fertility": 5.8}, {"year": 1995, "country": "Pakistan", "cluster": 0, "pop": 128690285, "life_expect": 61.818, "fertility": 4.9596}, {"year": 2000, "country": "Pakistan", "cluster": 0, "pop": 146342958, "life_expect": 63.61, "fertility": 3.9936}, {"year": 2005, "country": "Pakistan", "cluster": 0, "pop": 162419946, "life_expect": 65.483, "fertility": 3.5211}, {"year": 1955, "country": "Peru", "cluster": 3, "pop": 8671500, "life_expect": 46.263, "fertility": 6.853}, {"year": 1960, "country": "Peru", "cluster": 3, "pop": 9931000, "life_expect": 49.096, "fertility": 6.853}, {"year": 1965, "country": "Peru", "cluster": 3, "pop": 11467300, "life_expect": 51.445, "fertility": 6.5600000000000005}, {"year": 1970, "country": "Peru", "cluster": 3, "pop": 13192800, "life_expect": 55.448, "fertility": 6.0}, {"year": 1975, "country": "Peru", "cluster": 3, "pop": 15161199, "life_expect": 58.447, "fertility": 5.378}, {"year": 1980, "country": "Peru", "cluster": 3, "pop": 17295298, "life_expect": 61.406, "fertility": 4.65}, {"year": 1985, "country": "Peru", "cluster": 3, "pop": 19348926, "life_expect": 64.134, "fertility": 4.1}, {"year": 1990, "country": "Peru", "cluster": 3, "pop": 21511443, "life_expect": 66.458, "fertility": 3.7}, {"year": 1995, "country": "Peru", "cluster": 3, "pop": 23846388, "life_expect": 68.386, "fertility": 3.0995}, {"year": 2000, "country": "Peru", "cluster": 3, "pop": 25979722, "life_expect": 69.906, "fertility": 2.7005}, {"year": 2005, "country": "Peru", "cluster": 3, "pop": 27925628, "life_expect": 71.421, "fertility": 2.5065}, {"year": 1955, "country": "Philippines", "cluster": 4, "pop": 24553055, "life_expect": 51.334, "fertility": 7.13}, {"year": 1960, "country": "Philippines", "cluster": 4, "pop": 28528939, "life_expect": 54.757, "fertility": 6.85}, {"year": 1965, "country": "Philippines", "cluster": 4, "pop": 33267569, "life_expect": 56.393, "fertility": 6.5}, {"year": 1970, "country": "Philippines", "cluster": 4, "pop": 38603696, "life_expect": 58.065, "fertility": 6.0}, {"year": 1975, "country": "Philippines", "cluster": 4, "pop": 44336842, "life_expect": 60.06, "fertility": 5.5}, {"year": 1980, "country": "Philippines", "cluster": 4, "pop": 50940182, "life_expect": 62.082, "fertility": 4.95}, {"year": 1985, "country": "Philippines", "cluster": 4, "pop": 57288037, "life_expect": 64.151, "fertility": 4.55}, {"year": 1990, "country": "Philippines", "cluster": 4, "pop": 64318120, "life_expect": 66.458, "fertility": 4.143}, {"year": 1995, "country": "Philippines", "cluster": 4, "pop": 71717437, "life_expect": 68.564, "fertility": 3.7248}, {"year": 2000, "country": "Philippines", "cluster": 4, "pop": 79739825, "life_expect": 70.303, "fertility": 3.5436}, {"year": 2005, "country": "Philippines", "cluster": 4, "pop": 87857473, "life_expect": 71.688, "fertility": 3.2327}, {"year": 1955, "country": "Poland", "cluster": 1, "pop": 27220668, "life_expect": 65.77, "fertility": 3.29}, {"year": 1960, "country": "Poland", "cluster": 1, "pop": 29589842, "life_expect": 67.64, "fertility": 2.65}, {"year": 1965, "country": "Poland", "cluster": 1, "pop": 31262358, "life_expect": 69.61, "fertility": 2.27}, {"year": 1970, "country": "Poland", "cluster": 1, "pop": 32526000, "life_expect": 70.85, "fertility": 2.25}, {"year": 1975, "country": "Poland", "cluster": 1, "pop": 33969240, "life_expect": 70.67, "fertility": 2.26}, {"year": 1980, "country": "Poland", "cluster": 1, "pop": 35578016, "life_expect": 71.32, "fertility": 2.33}, {"year": 1985, "country": "Poland", "cluster": 1, "pop": 37225792, "life_expect": 70.98, "fertility": 2.15}, {"year": 1990, "country": "Poland", "cluster": 1, "pop": 38119408, "life_expect": 70.99, "fertility": 1.8900000000000001}, {"year": 1995, "country": "Poland", "cluster": 1, "pop": 38600642, "life_expect": 72.75, "fertility": 1.478}, {"year": 2000, "country": "Poland", "cluster": 1, "pop": 38654164, "life_expect": 74.67, "fertility": 1.251}, {"year": 2005, "country": "Poland", "cluster": 1, "pop": 38557984, "life_expect": 75.563, "fertility": 1.227}, {"year": 1955, "country": "Portugal", "cluster": 1, "pop": 8692600, "life_expect": 61.51, "fertility": 3.03}, {"year": 1960, "country": "Portugal", "cluster": 1, "pop": 9036700, "life_expect": 64.39, "fertility": 3.074}, {"year": 1965, "country": "Portugal", "cluster": 1, "pop": 9128850, "life_expect": 66.6, "fertility": 2.849}, {"year": 1970, "country": "Portugal", "cluster": 1, "pop": 9044200, "life_expect": 69.26, "fertility": 2.748}, {"year": 1975, "country": "Portugal", "cluster": 1, "pop": 9411090, "life_expect": 70.41, "fertility": 2.41}, {"year": 1980, "country": "Portugal", "cluster": 1, "pop": 9777800, "life_expect": 72.77, "fertility": 1.982}, {"year": 1985, "country": "Portugal", "cluster": 1, "pop": 9897192, "life_expect": 74.06, "fertility": 1.5939999999999999}, {"year": 1990, "country": "Portugal", "cluster": 1, "pop": 9922689, "life_expect": 74.86, "fertility": 1.516}, {"year": 1995, "country": "Portugal", "cluster": 1, "pop": 10065543, "life_expect": 75.97, "fertility": 1.475}, {"year": 2000, "country": "Portugal", "cluster": 1, "pop": 10335597, "life_expect": 77.29, "fertility": 1.454}, {"year": 2005, "country": "Portugal", "cluster": 1, "pop": 10566212, "life_expect": 78.098, "fertility": 1.455}, {"year": 1955, "country": "Rwanda", "cluster": 2, "pop": 2698272, "life_expect": 41.5, "fertility": 8.0}, {"year": 1960, "country": "Rwanda", "cluster": 2, "pop": 3031804, "life_expect": 43.0, "fertility": 8.1}, {"year": 1965, "country": "Rwanda", "cluster": 2, "pop": 3264640, "life_expect": 44.1, "fertility": 8.2}, {"year": 1970, "country": "Rwanda", "cluster": 2, "pop": 3769171, "life_expect": 44.6, "fertility": 8.29}, {"year": 1975, "country": "Rwanda", "cluster": 2, "pop": 4356863, "life_expect": 45.0, "fertility": 8.492}, {"year": 1980, "country": "Rwanda", "cluster": 2, "pop": 5138689, "life_expect": 46.218, "fertility": 8.5}, {"year": 1985, "country": "Rwanda", "cluster": 2, "pop": 6009833, "life_expect": 44.02, "fertility": 8.25}, {"year": 1990, "country": "Rwanda", "cluster": 2, "pop": 6923738, "life_expect": 23.599, "fertility": 6.9}, {"year": 1995, "country": "Rwanda", "cluster": 2, "pop": 5706501, "life_expect": 36.087, "fertility": 6.0993}, {"year": 2000, "country": "Rwanda", "cluster": 2, "pop": 7507056, "life_expect": 43.413, "fertility": 6.01}, {"year": 2005, "country": "Rwanda", "cluster": 2, "pop": 8440820, "life_expect": 46.242, "fertility": 5.9169}, {"year": 1955, "country": "Saudi Arabia", "cluster": 5, "pop": 4243218, "life_expect": 42.868, "fertility": 7.175}, {"year": 1960, "country": "Saudi Arabia", "cluster": 5, "pop": 4718301, "life_expect": 45.914, "fertility": 7.257}, {"year": 1965, "country": "Saudi Arabia", "cluster": 5, "pop": 5327432, "life_expect": 49.901, "fertility": 7.257}, {"year": 1970, "country": "Saudi Arabia", "cluster": 5, "pop": 6109051, "life_expect": 53.886, "fertility": 7.298}, {"year": 1975, "country": "Saudi Arabia", "cluster": 5, "pop": 7204820, "life_expect": 58.69, "fertility": 7.2780000000000005}, {"year": 1980, "country": "Saudi Arabia", "cluster": 5, "pop": 9999161, "life_expect": 63.012, "fertility": 7.015}, {"year": 1985, "country": "Saudi Arabia", "cluster": 5, "pop": 13330067, "life_expect": 66.295, "fertility": 6.217}, {"year": 1990, "country": "Saudi Arabia", "cluster": 5, "pop": 16060761, "life_expect": 68.768, "fertility": 5.446}, {"year": 1995, "country": "Saudi Arabia", "cluster": 5, "pop": 19966998, "life_expect": 70.533, "fertility": 4.621}, {"year": 2000, "country": "Saudi Arabia", "cluster": 5, "pop": 23153090, "life_expect": 71.626, "fertility": 3.81}, {"year": 2005, "country": "Saudi Arabia", "cluster": 5, "pop": 26417599, "life_expect": 72.777, "fertility": 3.352}, {"year": 1955, "country": "South Africa", "cluster": 2, "pop": 15368551, "life_expect": 47.985, "fertility": 6.5}, {"year": 1960, "country": "South Africa", "cluster": 2, "pop": 17416653, "life_expect": 49.951, "fertility": 6.3}, {"year": 1965, "country": "South Africa", "cluster": 2, "pop": 19898242, "life_expect": 51.927, "fertility": 5.7}, {"year": 1970, "country": "South Africa", "cluster": 2, "pop": 22739921, "life_expect": 53.696, "fertility": 5.47}, {"year": 1975, "country": "South Africa", "cluster": 2, "pop": 25815144, "life_expect": 55.527, "fertility": 5.0}, {"year": 1980, "country": "South Africa", "cluster": 2, "pop": 29251588, "life_expect": 58.161, "fertility": 4.556}, {"year": 1985, "country": "South Africa", "cluster": 2, "pop": 34254092, "life_expect": 60.834, "fertility": 3.85}, {"year": 1990, "country": "South Africa", "cluster": 2, "pop": 38391094, "life_expect": 61.888, "fertility": 3.343}, {"year": 1995, "country": "South Africa", "cluster": 2, "pop": 41779149, "life_expect": 60.236, "fertility": 2.954}, {"year": 2000, "country": "South Africa", "cluster": 2, "pop": 44066197, "life_expect": 53.365, "fertility": 2.802}, {"year": 2005, "country": "South Africa", "cluster": 2, "pop": 44344136, "life_expect": 49.339, "fertility": 2.637}, {"year": 1955, "country": "Spain", "cluster": 1, "pop": 29318745, "life_expect": 66.66, "fertility": 2.75}, {"year": 1960, "country": "Spain", "cluster": 1, "pop": 30641187, "life_expect": 69.69, "fertility": 2.89}, {"year": 1965, "country": "Spain", "cluster": 1, "pop": 32084511, "life_expect": 71.44, "fertility": 2.92}, {"year": 1970, "country": "Spain", "cluster": 1, "pop": 33876479, "life_expect": 73.06, "fertility": 2.86}, {"year": 1975, "country": "Spain", "cluster": 1, "pop": 35563535, "life_expect": 74.39, "fertility": 2.5700000000000003}, {"year": 1980, "country": "Spain", "cluster": 1, "pop": 37488360, "life_expect": 76.3, "fertility": 1.8900000000000001}, {"year": 1985, "country": "Spain", "cluster": 1, "pop": 38534853, "life_expect": 76.9, "fertility": 1.48}, {"year": 1990, "country": "Spain", "cluster": 1, "pop": 39350769, "life_expect": 77.57, "fertility": 1.27}, {"year": 1995, "country": "Spain", "cluster": 1, "pop": 39749715, "life_expect": 78.77, "fertility": 1.182}, {"year": 2000, "country": "Spain", "cluster": 1, "pop": 40016081, "life_expect": 79.78, "fertility": 1.287}, {"year": 2005, "country": "Spain", "cluster": 1, "pop": 40341462, "life_expect": 80.941, "fertility": 1.409}, {"year": 1955, "country": "Switzerland", "cluster": 1, "pop": 4980000, "life_expect": 70.56, "fertility": 2.34}, {"year": 1960, "country": "Switzerland", "cluster": 1, "pop": 5362000, "life_expect": 71.32, "fertility": 2.51}, {"year": 1965, "country": "Switzerland", "cluster": 1, "pop": 5943000, "life_expect": 72.77, "fertility": 2.27}, {"year": 1970, "country": "Switzerland", "cluster": 1, "pop": 6267000, "life_expect": 73.78, "fertility": 1.82}, {"year": 1975, "country": "Switzerland", "cluster": 1, "pop": 6403500, "life_expect": 75.39, "fertility": 1.53}, {"year": 1980, "country": "Switzerland", "cluster": 1, "pop": 6385229, "life_expect": 76.21, "fertility": 1.53}, {"year": 1985, "country": "Switzerland", "cluster": 1, "pop": 6563770, "life_expect": 77.41, "fertility": 1.53}, {"year": 1990, "country": "Switzerland", "cluster": 1, "pop": 6836626, "life_expect": 78.03, "fertility": 1.54}, {"year": 1995, "country": "Switzerland", "cluster": 1, "pop": 7157106, "life_expect": 79.37, "fertility": 1.47}, {"year": 2000, "country": "Switzerland", "cluster": 1, "pop": 7266920, "life_expect": 80.62, "fertility": 1.415}, {"year": 2005, "country": "Switzerland", "cluster": 1, "pop": 7489370, "life_expect": 81.701, "fertility": 1.42}, {"year": 1955, "country": "Turkey", "cluster": 1, "pop": 24144571, "life_expect": 48.079, "fertility": 6.6}, {"year": 1960, "country": "Turkey", "cluster": 1, "pop": 28217122, "life_expect": 52.098, "fertility": 6.19}, {"year": 1965, "country": "Turkey", "cluster": 1, "pop": 31950718, "life_expect": 54.336, "fertility": 5.7}, {"year": 1970, "country": "Turkey", "cluster": 1, "pop": 35758382, "life_expect": 57.005, "fertility": 5.3}, {"year": 1975, "country": "Turkey", "cluster": 1, "pop": 40529798, "life_expect": 59.507, "fertility": 4.715}, {"year": 1980, "country": "Turkey", "cluster": 1, "pop": 45120802, "life_expect": 61.036, "fertility": 4.15}, {"year": 1985, "country": "Turkey", "cluster": 1, "pop": 50669003, "life_expect": 63.108, "fertility": 3.276}, {"year": 1990, "country": "Turkey", "cluster": 1, "pop": 56084632, "life_expect": 66.146, "fertility": 2.904}, {"year": 1995, "country": "Turkey", "cluster": 1, "pop": 61188984, "life_expect": 68.835, "fertility": 2.574}, {"year": 2000, "country": "Turkey", "cluster": 1, "pop": 65666677, "life_expect": 70.845, "fertility": 2.23}, {"year": 2005, "country": "Turkey", "cluster": 1, "pop": 69660559, "life_expect": 71.777, "fertility": 2.143}, {"year": 1955, "country": "United Kingdom", "cluster": 1, "pop": 50946000, "life_expect": 70.42, "fertility": 2.49}, {"year": 1960, "country": "United Kingdom", "cluster": 1, "pop": 52372000, "life_expect": 70.76, "fertility": 2.81}, {"year": 1965, "country": "United Kingdom", "cluster": 1, "pop": 54350000, "life_expect": 71.36, "fertility": 2.52}, {"year": 1970, "country": "United Kingdom", "cluster": 1, "pop": 55632000, "life_expect": 72.01, "fertility": 2.04}, {"year": 1975, "country": "United Kingdom", "cluster": 1, "pop": 56215000, "life_expect": 72.76, "fertility": 1.72}, {"year": 1980, "country": "United Kingdom", "cluster": 1, "pop": 56314000, "life_expect": 74.04, "fertility": 1.8}, {"year": 1985, "country": "United Kingdom", "cluster": 1, "pop": 56620240, "life_expect": 75.007, "fertility": 1.81}, {"year": 1990, "country": "United Kingdom", "cluster": 1, "pop": 57493307, "life_expect": 76.42, "fertility": 1.78}, {"year": 1995, "country": "United Kingdom", "cluster": 1, "pop": 58426014, "life_expect": 77.218, "fertility": 1.7000000000000002}, {"year": 2000, "country": "United Kingdom", "cluster": 1, "pop": 59522468, "life_expect": 78.471, "fertility": 1.695}, {"year": 2005, "country": "United Kingdom", "cluster": 1, "pop": 60441457, "life_expect": 79.425, "fertility": 1.815}, {"year": 1955, "country": "United States", "cluster": 3, "pop": 165931000, "life_expect": 69.49, "fertility": 3.706}, {"year": 1960, "country": "United States", "cluster": 3, "pop": 180671000, "life_expect": 70.21, "fertility": 3.314}, {"year": 1965, "country": "United States", "cluster": 3, "pop": 194303000, "life_expect": 70.76, "fertility": 2.545}, {"year": 1970, "country": "United States", "cluster": 3, "pop": 205052000, "life_expect": 71.34, "fertility": 2.016}, {"year": 1975, "country": "United States", "cluster": 3, "pop": 215973000, "life_expect": 73.38, "fertility": 1.788}, {"year": 1980, "country": "United States", "cluster": 3, "pop": 227726463, "life_expect": 74.65, "fertility": 1.8250000000000002}, {"year": 1985, "country": "United States", "cluster": 3, "pop": 238466283, "life_expect": 75.02, "fertility": 1.924}, {"year": 1990, "country": "United States", "cluster": 3, "pop": 250131894, "life_expect": 76.09, "fertility": 2.025}, {"year": 1995, "country": "United States", "cluster": 3, "pop": 266557091, "life_expect": 76.81, "fertility": 1.994}, {"year": 2000, "country": "United States", "cluster": 3, "pop": 282338631, "life_expect": 77.31, "fertility": 2.038}, {"year": 2005, "country": "United States", "cluster": 3, "pop": 295734134, "life_expect": 78.242, "fertility": 2.054}, {"year": 1955, "country": "Venezuela", "cluster": 3, "pop": 6170497, "life_expect": 57.907, "fertility": 6.4585}, {"year": 1960, "country": "Venezuela", "cluster": 3, "pop": 7556483, "life_expect": 60.77, "fertility": 6.657}, {"year": 1965, "country": "Venezuela", "cluster": 3, "pop": 9067735, "life_expect": 63.479, "fertility": 5.9045000000000005}, {"year": 1970, "country": "Venezuela", "cluster": 3, "pop": 10758017, "life_expect": 65.712, "fertility": 4.941}, {"year": 1975, "country": "Venezuela", "cluster": 3, "pop": 12674987, "life_expect": 67.456, "fertility": 4.4685}, {"year": 1980, "country": "Venezuela", "cluster": 3, "pop": 14767890, "life_expect": 68.557, "fertility": 3.957}, {"year": 1985, "country": "Venezuela", "cluster": 3, "pop": 16997509, "life_expect": 70.19, "fertility": 3.6485000000000003}, {"year": 1990, "country": "Venezuela", "cluster": 3, "pop": 19325222, "life_expect": 71.15, "fertility": 3.25}, {"year": 1995, "country": "Venezuela", "cluster": 3, "pop": 21555902, "life_expect": 72.146, "fertility": 2.9415}, {"year": 2000, "country": "Venezuela", "cluster": 3, "pop": 23542649, "life_expect": 72.766, "fertility": 2.723}, {"year": 2005, "country": "Venezuela", "cluster": 3, "pop": 25375281, "life_expect": 73.747, "fertility": 2.547}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<p>国ごとに興味深い変動が見られますが、全体としては家族あたりの子どもの数が時間とともに減少する傾向が確認できます。また、幅を400ピクセルにカスタマイズした点にも注目してください。<em>幅を変更または削除して、どのように変化するか試してみてください！</em></p>
<p>次に、デフォルトのマークパラメータを変更してプロットをカスタマイズします。<code class="docutils literal notranslate"><span class="pre">strokeWidth</span></code>を設定して線の太さを決定し、<code class="docutils literal notranslate"><span class="pre">opacity</span></code>で透明度を追加することができます。デフォルトでは、<code class="docutils literal notranslate"><span class="pre">line</span></code>マークはデータポイントを直線で接続しますが、場合によっては線を滑らかにしたいこともあります。データポイントを接続する際の補間方法は、<code class="docutils literal notranslate"><span class="pre">interpolate</span></code>マークパラメータを設定することで調整できます。ここでは、滑らかな線を提供すると同時に補間によって「偽の」最小値や最大値が生成されないよう保証する<code class="docutils literal notranslate"><span class="pre">'monotone'</span></code>補間を使用します。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">mark_line</span><span class="p">(</span>
    <span class="n">strokeWidth</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
    <span class="n">opacity</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
    <span class="n">interpolate</span><span class="o">=</span><span class="s1">&#39;monotone&#39;</span>
<span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;year:O&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;fertility:Q&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s1">&#39;country:N&#39;</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">None</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Tooltip</span><span class="p">(</span><span class="s1">&#39;country:N&#39;</span><span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">400</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-90d1c205f3ab40ba81980ea546a565c9.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-90d1c205f3ab40ba81980ea546a565c9.vega-embed details,
  #altair-viz-90d1c205f3ab40ba81980ea546a565c9.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-90d1c205f3ab40ba81980ea546a565c9"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-90d1c205f3ab40ba81980ea546a565c9") {
      outputDiv = document.getElementById("altair-viz-90d1c205f3ab40ba81980ea546a565c9");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.16.3?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.16.3"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-89be1acdd14c7effd56f4dd0fabf92c3"}, "mark": {"type": "line", "interpolate": "monotone", "opacity": 0.5, "strokeWidth": 3}, "encoding": {"color": {"field": "country", "legend": null, "type": "nominal"}, "tooltip": {"field": "country", "type": "nominal"}, "x": {"field": "year", "type": "ordinal"}, "y": {"field": "fertility", "type": "quantitative"}}, "width": 400, "$schema": "https://vega.github.io/schema/vega-lite/v5.16.3.json", "datasets": {"data-89be1acdd14c7effd56f4dd0fabf92c3": [{"year": 1955, "country": "Afghanistan", "cluster": 0, "pop": 8891209, "life_expect": 30.332, "fertility": 7.7}, {"year": 1960, "country": "Afghanistan", "cluster": 0, "pop": 9829450, "life_expect": 31.997, "fertility": 7.7}, {"year": 1965, "country": "Afghanistan", "cluster": 0, "pop": 10997885, "life_expect": 34.02, "fertility": 7.7}, {"year": 1970, "country": "Afghanistan", "cluster": 0, "pop": 12430623, "life_expect": 36.088, "fertility": 7.7}, {"year": 1975, "country": "Afghanistan", "cluster": 0, "pop": 14132019, "life_expect": 38.438, "fertility": 7.7}, {"year": 1980, "country": "Afghanistan", "cluster": 0, "pop": 15112149, "life_expect": 39.854, "fertility": 7.8}, {"year": 1985, "country": "Afghanistan", "cluster": 0, "pop": 13796928, "life_expect": 40.822, "fertility": 7.9}, {"year": 1990, "country": "Afghanistan", "cluster": 0, "pop": 14669339, "life_expect": 41.674, "fertility": 8.0}, {"year": 1995, "country": "Afghanistan", "cluster": 0, "pop": 20881480, "life_expect": 41.763, "fertility": 8.0}, {"year": 2000, "country": "Afghanistan", "cluster": 0, "pop": 23898198, "life_expect": 42.129, "fertility": 7.4792}, {"year": 2005, "country": "Afghanistan", "cluster": 0, "pop": 29928987, "life_expect": 43.828, "fertility": 7.0685}, {"year": 1955, "country": "Argentina", "cluster": 3, "pop": 18927821, "life_expect": 64.399, "fertility": 3.1265}, {"year": 1960, "country": "Argentina", "cluster": 3, "pop": 20616009, "life_expect": 65.142, "fertility": 3.0895}, {"year": 1965, "country": "Argentina", "cluster": 3, "pop": 22283100, "life_expect": 65.634, "fertility": 3.049}, {"year": 1970, "country": "Argentina", "cluster": 3, "pop": 23962313, "life_expect": 67.065, "fertility": 3.1455}, {"year": 1975, "country": "Argentina", "cluster": 3, "pop": 26081880, "life_expect": 68.481, "fertility": 3.44}, {"year": 1980, "country": "Argentina", "cluster": 3, "pop": 28369799, "life_expect": 69.942, "fertility": 3.15}, {"year": 1985, "country": "Argentina", "cluster": 3, "pop": 30675059, "life_expect": 70.774, "fertility": 3.053}, {"year": 1990, "country": "Argentina", "cluster": 3, "pop": 33022202, "life_expect": 71.868, "fertility": 2.9}, {"year": 1995, "country": "Argentina", "cluster": 3, "pop": 35311049, "life_expect": 73.275, "fertility": 2.63}, {"year": 2000, "country": "Argentina", "cluster": 3, "pop": 37497728, "life_expect": 74.34, "fertility": 2.35}, {"year": 2005, "country": "Argentina", "cluster": 3, "pop": 39537943, "life_expect": 75.32, "fertility": 2.254}, {"year": 1955, "country": "Aruba", "cluster": 3, "pop": 53865, "life_expect": 64.381, "fertility": 5.15}, {"year": 1960, "country": "Aruba", "cluster": 3, "pop": 57203, "life_expect": 66.606, "fertility": 4.399}, {"year": 1965, "country": "Aruba", "cluster": 3, "pop": 59020, "life_expect": 68.336, "fertility": 3.301}, {"year": 1970, "country": "Aruba", "cluster": 3, "pop": 59039, "life_expect": 70.941, "fertility": 2.651}, {"year": 1975, "country": "Aruba", "cluster": 3, "pop": 59390, "life_expect": 71.83, "fertility": 2.45}, {"year": 1980, "country": "Aruba", "cluster": 3, "pop": 60266, "life_expect": 74.116, "fertility": 2.358}, {"year": 1985, "country": "Aruba", "cluster": 3, "pop": 64129, "life_expect": 74.494, "fertility": 2.3}, {"year": 1990, "country": "Aruba", "cluster": 3, "pop": 66653, "life_expect": 74.108, "fertility": 2.2800000000000002}, {"year": 1995, "country": "Aruba", "cluster": 3, "pop": 67836, "life_expect": 73.011, "fertility": 2.208}, {"year": 2000, "country": "Aruba", "cluster": 3, "pop": 69539, "life_expect": 73.451, "fertility": 2.124}, {"year": 2005, "country": "Aruba", "cluster": 3, "pop": 71566, "life_expect": 74.239, "fertility": 2.04}, {"year": 1955, "country": "Australia", "cluster": 4, "pop": 9277087, "life_expect": 70.33, "fertility": 3.406}, {"year": 1960, "country": "Australia", "cluster": 4, "pop": 10361273, "life_expect": 70.93, "fertility": 3.274}, {"year": 1965, "country": "Australia", "cluster": 4, "pop": 11439384, "life_expect": 71.1, "fertility": 2.871}, {"year": 1970, "country": "Australia", "cluster": 4, "pop": 12660160, "life_expect": 71.93, "fertility": 2.535}, {"year": 1975, "country": "Australia", "cluster": 4, "pop": 13771400, "life_expect": 73.49, "fertility": 1.9889999999999999}, {"year": 1980, "country": "Australia", "cluster": 4, "pop": 14615900, "life_expect": 74.74, "fertility": 1.907}, {"year": 1985, "country": "Australia", "cluster": 4, "pop": 15788300, "life_expect": 76.32, "fertility": 1.859}, {"year": 1990, "country": "Australia", "cluster": 4, "pop": 17022133, "life_expect": 77.56, "fertility": 1.8599999999999999}, {"year": 1995, "country": "Australia", "cluster": 4, "pop": 18116171, "life_expect": 78.83, "fertility": 1.776}, {"year": 2000, "country": "Australia", "cluster": 4, "pop": 19164620, "life_expect": 80.37, "fertility": 1.756}, {"year": 2005, "country": "Australia", "cluster": 4, "pop": 20090437, "life_expect": 81.235, "fertility": 1.788}, {"year": 1955, "country": "Austria", "cluster": 1, "pop": 6946885, "life_expect": 67.48, "fertility": 2.52}, {"year": 1960, "country": "Austria", "cluster": 1, "pop": 7047437, "life_expect": 69.54, "fertility": 2.7800000000000002}, {"year": 1965, "country": "Austria", "cluster": 1, "pop": 7270889, "life_expect": 70.14, "fertility": 2.5300000000000002}, {"year": 1970, "country": "Austria", "cluster": 1, "pop": 7467086, "life_expect": 70.63, "fertility": 2.02}, {"year": 1975, "country": "Austria", "cluster": 1, "pop": 7578903, "life_expect": 72.17, "fertility": 1.6400000000000001}, {"year": 1980, "country": "Austria", "cluster": 1, "pop": 7549433, "life_expect": 73.18, "fertility": 1.62}, {"year": 1985, "country": "Austria", "cluster": 1, "pop": 7559776, "life_expect": 74.94, "fertility": 1.45}, {"year": 1990, "country": "Austria", "cluster": 1, "pop": 7722953, "life_expect": 76.04, "fertility": 1.47}, {"year": 1995, "country": "Austria", "cluster": 1, "pop": 8047433, "life_expect": 77.51, "fertility": 1.388}, {"year": 2000, "country": "Austria", "cluster": 1, "pop": 8113413, "life_expect": 78.98, "fertility": 1.3820000000000001}, {"year": 2005, "country": "Austria", "cluster": 1, "pop": 8184691, "life_expect": 79.829, "fertility": 1.42}, {"year": 1955, "country": "Bahamas", "cluster": 3, "pop": 87138, "life_expect": 62.405, "fertility": 4.305}, {"year": 1960, "country": "Bahamas", "cluster": 3, "pop": 112234, "life_expect": 64.209, "fertility": 4.503}, {"year": 1965, "country": "Bahamas", "cluster": 3, "pop": 139205, "life_expect": 65.795, "fertility": 3.794}, {"year": 1970, "country": "Bahamas", "cluster": 3, "pop": 170323, "life_expect": 66.515, "fertility": 3.444}, {"year": 1975, "country": "Bahamas", "cluster": 3, "pop": 189139, "life_expect": 67.199, "fertility": 3.221}, {"year": 1980, "country": "Bahamas", "cluster": 3, "pop": 209944, "life_expect": 67.874, "fertility": 3.16}, {"year": 1985, "country": "Bahamas", "cluster": 3, "pop": 234988, "life_expect": 69.524, "fertility": 2.62}, {"year": 1990, "country": "Bahamas", "cluster": 3, "pop": 257253, "life_expect": 69.171, "fertility": 2.6}, {"year": 1995, "country": "Bahamas", "cluster": 3, "pop": 275303, "life_expect": 68.472, "fertility": 2.4}, {"year": 2000, "country": "Bahamas", "cluster": 3, "pop": 290075, "life_expect": 71.068, "fertility": 2.1111}, {"year": 2005, "country": "Bahamas", "cluster": 3, "pop": 301790, "life_expect": 73.495, "fertility": 2.0221}, {"year": 1955, "country": "Bangladesh", "cluster": 0, "pop": 49601520, "life_expect": 39.348, "fertility": 6.76}, {"year": 1960, "country": "Bangladesh", "cluster": 0, "pop": 54621538, "life_expect": 41.216, "fertility": 6.85}, {"year": 1965, "country": "Bangladesh", "cluster": 0, "pop": 60332117, "life_expect": 43.453, "fertility": 6.6}, {"year": 1970, "country": "Bangladesh", "cluster": 0, "pop": 67402621, "life_expect": 45.252, "fertility": 6.15}, {"year": 1975, "country": "Bangladesh", "cluster": 0, "pop": 76253310, "life_expect": 46.923, "fertility": 5.6}, {"year": 1980, "country": "Bangladesh", "cluster": 0, "pop": 88076996, "life_expect": 50.009, "fertility": 5.25}, {"year": 1985, "country": "Bangladesh", "cluster": 0, "pop": 99752733, "life_expect": 52.819, "fertility": 4.629}, {"year": 1990, "country": "Bangladesh", "cluster": 0, "pop": 109896945, "life_expect": 56.018, "fertility": 4.117}, {"year": 1995, "country": "Bangladesh", "cluster": 0, "pop": 119186448, "life_expect": 59.412, "fertility": 3.5042999999999997}, {"year": 2000, "country": "Bangladesh", "cluster": 0, "pop": 130406594, "life_expect": 62.013, "fertility": 3.224}, {"year": 2005, "country": "Bangladesh", "cluster": 0, "pop": 144319628, "life_expect": 64.062, "fertility": 2.826}, {"year": 1955, "country": "Barbados", "cluster": 3, "pop": 227255, "life_expect": 62.57, "fertility": 4.67}, {"year": 1960, "country": "Barbados", "cluster": 3, "pop": 232339, "life_expect": 65.87, "fertility": 4.26}, {"year": 1965, "country": "Barbados", "cluster": 3, "pop": 234980, "life_expect": 67.62, "fertility": 3.45}, {"year": 1970, "country": "Barbados", "cluster": 3, "pop": 238756, "life_expect": 69.42, "fertility": 2.74}, {"year": 1975, "country": "Barbados", "cluster": 3, "pop": 247147, "life_expect": 71.27, "fertility": 2.19}, {"year": 1980, "country": "Barbados", "cluster": 3, "pop": 251966, "life_expect": 72.695, "fertility": 1.92}, {"year": 1985, "country": "Barbados", "cluster": 3, "pop": 257446, "life_expect": 74.027, "fertility": 1.75}, {"year": 1990, "country": "Barbados", "cluster": 3, "pop": 262624, "life_expect": 74.894, "fertility": 1.6}, {"year": 1995, "country": "Barbados", "cluster": 3, "pop": 267907, "life_expect": 74.912, "fertility": 1.5}, {"year": 2000, "country": "Barbados", "cluster": 3, "pop": 273483, "life_expect": 75.97, "fertility": 1.5}, {"year": 2005, "country": "Barbados", "cluster": 3, "pop": 278870, "life_expect": 77.296, "fertility": 1.5}, {"year": 1955, "country": "Belgium", "cluster": 1, "pop": 8868475, "life_expect": 69.24, "fertility": 2.496}, {"year": 1960, "country": "Belgium", "cluster": 1, "pop": 9118700, "life_expect": 70.25, "fertility": 2.644}, {"year": 1965, "country": "Belgium", "cluster": 1, "pop": 9448100, "life_expect": 70.94, "fertility": 2.392}, {"year": 1970, "country": "Belgium", "cluster": 1, "pop": 9637800, "life_expect": 71.44, "fertility": 2.015}, {"year": 1975, "country": "Belgium", "cluster": 1, "pop": 9794800, "life_expect": 72.8, "fertility": 1.705}, {"year": 1980, "country": "Belgium", "cluster": 1, "pop": 9846800, "life_expect": 73.93, "fertility": 1.595}, {"year": 1985, "country": "Belgium", "cluster": 1, "pop": 9858200, "life_expect": 75.35, "fertility": 1.5590000000000002}, {"year": 1990, "country": "Belgium", "cluster": 1, "pop": 9969310, "life_expect": 76.46, "fertility": 1.613}, {"year": 1995, "country": "Belgium", "cluster": 1, "pop": 10155459, "life_expect": 77.53, "fertility": 1.604}, {"year": 2000, "country": "Belgium", "cluster": 1, "pop": 10263618, "life_expect": 78.32, "fertility": 1.638}, {"year": 2005, "country": "Belgium", "cluster": 1, "pop": 10364388, "life_expect": 79.441, "fertility": 1.646}, {"year": 1955, "country": "Bolivia", "cluster": 3, "pop": 3074311, "life_expect": 41.89, "fertility": 6.75}, {"year": 1960, "country": "Bolivia", "cluster": 3, "pop": 3434073, "life_expect": 43.428, "fertility": 6.63}, {"year": 1965, "country": "Bolivia", "cluster": 3, "pop": 3853315, "life_expect": 45.032, "fertility": 6.5600000000000005}, {"year": 1970, "country": "Bolivia", "cluster": 3, "pop": 4346218, "life_expect": 46.714, "fertility": 6.5}, {"year": 1975, "country": "Bolivia", "cluster": 3, "pop": 4914316, "life_expect": 50.023, "fertility": 5.8}, {"year": 1980, "country": "Bolivia", "cluster": 3, "pop": 5441298, "life_expect": 53.859, "fertility": 5.2995}, {"year": 1985, "country": "Bolivia", "cluster": 3, "pop": 5934935, "life_expect": 57.251, "fertility": 5.0}, {"year": 1990, "country": "Bolivia", "cluster": 3, "pop": 6573900, "life_expect": 59.957, "fertility": 4.8}, {"year": 1995, "country": "Bolivia", "cluster": 3, "pop": 7376582, "life_expect": 62.05, "fertility": 4.324}, {"year": 2000, "country": "Bolivia", "cluster": 3, "pop": 8152620, "life_expect": 63.883, "fertility": 3.9585}, {"year": 2005, "country": "Bolivia", "cluster": 3, "pop": 8857870, "life_expect": 65.554, "fertility": 3.5}, {"year": 1955, "country": "Brazil", "cluster": 3, "pop": 61773546, "life_expect": 53.285, "fertility": 6.1501}, {"year": 1960, "country": "Brazil", "cluster": 3, "pop": 71694810, "life_expect": 55.665, "fertility": 6.1501}, {"year": 1965, "country": "Brazil", "cluster": 3, "pop": 83092908, "life_expect": 57.632, "fertility": 5.38}, {"year": 1970, "country": "Brazil", "cluster": 3, "pop": 95684297, "life_expect": 59.504, "fertility": 4.7175}, {"year": 1975, "country": "Brazil", "cluster": 3, "pop": 108823732, "life_expect": 61.489, "fertility": 4.305}, {"year": 1980, "country": "Brazil", "cluster": 3, "pop": 122958132, "life_expect": 63.336, "fertility": 3.8}, {"year": 1985, "country": "Brazil", "cluster": 3, "pop": 137302933, "life_expect": 65.205, "fertility": 3.1}, {"year": 1990, "country": "Brazil", "cluster": 3, "pop": 151083809, "life_expect": 67.057, "fertility": 2.6}, {"year": 1995, "country": "Brazil", "cluster": 3, "pop": 163542501, "life_expect": 69.388, "fertility": 2.45}, {"year": 2000, "country": "Brazil", "cluster": 3, "pop": 175552771, "life_expect": 71.006, "fertility": 2.345}, {"year": 2005, "country": "Brazil", "cluster": 3, "pop": 186112794, "life_expect": 72.39, "fertility": 2.245}, {"year": 1955, "country": "Canada", "cluster": 3, "pop": 16050356, "life_expect": 69.96, "fertility": 3.882}, {"year": 1960, "country": "Canada", "cluster": 3, "pop": 18266765, "life_expect": 71.3, "fertility": 3.675}, {"year": 1965, "country": "Canada", "cluster": 3, "pop": 20071104, "life_expect": 72.13, "fertility": 2.61}, {"year": 1970, "country": "Canada", "cluster": 3, "pop": 21749986, "life_expect": 72.88, "fertility": 1.976}, {"year": 1975, "country": "Canada", "cluster": 3, "pop": 23209200, "life_expect": 74.21, "fertility": 1.734}, {"year": 1980, "country": "Canada", "cluster": 3, "pop": 24593300, "life_expect": 75.76, "fertility": 1.634}, {"year": 1985, "country": "Canada", "cluster": 3, "pop": 25941600, "life_expect": 76.86, "fertility": 1.616}, {"year": 1990, "country": "Canada", "cluster": 3, "pop": 27790600, "life_expect": 77.95, "fertility": 1.694}, {"year": 1995, "country": "Canada", "cluster": 3, "pop": 29619002, "life_expect": 78.61, "fertility": 1.564}, {"year": 2000, "country": "Canada", "cluster": 3, "pop": 31278097, "life_expect": 79.77, "fertility": 1.522}, {"year": 2005, "country": "Canada", "cluster": 3, "pop": 32805041, "life_expect": 80.653, "fertility": 1.5270000000000001}, {"year": 1955, "country": "Chile", "cluster": 3, "pop": 6743269, "life_expect": 56.074, "fertility": 5.486}, {"year": 1960, "country": "Chile", "cluster": 3, "pop": 7585349, "life_expect": 57.924, "fertility": 5.4385}, {"year": 1965, "country": "Chile", "cluster": 3, "pop": 8509950, "life_expect": 60.523, "fertility": 4.4405}, {"year": 1970, "country": "Chile", "cluster": 3, "pop": 9368558, "life_expect": 63.441, "fertility": 3.63}, {"year": 1975, "country": "Chile", "cluster": 3, "pop": 10251542, "life_expect": 67.052, "fertility": 2.803}, {"year": 1980, "country": "Chile", "cluster": 3, "pop": 11093718, "life_expect": 70.565, "fertility": 2.6710000000000003}, {"year": 1985, "country": "Chile", "cluster": 3, "pop": 12066701, "life_expect": 72.492, "fertility": 2.65}, {"year": 1990, "country": "Chile", "cluster": 3, "pop": 13127760, "life_expect": 74.126, "fertility": 2.55}, {"year": 1995, "country": "Chile", "cluster": 3, "pop": 14205449, "life_expect": 75.816, "fertility": 2.21}, {"year": 2000, "country": "Chile", "cluster": 3, "pop": 15153450, "life_expect": 77.86, "fertility": 2.0}, {"year": 2005, "country": "Chile", "cluster": 3, "pop": 15980912, "life_expect": 78.553, "fertility": 1.944}, {"year": 1955, "country": "China", "cluster": 4, "pop": 608655000, "life_expect": 50.54896, "fertility": 5.59}, {"year": 1960, "country": "China", "cluster": 4, "pop": 667070000, "life_expect": 44.50136, "fertility": 5.72}, {"year": 1965, "country": "China", "cluster": 4, "pop": 715185000, "life_expect": 58.38112, "fertility": 6.06}, {"year": 1970, "country": "China", "cluster": 4, "pop": 818315000, "life_expect": 63.11888, "fertility": 4.86}, {"year": 1975, "country": "China", "cluster": 4, "pop": 916395000, "life_expect": 63.96736, "fertility": 3.32}, {"year": 1980, "country": "China", "cluster": 4, "pop": 981235000, "life_expect": 65.525, "fertility": 2.55}, {"year": 1985, "country": "China", "cluster": 4, "pop": 1051040000, "life_expect": 67.274, "fertility": 2.46}, {"year": 1990, "country": "China", "cluster": 4, "pop": 1135185000, "life_expect": 68.69, "fertility": 1.92}, {"year": 1995, "country": "China", "cluster": 4, "pop": 1204855000, "life_expect": 70.426, "fertility": 1.7810000000000001}, {"year": 2000, "country": "China", "cluster": 4, "pop": 1262645000, "life_expect": 72.028, "fertility": 1.7000000000000002}, {"year": 2005, "country": "China", "cluster": 4, "pop": 1303182268, "life_expect": 72.961, "fertility": 1.725}, {"year": 1955, "country": "Colombia", "cluster": 3, "pop": 13588405, "life_expect": 55.118, "fertility": 6.76}, {"year": 1960, "country": "Colombia", "cluster": 3, "pop": 15952727, "life_expect": 57.863, "fertility": 6.76}, {"year": 1965, "country": "Colombia", "cluster": 3, "pop": 18646175, "life_expect": 59.963, "fertility": 6.18}, {"year": 1970, "country": "Colombia", "cluster": 3, "pop": 21429658, "life_expect": 61.623, "fertility": 5.0005}, {"year": 1975, "country": "Colombia", "cluster": 3, "pop": 24114177, "life_expect": 63.837, "fertility": 4.3385}, {"year": 1980, "country": "Colombia", "cluster": 3, "pop": 26582811, "life_expect": 66.653, "fertility": 3.685}, {"year": 1985, "country": "Colombia", "cluster": 3, "pop": 29678395, "life_expect": 67.768, "fertility": 3.172}, {"year": 1990, "country": "Colombia", "cluster": 3, "pop": 32858579, "life_expect": 68.421, "fertility": 2.93005}, {"year": 1995, "country": "Colombia", "cluster": 3, "pop": 36280883, "life_expect": 70.313, "fertility": 2.7}, {"year": 2000, "country": "Colombia", "cluster": 3, "pop": 39685655, "life_expect": 71.682, "fertility": 2.4705}, {"year": 2005, "country": "Colombia", "cluster": 3, "pop": 42954279, "life_expect": 72.889, "fertility": 2.2205}, {"year": 1955, "country": "Costa Rica", "cluster": 3, "pop": 1031782, "life_expect": 60.026, "fertility": 7.1135}, {"year": 1960, "country": "Costa Rica", "cluster": 3, "pop": 1248022, "life_expect": 62.842, "fertility": 7.2245}, {"year": 1965, "country": "Costa Rica", "cluster": 3, "pop": 1487605, "life_expect": 65.424, "fertility": 5.801}, {"year": 1970, "country": "Costa Rica", "cluster": 3, "pop": 1735523, "life_expect": 67.849, "fertility": 4.346}, {"year": 1975, "country": "Costa Rica", "cluster": 3, "pop": 1991580, "life_expect": 70.75, "fertility": 3.7755}, {"year": 1980, "country": "Costa Rica", "cluster": 3, "pop": 2299124, "life_expect": 73.45, "fertility": 3.527}, {"year": 1985, "country": "Costa Rica", "cluster": 3, "pop": 2643808, "life_expect": 74.752, "fertility": 3.374}, {"year": 1990, "country": "Costa Rica", "cluster": 3, "pop": 3027175, "life_expect": 75.713, "fertility": 2.9450000000000003}, {"year": 1995, "country": "Costa Rica", "cluster": 3, "pop": 3383786, "life_expect": 77.26, "fertility": 2.5835}, {"year": 2000, "country": "Costa Rica", "cluster": 3, "pop": 3710558, "life_expect": 78.123, "fertility": 2.2815}, {"year": 2005, "country": "Costa Rica", "cluster": 3, "pop": 4016173, "life_expect": 78.782, "fertility": 2.0985}, {"year": 1955, "country": "Croatia", "cluster": 1, "pop": 3955526, "life_expect": 64.77, "fertility": 2.42}, {"year": 1960, "country": "Croatia", "cluster": 1, "pop": 4036145, "life_expect": 67.13, "fertility": 2.27}, {"year": 1965, "country": "Croatia", "cluster": 1, "pop": 4133313, "life_expect": 68.5, "fertility": 2.09}, {"year": 1970, "country": "Croatia", "cluster": 1, "pop": 4205389, "life_expect": 69.61, "fertility": 1.96}, {"year": 1975, "country": "Croatia", "cluster": 1, "pop": 4255000, "life_expect": 70.64, "fertility": 2.02}, {"year": 1980, "country": "Croatia", "cluster": 1, "pop": 4383000, "life_expect": 70.46, "fertility": 1.96}, {"year": 1985, "country": "Croatia", "cluster": 1, "pop": 4457874, "life_expect": 71.52, "fertility": 1.8399999999999999}, {"year": 1990, "country": "Croatia", "cluster": 1, "pop": 4508347, "life_expect": 72.527, "fertility": 1.52}, {"year": 1995, "country": "Croatia", "cluster": 1, "pop": 4496683, "life_expect": 73.68, "fertility": 1.537}, {"year": 2000, "country": "Croatia", "cluster": 1, "pop": 4410830, "life_expect": 74.876, "fertility": 1.348}, {"year": 2005, "country": "Croatia", "cluster": 1, "pop": 4495904, "life_expect": 75.748, "fertility": 1.346}, {"year": 1955, "country": "Cuba", "cluster": 3, "pop": 6381106, "life_expect": 62.325, "fertility": 3.6995}, {"year": 1960, "country": "Cuba", "cluster": 3, "pop": 7027210, "life_expect": 65.246, "fertility": 4.6805}, {"year": 1965, "country": "Cuba", "cluster": 3, "pop": 7809916, "life_expect": 68.29, "fertility": 4.3}, {"year": 1970, "country": "Cuba", "cluster": 3, "pop": 8542746, "life_expect": 70.723, "fertility": 3.6}, {"year": 1975, "country": "Cuba", "cluster": 3, "pop": 9290074, "life_expect": 72.649, "fertility": 2.15}, {"year": 1980, "country": "Cuba", "cluster": 3, "pop": 9652975, "life_expect": 73.717, "fertility": 1.8495}, {"year": 1985, "country": "Cuba", "cluster": 3, "pop": 10078658, "life_expect": 74.174, "fertility": 1.8495}, {"year": 1990, "country": "Cuba", "cluster": 3, "pop": 10544793, "life_expect": 74.414, "fertility": 1.6505}, {"year": 1995, "country": "Cuba", "cluster": 3, "pop": 10896802, "life_expect": 76.151, "fertility": 1.6095000000000002}, {"year": 2000, "country": "Cuba", "cluster": 3, "pop": 11134273, "life_expect": 77.158, "fertility": 1.63}, {"year": 2005, "country": "Cuba", "cluster": 3, "pop": 11346670, "life_expect": 78.273, "fertility": 1.49}, {"year": 1955, "country": "Dominican Republic", "cluster": 3, "pop": 2737257, "life_expect": 49.828, "fertility": 7.6405}, {"year": 1960, "country": "Dominican Republic", "cluster": 3, "pop": 3231488, "life_expect": 53.459, "fertility": 7.3505}, {"year": 1965, "country": "Dominican Republic", "cluster": 3, "pop": 3805881, "life_expect": 56.751, "fertility": 6.6495}, {"year": 1970, "country": "Dominican Republic", "cluster": 3, "pop": 4422755, "life_expect": 59.631, "fertility": 5.71}, {"year": 1975, "country": "Dominican Republic", "cluster": 3, "pop": 5048499, "life_expect": 61.788, "fertility": 4.76}, {"year": 1980, "country": "Dominican Republic", "cluster": 3, "pop": 5696855, "life_expect": 63.727, "fertility": 4.0}, {"year": 1985, "country": "Dominican Republic", "cluster": 3, "pop": 6377765, "life_expect": 66.046, "fertility": 3.47}, {"year": 1990, "country": "Dominican Republic", "cluster": 3, "pop": 7077651, "life_expect": 68.457, "fertility": 3.1995}, {"year": 1995, "country": "Dominican Republic", "cluster": 3, "pop": 7730224, "life_expect": 69.957, "fertility": 3.05}, {"year": 2000, "country": "Dominican Republic", "cluster": 3, "pop": 8385828, "life_expect": 70.847, "fertility": 2.95}, {"year": 2005, "country": "Dominican Republic", "cluster": 3, "pop": 9049595, "life_expect": 72.235, "fertility": 2.81}, {"year": 1955, "country": "Ecuador", "cluster": 3, "pop": 3842399, "life_expect": 51.356, "fertility": 6.7}, {"year": 1960, "country": "Ecuador", "cluster": 3, "pop": 4415956, "life_expect": 54.64, "fertility": 6.7}, {"year": 1965, "country": "Ecuador", "cluster": 3, "pop": 5117779, "life_expect": 56.678, "fertility": 6.5}, {"year": 1970, "country": "Ecuador", "cluster": 3, "pop": 5939246, "life_expect": 58.796, "fertility": 6.0005}, {"year": 1975, "country": "Ecuador", "cluster": 3, "pop": 6871698, "life_expect": 61.31, "fertility": 5.4005}, {"year": 1980, "country": "Ecuador", "cluster": 3, "pop": 7920499, "life_expect": 64.342, "fertility": 4.7005}, {"year": 1985, "country": "Ecuador", "cluster": 3, "pop": 9061664, "life_expect": 67.231, "fertility": 4.0}, {"year": 1990, "country": "Ecuador", "cluster": 3, "pop": 10318036, "life_expect": 69.613, "fertility": 3.4005}, {"year": 1995, "country": "Ecuador", "cluster": 3, "pop": 11438004, "life_expect": 72.312, "fertility": 3.1}, {"year": 2000, "country": "Ecuador", "cluster": 3, "pop": 12505204, "life_expect": 74.173, "fertility": 2.8175}, {"year": 2005, "country": "Ecuador", "cluster": 3, "pop": 13363593, "life_expect": 74.994, "fertility": 2.578}, {"year": 1955, "country": "Egypt", "cluster": 5, "pop": 23855527, "life_expect": 44.444, "fertility": 6.97}, {"year": 1960, "country": "Egypt", "cluster": 5, "pop": 26846610, "life_expect": 46.992, "fertility": 7.073}, {"year": 1965, "country": "Egypt", "cluster": 5, "pop": 30265148, "life_expect": 49.293, "fertility": 6.5600000000000005}, {"year": 1970, "country": "Egypt", "cluster": 5, "pop": 33574026, "life_expect": 51.137, "fertility": 5.855}, {"year": 1975, "country": "Egypt", "cluster": 5, "pop": 36952499, "life_expect": 53.319, "fertility": 5.609}, {"year": 1980, "country": "Egypt", "cluster": 5, "pop": 42634215, "life_expect": 56.006, "fertility": 5.332}, {"year": 1985, "country": "Egypt", "cluster": 5, "pop": 50052381, "life_expect": 59.797, "fertility": 4.833}, {"year": 1990, "country": "Egypt", "cluster": 5, "pop": 56694413, "life_expect": 63.674, "fertility": 3.908}, {"year": 1995, "country": "Egypt", "cluster": 5, "pop": 63321615, "life_expect": 67.217, "fertility": 3.5}, {"year": 2000, "country": "Egypt", "cluster": 5, "pop": 70492342, "life_expect": 69.806, "fertility": 3.174}, {"year": 2005, "country": "Egypt", "cluster": 5, "pop": 77505756, "life_expect": 71.338, "fertility": 2.891}, {"year": 1955, "country": "El Salvador", "cluster": 3, "pop": 2221139, "life_expect": 48.57, "fertility": 6.8065}, {"year": 1960, "country": "El Salvador", "cluster": 3, "pop": 2581583, "life_expect": 52.307, "fertility": 6.8469999999999995}, {"year": 1965, "country": "El Salvador", "cluster": 3, "pop": 3017852, "life_expect": 55.855, "fertility": 6.621}, {"year": 1970, "country": "El Salvador", "cluster": 3, "pop": 3603907, "life_expect": 58.207, "fertility": 6.0995}, {"year": 1975, "country": "El Salvador", "cluster": 3, "pop": 4071179, "life_expect": 56.696, "fertility": 5.5996}, {"year": 1980, "country": "El Salvador", "cluster": 3, "pop": 4566199, "life_expect": 56.604, "fertility": 4.5}, {"year": 1985, "country": "El Salvador", "cluster": 3, "pop": 4664361, "life_expect": 63.154, "fertility": 3.901}, {"year": 1990, "country": "El Salvador", "cluster": 3, "pop": 5099884, "life_expect": 66.798, "fertility": 3.52}, {"year": 1995, "country": "El Salvador", "cluster": 3, "pop": 5568437, "life_expect": 69.535, "fertility": 3.17}, {"year": 2000, "country": "El Salvador", "cluster": 3, "pop": 6122515, "life_expect": 70.734, "fertility": 2.883}, {"year": 2005, "country": "El Salvador", "cluster": 3, "pop": 6704932, "life_expect": 71.878, "fertility": 2.6825}, {"year": 1955, "country": "Finland", "cluster": 1, "pop": 4234900, "life_expect": 67.49, "fertility": 2.769}, {"year": 1960, "country": "Finland", "cluster": 1, "pop": 4429600, "life_expect": 68.75, "fertility": 2.66}, {"year": 1965, "country": "Finland", "cluster": 1, "pop": 4563732, "life_expect": 69.83, "fertility": 2.191}, {"year": 1970, "country": "Finland", "cluster": 1, "pop": 4606307, "life_expect": 70.87, "fertility": 1.623}, {"year": 1975, "country": "Finland", "cluster": 1, "pop": 4711439, "life_expect": 72.52, "fertility": 1.663}, {"year": 1980, "country": "Finland", "cluster": 1, "pop": 4779535, "life_expect": 74.55, "fertility": 1.685}, {"year": 1985, "country": "Finland", "cluster": 1, "pop": 4901783, "life_expect": 74.83, "fertility": 1.6600000000000001}, {"year": 1990, "country": "Finland", "cluster": 1, "pop": 4986431, "life_expect": 75.7, "fertility": 1.819}, {"year": 1995, "country": "Finland", "cluster": 1, "pop": 5104654, "life_expect": 77.13, "fertility": 1.7429999999999999}, {"year": 2000, "country": "Finland", "cluster": 1, "pop": 5168595, "life_expect": 78.37, "fertility": 1.754}, {"year": 2005, "country": "Finland", "cluster": 1, "pop": 5223442, "life_expect": 79.313, "fertility": 1.8250000000000002}, {"year": 1955, "country": "France", "cluster": 1, "pop": 43427669, "life_expect": 68.93, "fertility": 2.7119999999999997}, {"year": 1960, "country": "France", "cluster": 1, "pop": 45670000, "life_expect": 70.51, "fertility": 2.85}, {"year": 1965, "country": "France", "cluster": 1, "pop": 48763000, "life_expect": 71.55, "fertility": 2.607}, {"year": 1970, "country": "France", "cluster": 1, "pop": 50787000, "life_expect": 72.38, "fertility": 2.31}, {"year": 1975, "country": "France", "cluster": 1, "pop": 52758427, "life_expect": 73.83, "fertility": 1.862}, {"year": 1980, "country": "France", "cluster": 1, "pop": 53869743, "life_expect": 74.89, "fertility": 1.866}, {"year": 1985, "country": "France", "cluster": 1, "pop": 55171224, "life_expect": 76.34, "fertility": 1.8050000000000002}, {"year": 1990, "country": "France", "cluster": 1, "pop": 56735161, "life_expect": 77.46, "fertility": 1.713}, {"year": 1995, "country": "France", "cluster": 1, "pop": 58149727, "life_expect": 78.64, "fertility": 1.7624}, {"year": 2000, "country": "France", "cluster": 1, "pop": 59381628, "life_expect": 79.59, "fertility": 1.8833000000000002}, {"year": 2005, "country": "France", "cluster": 1, "pop": 60656178, "life_expect": 80.657, "fertility": 1.8916}, {"year": 1955, "country": "Georgia", "cluster": 1, "pop": 3827154, "life_expect": 62.625, "fertility": 2.909}, {"year": 1960, "country": "Georgia", "cluster": 1, "pop": 4146570, "life_expect": 64.644, "fertility": 2.979}, {"year": 1965, "country": "Georgia", "cluster": 1, "pop": 4464959, "life_expect": 66.654, "fertility": 2.6109999999999998}, {"year": 1970, "country": "Georgia", "cluster": 1, "pop": 4694491, "life_expect": 68.158, "fertility": 2.601}, {"year": 1975, "country": "Georgia", "cluster": 1, "pop": 4897656, "life_expect": 69.634, "fertility": 2.39}, {"year": 1980, "country": "Georgia", "cluster": 1, "pop": 5045697, "life_expect": 69.638, "fertility": 2.269}, {"year": 1985, "country": "Georgia", "cluster": 1, "pop": 5192957, "life_expect": 70.45, "fertility": 2.263}, {"year": 1990, "country": "Georgia", "cluster": 1, "pop": 5426207, "life_expect": 70.465, "fertility": 1.9500000000000002}, {"year": 1995, "country": "Georgia", "cluster": 1, "pop": 5012952, "life_expect": 70.49, "fertility": 1.58}, {"year": 2000, "country": "Georgia", "cluster": 1, "pop": 4777209, "life_expect": 70.476, "fertility": 1.478}, {"year": 2005, "country": "Georgia", "cluster": 1, "pop": 4677401, "life_expect": 70.987, "fertility": 1.407}, {"year": 1955, "country": "Germany", "cluster": 1, "pop": 70195612, "life_expect": 69.1, "fertility": 2.3}, {"year": 1960, "country": "Germany", "cluster": 1, "pop": 72480869, "life_expect": 70.3, "fertility": 2.49}, {"year": 1965, "country": "Germany", "cluster": 1, "pop": 75638851, "life_expect": 70.8, "fertility": 2.32}, {"year": 1970, "country": "Germany", "cluster": 1, "pop": 77783164, "life_expect": 71.0, "fertility": 1.6400000000000001}, {"year": 1975, "country": "Germany", "cluster": 1, "pop": 78682325, "life_expect": 72.5, "fertility": 1.52}, {"year": 1980, "country": "Germany", "cluster": 1, "pop": 78297904, "life_expect": 73.8, "fertility": 1.46}, {"year": 1985, "country": "Germany", "cluster": 1, "pop": 77684907, "life_expect": 74.847, "fertility": 1.43}, {"year": 1990, "country": "Germany", "cluster": 1, "pop": 79380394, "life_expect": 76.07, "fertility": 1.31}, {"year": 1995, "country": "Germany", "cluster": 1, "pop": 81653702, "life_expect": 77.34, "fertility": 1.34}, {"year": 2000, "country": "Germany", "cluster": 1, "pop": 82187909, "life_expect": 78.67, "fertility": 1.346}, {"year": 2005, "country": "Germany", "cluster": 1, "pop": 82431390, "life_expect": 79.406, "fertility": 1.3599999999999999}, {"year": 1955, "country": "Greece", "cluster": 1, "pop": 7965538, "life_expect": 67.86, "fertility": 2.27}, {"year": 1960, "country": "Greece", "cluster": 1, "pop": 8327405, "life_expect": 69.51, "fertility": 2.2}, {"year": 1965, "country": "Greece", "cluster": 1, "pop": 8550333, "life_expect": 71.0, "fertility": 2.38}, {"year": 1970, "country": "Greece", "cluster": 1, "pop": 8792806, "life_expect": 72.34, "fertility": 2.32}, {"year": 1975, "country": "Greece", "cluster": 1, "pop": 9046542, "life_expect": 73.68, "fertility": 2.32}, {"year": 1980, "country": "Greece", "cluster": 1, "pop": 9642505, "life_expect": 75.24, "fertility": 1.96}, {"year": 1985, "country": "Greece", "cluster": 1, "pop": 9923253, "life_expect": 76.67, "fertility": 1.53}, {"year": 1990, "country": "Greece", "cluster": 1, "pop": 10129603, "life_expect": 77.03, "fertility": 1.37}, {"year": 1995, "country": "Greece", "cluster": 1, "pop": 10457554, "life_expect": 77.869, "fertility": 1.296}, {"year": 2000, "country": "Greece", "cluster": 1, "pop": 10559110, "life_expect": 78.256, "fertility": 1.2770000000000001}, {"year": 2005, "country": "Greece", "cluster": 1, "pop": 10668354, "life_expect": 79.483, "fertility": 1.325}, {"year": 1955, "country": "Grenada", "cluster": 3, "pop": 84621, "life_expect": 63.114, "fertility": 6.7}, {"year": 1960, "country": "Grenada", "cluster": 3, "pop": 90148, "life_expect": 63.608, "fertility": 6.4}, {"year": 1965, "country": "Grenada", "cluster": 3, "pop": 93290, "life_expect": 64.091, "fertility": 4.8}, {"year": 1970, "country": "Grenada", "cluster": 3, "pop": 95410, "life_expect": 64.577, "fertility": 4.6}, {"year": 1975, "country": "Grenada", "cluster": 3, "pop": 95819, "life_expect": 65.035, "fertility": 4.3}, {"year": 1980, "country": "Grenada", "cluster": 3, "pop": 90164, "life_expect": 65.503, "fertility": 4.23}, {"year": 1985, "country": "Grenada", "cluster": 3, "pop": 92203, "life_expect": 66.002, "fertility": 4.14}, {"year": 1990, "country": "Grenada", "cluster": 3, "pop": 92360, "life_expect": 66.469, "fertility": 3.26}, {"year": 1995, "country": "Grenada", "cluster": 3, "pop": 90603, "life_expect": 66.986, "fertility": 2.814}, {"year": 2000, "country": "Grenada", "cluster": 3, "pop": 89312, "life_expect": 67.746, "fertility": 2.429}, {"year": 2005, "country": "Grenada", "cluster": 3, "pop": 89502, "life_expect": 68.724, "fertility": 2.302}, {"year": 1955, "country": "Haiti", "cluster": 3, "pop": 3376419, "life_expect": 40.696, "fertility": 6.3}, {"year": 1960, "country": "Haiti", "cluster": 3, "pop": 3722743, "life_expect": 43.59, "fertility": 6.3}, {"year": 1965, "country": "Haiti", "cluster": 3, "pop": 4137405, "life_expect": 46.243, "fertility": 6.0}, {"year": 1970, "country": "Haiti", "cluster": 3, "pop": 4604915, "life_expect": 48.042, "fertility": 5.6005}, {"year": 1975, "country": "Haiti", "cluster": 3, "pop": 4828338, "life_expect": 49.923, "fertility": 5.8}, {"year": 1980, "country": "Haiti", "cluster": 3, "pop": 5029725, "life_expect": 51.461, "fertility": 6.2099}, {"year": 1985, "country": "Haiti", "cluster": 3, "pop": 5517977, "life_expect": 53.636, "fertility": 5.69985}, {"year": 1990, "country": "Haiti", "cluster": 3, "pop": 6126101, "life_expect": 55.089, "fertility": 5.14985}, {"year": 1995, "country": "Haiti", "cluster": 3, "pop": 6675578, "life_expect": 56.671, "fertility": 4.61995}, {"year": 2000, "country": "Haiti", "cluster": 3, "pop": 7306302, "life_expect": 58.137, "fertility": 4.0}, {"year": 2005, "country": "Haiti", "cluster": 3, "pop": 8121622, "life_expect": 60.916, "fertility": 3.5445}, {"year": 1955, "country": "Hong Kong", "cluster": 4, "pop": 2490400, "life_expect": 64.75, "fertility": 4.72}, {"year": 1960, "country": "Hong Kong", "cluster": 4, "pop": 3075300, "life_expect": 67.65, "fertility": 5.31}, {"year": 1965, "country": "Hong Kong", "cluster": 4, "pop": 3597900, "life_expect": 70.0, "fertility": 4.02}, {"year": 1970, "country": "Hong Kong", "cluster": 4, "pop": 3959000, "life_expect": 72.0, "fertility": 2.89}, {"year": 1975, "country": "Hong Kong", "cluster": 4, "pop": 4395800, "life_expect": 73.6, "fertility": 2.32}, {"year": 1980, "country": "Hong Kong", "cluster": 4, "pop": 5063100, "life_expect": 75.45, "fertility": 1.8}, {"year": 1985, "country": "Hong Kong", "cluster": 4, "pop": 5456200, "life_expect": 76.2, "fertility": 1.31}, {"year": 1990, "country": "Hong Kong", "cluster": 4, "pop": 5687959, "life_expect": 77.601, "fertility": 1.288}, {"year": 1995, "country": "Hong Kong", "cluster": 4, "pop": 6225347, "life_expect": 80.0, "fertility": 1.08}, {"year": 2000, "country": "Hong Kong", "cluster": 4, "pop": 6658720, "life_expect": 81.495, "fertility": 0.9400000000000001}, {"year": 2005, "country": "Hong Kong", "cluster": 4, "pop": 6898686, "life_expect": 82.208, "fertility": 0.966}, {"year": 1955, "country": "Iceland", "cluster": 1, "pop": 158044, "life_expect": 73.47, "fertility": 4.023}, {"year": 1960, "country": "Iceland", "cluster": 1, "pop": 175860, "life_expect": 73.68, "fertility": 3.943}, {"year": 1965, "country": "Iceland", "cluster": 1, "pop": 192288, "life_expect": 73.73, "fertility": 3.154}, {"year": 1970, "country": "Iceland", "cluster": 1, "pop": 204104, "life_expect": 74.46, "fertility": 2.843}, {"year": 1975, "country": "Iceland", "cluster": 1, "pop": 218031, "life_expect": 76.11, "fertility": 2.287}, {"year": 1980, "country": "Iceland", "cluster": 1, "pop": 228161, "life_expect": 76.99, "fertility": 2.248}, {"year": 1985, "country": "Iceland", "cluster": 1, "pop": 241403, "life_expect": 77.23, "fertility": 2.116}, {"year": 1990, "country": "Iceland", "cluster": 1, "pop": 254719, "life_expect": 78.77, "fertility": 2.194}, {"year": 1995, "country": "Iceland", "cluster": 1, "pop": 267527, "life_expect": 78.95, "fertility": 2.056}, {"year": 2000, "country": "Iceland", "cluster": 1, "pop": 281043, "life_expect": 80.5, "fertility": 1.9929999999999999}, {"year": 2005, "country": "Iceland", "cluster": 1, "pop": 296737, "life_expect": 81.757, "fertility": 2.052}, {"year": 1955, "country": "India", "cluster": 0, "pop": 393000000, "life_expect": 40.249, "fertility": 5.8961}, {"year": 1960, "country": "India", "cluster": 0, "pop": 434000000, "life_expect": 43.605, "fertility": 5.8216}, {"year": 1965, "country": "India", "cluster": 0, "pop": 485000000, "life_expect": 47.193, "fertility": 5.6058}, {"year": 1970, "country": "India", "cluster": 0, "pop": 541000000, "life_expect": 50.651, "fertility": 5.264}, {"year": 1975, "country": "India", "cluster": 0, "pop": 607000000, "life_expect": 54.208, "fertility": 4.8888}, {"year": 1980, "country": "India", "cluster": 0, "pop": 679000000, "life_expect": 56.596, "fertility": 4.4975}, {"year": 1985, "country": "India", "cluster": 0, "pop": 755000000, "life_expect": 58.553, "fertility": 4.15}, {"year": 1990, "country": "India", "cluster": 0, "pop": 839000000, "life_expect": 60.223, "fertility": 3.8648}, {"year": 1995, "country": "India", "cluster": 0, "pop": 927000000, "life_expect": 61.765, "fertility": 3.4551}, {"year": 2000, "country": "India", "cluster": 0, "pop": 1007702000, "life_expect": 62.879, "fertility": 3.1132}, {"year": 2005, "country": "India", "cluster": 0, "pop": 1080264388, "life_expect": 64.698, "fertility": 2.8073}, {"year": 1955, "country": "Indonesia", "cluster": 4, "pop": 86807000, "life_expect": 39.918, "fertility": 5.672}, {"year": 1960, "country": "Indonesia", "cluster": 4, "pop": 95254000, "life_expect": 42.518, "fertility": 5.62}, {"year": 1965, "country": "Indonesia", "cluster": 4, "pop": 105093000, "life_expect": 45.964, "fertility": 5.568}, {"year": 1970, "country": "Indonesia", "cluster": 4, "pop": 116044000, "life_expect": 49.203, "fertility": 5.3}, {"year": 1975, "country": "Indonesia", "cluster": 4, "pop": 130297000, "life_expect": 52.702, "fertility": 4.73}, {"year": 1980, "country": "Indonesia", "cluster": 4, "pop": 146995000, "life_expect": 56.159, "fertility": 4.109}, {"year": 1985, "country": "Indonesia", "cluster": 4, "pop": 163403000, "life_expect": 60.137, "fertility": 3.4}, {"year": 1990, "country": "Indonesia", "cluster": 4, "pop": 178500000, "life_expect": 62.681, "fertility": 2.9}, {"year": 1995, "country": "Indonesia", "cluster": 4, "pop": 194755000, "life_expect": 66.041, "fertility": 2.55}, {"year": 2000, "country": "Indonesia", "cluster": 4, "pop": 206265000, "life_expect": 68.588, "fertility": 2.3761}, {"year": 2005, "country": "Indonesia", "cluster": 4, "pop": 218465000, "life_expect": 70.65, "fertility": 2.182}, {"year": 1955, "country": "Iran", "cluster": 5, "pop": 18729000, "life_expect": 47.181, "fertility": 7.0}, {"year": 1960, "country": "Iran", "cluster": 5, "pop": 21577000, "life_expect": 49.325, "fertility": 7.0}, {"year": 1965, "country": "Iran", "cluster": 5, "pop": 25000000, "life_expect": 52.469, "fertility": 6.8}, {"year": 1970, "country": "Iran", "cluster": 5, "pop": 28933000, "life_expect": 55.234, "fertility": 6.4}, {"year": 1975, "country": "Iran", "cluster": 5, "pop": 33379000, "life_expect": 57.702, "fertility": 6.5}, {"year": 1980, "country": "Iran", "cluster": 5, "pop": 39583397, "life_expect": 59.62, "fertility": 6.63}, {"year": 1985, "country": "Iran", "cluster": 5, "pop": 48439952, "life_expect": 63.04, "fertility": 5.62}, {"year": 1990, "country": "Iran", "cluster": 5, "pop": 57035717, "life_expect": 65.742, "fertility": 4.328}, {"year": 1995, "country": "Iran", "cluster": 5, "pop": 61628116, "life_expect": 68.042, "fertility": 2.534}, {"year": 2000, "country": "Iran", "cluster": 5, "pop": 65660289, "life_expect": 69.451, "fertility": 2.124}, {"year": 2005, "country": "Iran", "cluster": 5, "pop": 68017860, "life_expect": 70.964, "fertility": 2.04}, {"year": 1955, "country": "Iraq", "cluster": 5, "pop": 5903253, "life_expect": 48.437, "fertility": 7.3}, {"year": 1960, "country": "Iraq", "cluster": 5, "pop": 6822030, "life_expect": 51.457, "fertility": 7.25}, {"year": 1965, "country": "Iraq", "cluster": 5, "pop": 7970746, "life_expect": 54.459, "fertility": 7.2}, {"year": 1970, "country": "Iraq", "cluster": 5, "pop": 9413671, "life_expect": 56.95, "fertility": 7.15}, {"year": 1975, "country": "Iraq", "cluster": 5, "pop": 11117804, "life_expect": 60.413, "fertility": 6.8}, {"year": 1980, "country": "Iraq", "cluster": 5, "pop": 13232839, "life_expect": 62.038, "fertility": 6.35}, {"year": 1985, "country": "Iraq", "cluster": 5, "pop": 15693620, "life_expect": 65.044, "fertility": 6.15}, {"year": 1990, "country": "Iraq", "cluster": 5, "pop": 18134702, "life_expect": 59.461, "fertility": 5.7}, {"year": 1995, "country": "Iraq", "cluster": 5, "pop": 19557247, "life_expect": 58.811, "fertility": 5.37}, {"year": 2000, "country": "Iraq", "cluster": 5, "pop": 22675617, "life_expect": 57.046, "fertility": 4.858}, {"year": 2005, "country": "Iraq", "cluster": 5, "pop": 26074906, "life_expect": 59.545, "fertility": 4.264}, {"year": 1955, "country": "Ireland", "cluster": 1, "pop": 2916133, "life_expect": 68.9, "fertility": 3.68}, {"year": 1960, "country": "Ireland", "cluster": 1, "pop": 2832000, "life_expect": 70.29, "fertility": 3.979}, {"year": 1965, "country": "Ireland", "cluster": 1, "pop": 2876000, "life_expect": 71.08, "fertility": 3.873}, {"year": 1970, "country": "Ireland", "cluster": 1, "pop": 2950100, "life_expect": 71.28, "fertility": 3.815}, {"year": 1975, "country": "Ireland", "cluster": 1, "pop": 3177300, "life_expect": 72.03, "fertility": 3.478}, {"year": 1980, "country": "Ireland", "cluster": 1, "pop": 3401000, "life_expect": 73.1, "fertility": 2.877}, {"year": 1985, "country": "Ireland", "cluster": 1, "pop": 3540000, "life_expect": 74.36, "fertility": 2.287}, {"year": 1990, "country": "Ireland", "cluster": 1, "pop": 3508200, "life_expect": 75.467, "fertility": 1.9689999999999999}, {"year": 1995, "country": "Ireland", "cluster": 1, "pop": 3613890, "life_expect": 76.122, "fertility": 1.9}, {"year": 2000, "country": "Ireland", "cluster": 1, "pop": 3791690, "life_expect": 77.783, "fertility": 1.9689999999999999}, {"year": 2005, "country": "Ireland", "cluster": 1, "pop": 4015676, "life_expect": 78.885, "fertility": 1.964}, {"year": 1955, "country": "Israel", "cluster": 5, "pop": 1772032, "life_expect": 67.84, "fertility": 3.893}, {"year": 1960, "country": "Israel", "cluster": 5, "pop": 2141495, "life_expect": 69.39, "fertility": 3.852}, {"year": 1965, "country": "Israel", "cluster": 5, "pop": 2578184, "life_expect": 70.75, "fertility": 3.79}, {"year": 1970, "country": "Israel", "cluster": 5, "pop": 2903434, "life_expect": 71.63, "fertility": 3.77}, {"year": 1975, "country": "Israel", "cluster": 5, "pop": 3354242, "life_expect": 73.06, "fertility": 3.409}, {"year": 1980, "country": "Israel", "cluster": 5, "pop": 3737473, "life_expect": 74.45, "fertility": 3.125}, {"year": 1985, "country": "Israel", "cluster": 5, "pop": 4074965, "life_expect": 75.6, "fertility": 3.051}, {"year": 1990, "country": "Israel", "cluster": 5, "pop": 4512068, "life_expect": 76.93, "fertility": 2.933}, {"year": 1995, "country": "Israel", "cluster": 5, "pop": 5305120, "life_expect": 78.269, "fertility": 2.942}, {"year": 2000, "country": "Israel", "cluster": 5, "pop": 5842454, "life_expect": 79.696, "fertility": 2.906}, {"year": 2005, "country": "Israel", "cluster": 5, "pop": 6276883, "life_expect": 80.745, "fertility": 2.75}, {"year": 1955, "country": "Italy", "cluster": 1, "pop": 48633000, "life_expect": 67.81, "fertility": 2.35}, {"year": 1960, "country": "Italy", "cluster": 1, "pop": 50197600, "life_expect": 69.24, "fertility": 2.498}, {"year": 1965, "country": "Italy", "cluster": 1, "pop": 51987100, "life_expect": 71.06, "fertility": 2.493}, {"year": 1970, "country": "Italy", "cluster": 1, "pop": 53661100, "life_expect": 72.19, "fertility": 2.325}, {"year": 1975, "country": "Italy", "cluster": 1, "pop": 55571894, "life_expect": 73.48, "fertility": 1.889}, {"year": 1980, "country": "Italy", "cluster": 1, "pop": 56451247, "life_expect": 74.98, "fertility": 1.53}, {"year": 1985, "country": "Italy", "cluster": 1, "pop": 56731215, "life_expect": 76.42, "fertility": 1.349}, {"year": 1990, "country": "Italy", "cluster": 1, "pop": 56742886, "life_expect": 77.44, "fertility": 1.275}, {"year": 1995, "country": "Italy", "cluster": 1, "pop": 57274531, "life_expect": 78.82, "fertility": 1.213}, {"year": 2000, "country": "Italy", "cluster": 1, "pop": 57719337, "life_expect": 80.24, "fertility": 1.286}, {"year": 2005, "country": "Italy", "cluster": 1, "pop": 58103033, "life_expect": 80.546, "fertility": 1.379}, {"year": 1955, "country": "Jamaica", "cluster": 3, "pop": 1488805, "life_expect": 62.61, "fertility": 5.08}, {"year": 1960, "country": "Jamaica", "cluster": 3, "pop": 1631784, "life_expect": 65.61, "fertility": 5.64}, {"year": 1965, "country": "Jamaica", "cluster": 3, "pop": 1777397, "life_expect": 67.51, "fertility": 5.78}, {"year": 1970, "country": "Jamaica", "cluster": 3, "pop": 1943787, "life_expect": 69.0, "fertility": 5.0}, {"year": 1975, "country": "Jamaica", "cluster": 3, "pop": 2104879, "life_expect": 70.11, "fertility": 4.0}, {"year": 1980, "country": "Jamaica", "cluster": 3, "pop": 2228803, "life_expect": 71.21, "fertility": 3.55}, {"year": 1985, "country": "Jamaica", "cluster": 3, "pop": 2318652, "life_expect": 71.77, "fertility": 3.1}, {"year": 1990, "country": "Jamaica", "cluster": 3, "pop": 2347922, "life_expect": 71.766, "fertility": 2.84}, {"year": 1995, "country": "Jamaica", "cluster": 3, "pop": 2469389, "life_expect": 72.262, "fertility": 2.67}, {"year": 2000, "country": "Jamaica", "cluster": 3, "pop": 2615467, "life_expect": 72.047, "fertility": 2.628}, {"year": 2005, "country": "Jamaica", "cluster": 3, "pop": 2735520, "life_expect": 72.567, "fertility": 2.4289}, {"year": 1955, "country": "Japan", "cluster": 4, "pop": 89815060, "life_expect": 65.5, "fertility": 2.08}, {"year": 1960, "country": "Japan", "cluster": 4, "pop": 94091638, "life_expect": 68.73, "fertility": 2.02}, {"year": 1965, "country": "Japan", "cluster": 4, "pop": 98882534, "life_expect": 71.43, "fertility": 2.0}, {"year": 1970, "country": "Japan", "cluster": 4, "pop": 104344973, "life_expect": 73.42, "fertility": 2.07}, {"year": 1975, "country": "Japan", "cluster": 4, "pop": 111573116, "life_expect": 75.38, "fertility": 1.81}, {"year": 1980, "country": "Japan", "cluster": 4, "pop": 116807309, "life_expect": 77.11, "fertility": 1.76}, {"year": 1985, "country": "Japan", "cluster": 4, "pop": 120754335, "life_expect": 78.67, "fertility": 1.6600000000000001}, {"year": 1990, "country": "Japan", "cluster": 4, "pop": 123537399, "life_expect": 79.36, "fertility": 1.49}, {"year": 1995, "country": "Japan", "cluster": 4, "pop": 125341354, "life_expect": 80.69, "fertility": 1.3900000000000001}, {"year": 2000, "country": "Japan", "cluster": 4, "pop": 126699784, "life_expect": 82.0, "fertility": 1.291}, {"year": 2005, "country": "Japan", "cluster": 4, "pop": 127417244, "life_expect": 82.603, "fertility": 1.27}, {"year": 1955, "country": "Kenya", "cluster": 2, "pop": 7033999, "life_expect": 44.686, "fertility": 7.816}, {"year": 1960, "country": "Kenya", "cluster": 2, "pop": 8156827, "life_expect": 47.949, "fertility": 8.12}, {"year": 1965, "country": "Kenya", "cluster": 2, "pop": 9549179, "life_expect": 50.654, "fertility": 8.12}, {"year": 1970, "country": "Kenya", "cluster": 2, "pop": 11247182, "life_expect": 53.559, "fertility": 8.0}, {"year": 1975, "country": "Kenya", "cluster": 2, "pop": 13433414, "life_expect": 56.155, "fertility": 7.6}, {"year": 1980, "country": "Kenya", "cluster": 2, "pop": 16331401, "life_expect": 58.766, "fertility": 7.2}, {"year": 1985, "country": "Kenya", "cluster": 2, "pop": 19763285, "life_expect": 59.339, "fertility": 6.5}, {"year": 1990, "country": "Kenya", "cluster": 2, "pop": 23358413, "life_expect": 59.285, "fertility": 5.4}, {"year": 1995, "country": "Kenya", "cluster": 2, "pop": 27060142, "life_expect": 54.407, "fertility": 5.0}, {"year": 2000, "country": "Kenya", "cluster": 2, "pop": 29985839, "life_expect": 50.992, "fertility": 5.0}, {"year": 2005, "country": "Kenya", "cluster": 2, "pop": 33829590, "life_expect": 54.11, "fertility": 4.959}, {"year": 1955, "country": "South Korea", "cluster": 4, "pop": 8839427, "life_expect": 54.081, "fertility": 3.8}, {"year": 1960, "country": "South Korea", "cluster": 4, "pop": 10391909, "life_expect": 56.656, "fertility": 3.41}, {"year": 1965, "country": "South Korea", "cluster": 4, "pop": 11868751, "life_expect": 59.942, "fertility": 4.09}, {"year": 1970, "country": "South Korea", "cluster": 4, "pop": 13911902, "life_expect": 63.983, "fertility": 3.7199999999999998}, {"year": 1975, "country": "South Korea", "cluster": 4, "pop": 15801308, "life_expect": 67.159, "fertility": 2.58}, {"year": 1980, "country": "South Korea", "cluster": 4, "pop": 17113626, "life_expect": 69.1, "fertility": 2.93}, {"year": 1985, "country": "South Korea", "cluster": 4, "pop": 18481420, "life_expect": 70.647, "fertility": 2.45}, {"year": 1990, "country": "South Korea", "cluster": 4, "pop": 20018546, "life_expect": 69.978, "fertility": 2.35}, {"year": 1995, "country": "South Korea", "cluster": 4, "pop": 21561856, "life_expect": 67.727, "fertility": 2.0938}, {"year": 2000, "country": "South Korea", "cluster": 4, "pop": 21647682, "life_expect": 66.662, "fertility": 1.9173}, {"year": 2005, "country": "South Korea", "cluster": 4, "pop": 22912177, "life_expect": 67.297, "fertility": 1.85}, {"year": 1955, "country": "North Korea", "cluster": 4, "pop": 21551834, "life_expect": 52.681, "fertility": 6.332}, {"year": 1960, "country": "North Korea", "cluster": 4, "pop": 24784140, "life_expect": 55.292, "fertility": 5.63}, {"year": 1965, "country": "North Korea", "cluster": 4, "pop": 28705000, "life_expect": 57.716, "fertility": 4.708}, {"year": 1970, "country": "North Korea", "cluster": 4, "pop": 32241000, "life_expect": 62.612, "fertility": 4.281}, {"year": 1975, "country": "North Korea", "cluster": 4, "pop": 35281000, "life_expect": 64.766, "fertility": 2.919}, {"year": 1980, "country": "North Korea", "cluster": 4, "pop": 38124000, "life_expect": 67.123, "fertility": 2.234}, {"year": 1985, "country": "North Korea", "cluster": 4, "pop": 40806000, "life_expect": 69.81, "fertility": 1.601}, {"year": 1990, "country": "North Korea", "cluster": 4, "pop": 42869000, "life_expect": 72.244, "fertility": 1.6960000000000002}, {"year": 1995, "country": "North Korea", "cluster": 4, "pop": 45264146, "life_expect": 74.647, "fertility": 1.514}, {"year": 2000, "country": "North Korea", "cluster": 4, "pop": 47351083, "life_expect": 77.045, "fertility": 1.242}, {"year": 2005, "country": "North Korea", "cluster": 4, "pop": 48640671, "life_expect": 78.623, "fertility": 1.21}, {"year": 1955, "country": "Lebanon", "cluster": 5, "pop": 1560985, "life_expect": 59.489, "fertility": 5.72}, {"year": 1960, "country": "Lebanon", "cluster": 5, "pop": 1786235, "life_expect": 62.094, "fertility": 5.689}, {"year": 1965, "country": "Lebanon", "cluster": 5, "pop": 2057945, "life_expect": 63.87, "fertility": 5.336}, {"year": 1970, "country": "Lebanon", "cluster": 5, "pop": 2383029, "life_expect": 65.421, "fertility": 4.78}, {"year": 1975, "country": "Lebanon", "cluster": 5, "pop": 3098159, "life_expect": 66.099, "fertility": 4.311}, {"year": 1980, "country": "Lebanon", "cluster": 5, "pop": 3085876, "life_expect": 66.983, "fertility": 3.895}, {"year": 1985, "country": "Lebanon", "cluster": 5, "pop": 3088235, "life_expect": 67.926, "fertility": 3.313}, {"year": 1990, "country": "Lebanon", "cluster": 5, "pop": 3147267, "life_expect": 69.292, "fertility": 3.0}, {"year": 1995, "country": "Lebanon", "cluster": 5, "pop": 3334733, "life_expect": 70.265, "fertility": 2.6950000000000003}, {"year": 2000, "country": "Lebanon", "cluster": 5, "pop": 3578036, "life_expect": 71.028, "fertility": 2.319}, {"year": 2005, "country": "Lebanon", "cluster": 5, "pop": 3826018, "life_expect": 71.993, "fertility": 2.209}, {"year": 1955, "country": "Mexico", "cluster": 3, "pop": 32929914, "life_expect": 55.19, "fertility": 6.8}, {"year": 1960, "country": "Mexico", "cluster": 3, "pop": 38578505, "life_expect": 58.299, "fertility": 6.7495}, {"year": 1965, "country": "Mexico", "cluster": 3, "pop": 45142399, "life_expect": 60.11, "fertility": 6.7495}, {"year": 1970, "country": "Mexico", "cluster": 3, "pop": 52775158, "life_expect": 62.361, "fertility": 6.5}, {"year": 1975, "country": "Mexico", "cluster": 3, "pop": 60678045, "life_expect": 65.032, "fertility": 5.2505}, {"year": 1980, "country": "Mexico", "cluster": 3, "pop": 68347479, "life_expect": 67.405, "fertility": 4.25}, {"year": 1985, "country": "Mexico", "cluster": 3, "pop": 76767225, "life_expect": 69.498, "fertility": 3.6295}, {"year": 1990, "country": "Mexico", "cluster": 3, "pop": 84913652, "life_expect": 71.455, "fertility": 3.1905}, {"year": 1995, "country": "Mexico", "cluster": 3, "pop": 92880353, "life_expect": 73.67, "fertility": 2.6705}, {"year": 2000, "country": "Mexico", "cluster": 3, "pop": 99926620, "life_expect": 74.902, "fertility": 2.4005}, {"year": 2005, "country": "Mexico", "cluster": 3, "pop": 106202903, "life_expect": 76.195, "fertility": 2.211}, {"year": 1955, "country": "Netherlands", "cluster": 1, "pop": 10750842, "life_expect": 72.99, "fertility": 3.095}, {"year": 1960, "country": "Netherlands", "cluster": 1, "pop": 11486000, "life_expect": 73.23, "fertility": 3.168}, {"year": 1965, "country": "Netherlands", "cluster": 1, "pop": 12292000, "life_expect": 73.82, "fertility": 2.797}, {"year": 1970, "country": "Netherlands", "cluster": 1, "pop": 13032335, "life_expect": 73.75, "fertility": 2.059}, {"year": 1975, "country": "Netherlands", "cluster": 1, "pop": 13653438, "life_expect": 75.24, "fertility": 1.596}, {"year": 1980, "country": "Netherlands", "cluster": 1, "pop": 14143901, "life_expect": 76.05, "fertility": 1.5150000000000001}, {"year": 1985, "country": "Netherlands", "cluster": 1, "pop": 14491380, "life_expect": 76.83, "fertility": 1.5550000000000002}, {"year": 1990, "country": "Netherlands", "cluster": 1, "pop": 14951510, "life_expect": 77.42, "fertility": 1.583}, {"year": 1995, "country": "Netherlands", "cluster": 1, "pop": 15459054, "life_expect": 78.03, "fertility": 1.6}, {"year": 2000, "country": "Netherlands", "cluster": 1, "pop": 15907853, "life_expect": 78.53, "fertility": 1.726}, {"year": 2005, "country": "Netherlands", "cluster": 1, "pop": 16407491, "life_expect": 79.762, "fertility": 1.721}, {"year": 1955, "country": "New Zealand", "cluster": 4, "pop": 2136168, "life_expect": 70.26, "fertility": 4.07}, {"year": 1960, "country": "New Zealand", "cluster": 4, "pop": 2371746, "life_expect": 71.24, "fertility": 4.022}, {"year": 1965, "country": "New Zealand", "cluster": 4, "pop": 2640400, "life_expect": 71.52, "fertility": 3.348}, {"year": 1970, "country": "New Zealand", "cluster": 4, "pop": 2828050, "life_expect": 71.89, "fertility": 2.843}, {"year": 1975, "country": "New Zealand", "cluster": 4, "pop": 3117800, "life_expect": 72.22, "fertility": 2.178}, {"year": 1980, "country": "New Zealand", "cluster": 4, "pop": 3170150, "life_expect": 73.84, "fertility": 1.963}, {"year": 1985, "country": "New Zealand", "cluster": 4, "pop": 3298050, "life_expect": 74.32, "fertility": 2.053}, {"year": 1990, "country": "New Zealand", "cluster": 4, "pop": 3359604, "life_expect": 76.33, "fertility": 2.061}, {"year": 1995, "country": "New Zealand", "cluster": 4, "pop": 3565990, "life_expect": 77.55, "fertility": 1.952}, {"year": 2000, "country": "New Zealand", "cluster": 4, "pop": 3819762, "life_expect": 79.11, "fertility": 1.964}, {"year": 2005, "country": "New Zealand", "cluster": 4, "pop": 4035461, "life_expect": 80.204, "fertility": 1.994}, {"year": 1955, "country": "Nigeria", "cluster": 2, "pop": 35458978, "life_expect": 37.802, "fertility": 6.9}, {"year": 1960, "country": "Nigeria", "cluster": 2, "pop": 39914593, "life_expect": 39.36, "fertility": 6.9}, {"year": 1965, "country": "Nigeria", "cluster": 2, "pop": 45020052, "life_expect": 41.04, "fertility": 6.9}, {"year": 1970, "country": "Nigeria", "cluster": 2, "pop": 51027516, "life_expect": 42.821, "fertility": 6.9}, {"year": 1975, "country": "Nigeria", "cluster": 2, "pop": 58522112, "life_expect": 44.514, "fertility": 6.9}, {"year": 1980, "country": "Nigeria", "cluster": 2, "pop": 68550274, "life_expect": 45.826, "fertility": 6.9}, {"year": 1985, "country": "Nigeria", "cluster": 2, "pop": 77573154, "life_expect": 46.886, "fertility": 6.834}, {"year": 1990, "country": "Nigeria", "cluster": 2, "pop": 88510354, "life_expect": 47.472, "fertility": 6.635}, {"year": 1995, "country": "Nigeria", "cluster": 2, "pop": 100960105, "life_expect": 47.464, "fertility": 6.246}, {"year": 2000, "country": "Nigeria", "cluster": 2, "pop": 114306700, "life_expect": 46.608, "fertility": 5.845}, {"year": 2005, "country": "Nigeria", "cluster": 2, "pop": 128765768, "life_expect": 46.859, "fertility": 5.322}, {"year": 1955, "country": "Norway", "cluster": 1, "pop": 3427409, "life_expect": 73.44, "fertility": 2.8369999999999997}, {"year": 1960, "country": "Norway", "cluster": 1, "pop": 3581239, "life_expect": 73.47, "fertility": 2.898}, {"year": 1965, "country": "Norway", "cluster": 1, "pop": 3723153, "life_expect": 74.08, "fertility": 2.719}, {"year": 1970, "country": "Norway", "cluster": 1, "pop": 3877386, "life_expect": 74.34, "fertility": 2.248}, {"year": 1975, "country": "Norway", "cluster": 1, "pop": 4007313, "life_expect": 75.37, "fertility": 1.81}, {"year": 1980, "country": "Norway", "cluster": 1, "pop": 4085620, "life_expect": 75.97, "fertility": 1.687}, {"year": 1985, "country": "Norway", "cluster": 1, "pop": 4152419, "life_expect": 75.89, "fertility": 1.8}, {"year": 1990, "country": "Norway", "cluster": 1, "pop": 4242006, "life_expect": 77.32, "fertility": 1.8860000000000001}, {"year": 1995, "country": "Norway", "cluster": 1, "pop": 4359101, "life_expect": 78.32, "fertility": 1.853}, {"year": 2000, "country": "Norway", "cluster": 1, "pop": 4492400, "life_expect": 79.05, "fertility": 1.8010000000000002}, {"year": 2005, "country": "Norway", "cluster": 1, "pop": 4593041, "life_expect": 80.196, "fertility": 1.8479999999999999}, {"year": 1955, "country": "Pakistan", "cluster": 0, "pop": 44434445, "life_expect": 45.557, "fertility": 6.6}, {"year": 1960, "country": "Pakistan", "cluster": 0, "pop": 50386898, "life_expect": 47.67, "fertility": 6.6}, {"year": 1965, "country": "Pakistan", "cluster": 0, "pop": 57494940, "life_expect": 49.8, "fertility": 6.6}, {"year": 1970, "country": "Pakistan", "cluster": 0, "pop": 65705964, "life_expect": 51.929, "fertility": 6.6}, {"year": 1975, "country": "Pakistan", "cluster": 0, "pop": 74711541, "life_expect": 54.043, "fertility": 6.6}, {"year": 1980, "country": "Pakistan", "cluster": 0, "pop": 85219117, "life_expect": 56.158, "fertility": 6.6}, {"year": 1985, "country": "Pakistan", "cluster": 0, "pop": 99060352, "life_expect": 58.245, "fertility": 6.66}, {"year": 1990, "country": "Pakistan", "cluster": 0, "pop": 114578478, "life_expect": 60.838, "fertility": 5.8}, {"year": 1995, "country": "Pakistan", "cluster": 0, "pop": 128690285, "life_expect": 61.818, "fertility": 4.9596}, {"year": 2000, "country": "Pakistan", "cluster": 0, "pop": 146342958, "life_expect": 63.61, "fertility": 3.9936}, {"year": 2005, "country": "Pakistan", "cluster": 0, "pop": 162419946, "life_expect": 65.483, "fertility": 3.5211}, {"year": 1955, "country": "Peru", "cluster": 3, "pop": 8671500, "life_expect": 46.263, "fertility": 6.853}, {"year": 1960, "country": "Peru", "cluster": 3, "pop": 9931000, "life_expect": 49.096, "fertility": 6.853}, {"year": 1965, "country": "Peru", "cluster": 3, "pop": 11467300, "life_expect": 51.445, "fertility": 6.5600000000000005}, {"year": 1970, "country": "Peru", "cluster": 3, "pop": 13192800, "life_expect": 55.448, "fertility": 6.0}, {"year": 1975, "country": "Peru", "cluster": 3, "pop": 15161199, "life_expect": 58.447, "fertility": 5.378}, {"year": 1980, "country": "Peru", "cluster": 3, "pop": 17295298, "life_expect": 61.406, "fertility": 4.65}, {"year": 1985, "country": "Peru", "cluster": 3, "pop": 19348926, "life_expect": 64.134, "fertility": 4.1}, {"year": 1990, "country": "Peru", "cluster": 3, "pop": 21511443, "life_expect": 66.458, "fertility": 3.7}, {"year": 1995, "country": "Peru", "cluster": 3, "pop": 23846388, "life_expect": 68.386, "fertility": 3.0995}, {"year": 2000, "country": "Peru", "cluster": 3, "pop": 25979722, "life_expect": 69.906, "fertility": 2.7005}, {"year": 2005, "country": "Peru", "cluster": 3, "pop": 27925628, "life_expect": 71.421, "fertility": 2.5065}, {"year": 1955, "country": "Philippines", "cluster": 4, "pop": 24553055, "life_expect": 51.334, "fertility": 7.13}, {"year": 1960, "country": "Philippines", "cluster": 4, "pop": 28528939, "life_expect": 54.757, "fertility": 6.85}, {"year": 1965, "country": "Philippines", "cluster": 4, "pop": 33267569, "life_expect": 56.393, "fertility": 6.5}, {"year": 1970, "country": "Philippines", "cluster": 4, "pop": 38603696, "life_expect": 58.065, "fertility": 6.0}, {"year": 1975, "country": "Philippines", "cluster": 4, "pop": 44336842, "life_expect": 60.06, "fertility": 5.5}, {"year": 1980, "country": "Philippines", "cluster": 4, "pop": 50940182, "life_expect": 62.082, "fertility": 4.95}, {"year": 1985, "country": "Philippines", "cluster": 4, "pop": 57288037, "life_expect": 64.151, "fertility": 4.55}, {"year": 1990, "country": "Philippines", "cluster": 4, "pop": 64318120, "life_expect": 66.458, "fertility": 4.143}, {"year": 1995, "country": "Philippines", "cluster": 4, "pop": 71717437, "life_expect": 68.564, "fertility": 3.7248}, {"year": 2000, "country": "Philippines", "cluster": 4, "pop": 79739825, "life_expect": 70.303, "fertility": 3.5436}, {"year": 2005, "country": "Philippines", "cluster": 4, "pop": 87857473, "life_expect": 71.688, "fertility": 3.2327}, {"year": 1955, "country": "Poland", "cluster": 1, "pop": 27220668, "life_expect": 65.77, "fertility": 3.29}, {"year": 1960, "country": "Poland", "cluster": 1, "pop": 29589842, "life_expect": 67.64, "fertility": 2.65}, {"year": 1965, "country": "Poland", "cluster": 1, "pop": 31262358, "life_expect": 69.61, "fertility": 2.27}, {"year": 1970, "country": "Poland", "cluster": 1, "pop": 32526000, "life_expect": 70.85, "fertility": 2.25}, {"year": 1975, "country": "Poland", "cluster": 1, "pop": 33969240, "life_expect": 70.67, "fertility": 2.26}, {"year": 1980, "country": "Poland", "cluster": 1, "pop": 35578016, "life_expect": 71.32, "fertility": 2.33}, {"year": 1985, "country": "Poland", "cluster": 1, "pop": 37225792, "life_expect": 70.98, "fertility": 2.15}, {"year": 1990, "country": "Poland", "cluster": 1, "pop": 38119408, "life_expect": 70.99, "fertility": 1.8900000000000001}, {"year": 1995, "country": "Poland", "cluster": 1, "pop": 38600642, "life_expect": 72.75, "fertility": 1.478}, {"year": 2000, "country": "Poland", "cluster": 1, "pop": 38654164, "life_expect": 74.67, "fertility": 1.251}, {"year": 2005, "country": "Poland", "cluster": 1, "pop": 38557984, "life_expect": 75.563, "fertility": 1.227}, {"year": 1955, "country": "Portugal", "cluster": 1, "pop": 8692600, "life_expect": 61.51, "fertility": 3.03}, {"year": 1960, "country": "Portugal", "cluster": 1, "pop": 9036700, "life_expect": 64.39, "fertility": 3.074}, {"year": 1965, "country": "Portugal", "cluster": 1, "pop": 9128850, "life_expect": 66.6, "fertility": 2.849}, {"year": 1970, "country": "Portugal", "cluster": 1, "pop": 9044200, "life_expect": 69.26, "fertility": 2.748}, {"year": 1975, "country": "Portugal", "cluster": 1, "pop": 9411090, "life_expect": 70.41, "fertility": 2.41}, {"year": 1980, "country": "Portugal", "cluster": 1, "pop": 9777800, "life_expect": 72.77, "fertility": 1.982}, {"year": 1985, "country": "Portugal", "cluster": 1, "pop": 9897192, "life_expect": 74.06, "fertility": 1.5939999999999999}, {"year": 1990, "country": "Portugal", "cluster": 1, "pop": 9922689, "life_expect": 74.86, "fertility": 1.516}, {"year": 1995, "country": "Portugal", "cluster": 1, "pop": 10065543, "life_expect": 75.97, "fertility": 1.475}, {"year": 2000, "country": "Portugal", "cluster": 1, "pop": 10335597, "life_expect": 77.29, "fertility": 1.454}, {"year": 2005, "country": "Portugal", "cluster": 1, "pop": 10566212, "life_expect": 78.098, "fertility": 1.455}, {"year": 1955, "country": "Rwanda", "cluster": 2, "pop": 2698272, "life_expect": 41.5, "fertility": 8.0}, {"year": 1960, "country": "Rwanda", "cluster": 2, "pop": 3031804, "life_expect": 43.0, "fertility": 8.1}, {"year": 1965, "country": "Rwanda", "cluster": 2, "pop": 3264640, "life_expect": 44.1, "fertility": 8.2}, {"year": 1970, "country": "Rwanda", "cluster": 2, "pop": 3769171, "life_expect": 44.6, "fertility": 8.29}, {"year": 1975, "country": "Rwanda", "cluster": 2, "pop": 4356863, "life_expect": 45.0, "fertility": 8.492}, {"year": 1980, "country": "Rwanda", "cluster": 2, "pop": 5138689, "life_expect": 46.218, "fertility": 8.5}, {"year": 1985, "country": "Rwanda", "cluster": 2, "pop": 6009833, "life_expect": 44.02, "fertility": 8.25}, {"year": 1990, "country": "Rwanda", "cluster": 2, "pop": 6923738, "life_expect": 23.599, "fertility": 6.9}, {"year": 1995, "country": "Rwanda", "cluster": 2, "pop": 5706501, "life_expect": 36.087, "fertility": 6.0993}, {"year": 2000, "country": "Rwanda", "cluster": 2, "pop": 7507056, "life_expect": 43.413, "fertility": 6.01}, {"year": 2005, "country": "Rwanda", "cluster": 2, "pop": 8440820, "life_expect": 46.242, "fertility": 5.9169}, {"year": 1955, "country": "Saudi Arabia", "cluster": 5, "pop": 4243218, "life_expect": 42.868, "fertility": 7.175}, {"year": 1960, "country": "Saudi Arabia", "cluster": 5, "pop": 4718301, "life_expect": 45.914, "fertility": 7.257}, {"year": 1965, "country": "Saudi Arabia", "cluster": 5, "pop": 5327432, "life_expect": 49.901, "fertility": 7.257}, {"year": 1970, "country": "Saudi Arabia", "cluster": 5, "pop": 6109051, "life_expect": 53.886, "fertility": 7.298}, {"year": 1975, "country": "Saudi Arabia", "cluster": 5, "pop": 7204820, "life_expect": 58.69, "fertility": 7.2780000000000005}, {"year": 1980, "country": "Saudi Arabia", "cluster": 5, "pop": 9999161, "life_expect": 63.012, "fertility": 7.015}, {"year": 1985, "country": "Saudi Arabia", "cluster": 5, "pop": 13330067, "life_expect": 66.295, "fertility": 6.217}, {"year": 1990, "country": "Saudi Arabia", "cluster": 5, "pop": 16060761, "life_expect": 68.768, "fertility": 5.446}, {"year": 1995, "country": "Saudi Arabia", "cluster": 5, "pop": 19966998, "life_expect": 70.533, "fertility": 4.621}, {"year": 2000, "country": "Saudi Arabia", "cluster": 5, "pop": 23153090, "life_expect": 71.626, "fertility": 3.81}, {"year": 2005, "country": "Saudi Arabia", "cluster": 5, "pop": 26417599, "life_expect": 72.777, "fertility": 3.352}, {"year": 1955, "country": "South Africa", "cluster": 2, "pop": 15368551, "life_expect": 47.985, "fertility": 6.5}, {"year": 1960, "country": "South Africa", "cluster": 2, "pop": 17416653, "life_expect": 49.951, "fertility": 6.3}, {"year": 1965, "country": "South Africa", "cluster": 2, "pop": 19898242, "life_expect": 51.927, "fertility": 5.7}, {"year": 1970, "country": "South Africa", "cluster": 2, "pop": 22739921, "life_expect": 53.696, "fertility": 5.47}, {"year": 1975, "country": "South Africa", "cluster": 2, "pop": 25815144, "life_expect": 55.527, "fertility": 5.0}, {"year": 1980, "country": "South Africa", "cluster": 2, "pop": 29251588, "life_expect": 58.161, "fertility": 4.556}, {"year": 1985, "country": "South Africa", "cluster": 2, "pop": 34254092, "life_expect": 60.834, "fertility": 3.85}, {"year": 1990, "country": "South Africa", "cluster": 2, "pop": 38391094, "life_expect": 61.888, "fertility": 3.343}, {"year": 1995, "country": "South Africa", "cluster": 2, "pop": 41779149, "life_expect": 60.236, "fertility": 2.954}, {"year": 2000, "country": "South Africa", "cluster": 2, "pop": 44066197, "life_expect": 53.365, "fertility": 2.802}, {"year": 2005, "country": "South Africa", "cluster": 2, "pop": 44344136, "life_expect": 49.339, "fertility": 2.637}, {"year": 1955, "country": "Spain", "cluster": 1, "pop": 29318745, "life_expect": 66.66, "fertility": 2.75}, {"year": 1960, "country": "Spain", "cluster": 1, "pop": 30641187, "life_expect": 69.69, "fertility": 2.89}, {"year": 1965, "country": "Spain", "cluster": 1, "pop": 32084511, "life_expect": 71.44, "fertility": 2.92}, {"year": 1970, "country": "Spain", "cluster": 1, "pop": 33876479, "life_expect": 73.06, "fertility": 2.86}, {"year": 1975, "country": "Spain", "cluster": 1, "pop": 35563535, "life_expect": 74.39, "fertility": 2.5700000000000003}, {"year": 1980, "country": "Spain", "cluster": 1, "pop": 37488360, "life_expect": 76.3, "fertility": 1.8900000000000001}, {"year": 1985, "country": "Spain", "cluster": 1, "pop": 38534853, "life_expect": 76.9, "fertility": 1.48}, {"year": 1990, "country": "Spain", "cluster": 1, "pop": 39350769, "life_expect": 77.57, "fertility": 1.27}, {"year": 1995, "country": "Spain", "cluster": 1, "pop": 39749715, "life_expect": 78.77, "fertility": 1.182}, {"year": 2000, "country": "Spain", "cluster": 1, "pop": 40016081, "life_expect": 79.78, "fertility": 1.287}, {"year": 2005, "country": "Spain", "cluster": 1, "pop": 40341462, "life_expect": 80.941, "fertility": 1.409}, {"year": 1955, "country": "Switzerland", "cluster": 1, "pop": 4980000, "life_expect": 70.56, "fertility": 2.34}, {"year": 1960, "country": "Switzerland", "cluster": 1, "pop": 5362000, "life_expect": 71.32, "fertility": 2.51}, {"year": 1965, "country": "Switzerland", "cluster": 1, "pop": 5943000, "life_expect": 72.77, "fertility": 2.27}, {"year": 1970, "country": "Switzerland", "cluster": 1, "pop": 6267000, "life_expect": 73.78, "fertility": 1.82}, {"year": 1975, "country": "Switzerland", "cluster": 1, "pop": 6403500, "life_expect": 75.39, "fertility": 1.53}, {"year": 1980, "country": "Switzerland", "cluster": 1, "pop": 6385229, "life_expect": 76.21, "fertility": 1.53}, {"year": 1985, "country": "Switzerland", "cluster": 1, "pop": 6563770, "life_expect": 77.41, "fertility": 1.53}, {"year": 1990, "country": "Switzerland", "cluster": 1, "pop": 6836626, "life_expect": 78.03, "fertility": 1.54}, {"year": 1995, "country": "Switzerland", "cluster": 1, "pop": 7157106, "life_expect": 79.37, "fertility": 1.47}, {"year": 2000, "country": "Switzerland", "cluster": 1, "pop": 7266920, "life_expect": 80.62, "fertility": 1.415}, {"year": 2005, "country": "Switzerland", "cluster": 1, "pop": 7489370, "life_expect": 81.701, "fertility": 1.42}, {"year": 1955, "country": "Turkey", "cluster": 1, "pop": 24144571, "life_expect": 48.079, "fertility": 6.6}, {"year": 1960, "country": "Turkey", "cluster": 1, "pop": 28217122, "life_expect": 52.098, "fertility": 6.19}, {"year": 1965, "country": "Turkey", "cluster": 1, "pop": 31950718, "life_expect": 54.336, "fertility": 5.7}, {"year": 1970, "country": "Turkey", "cluster": 1, "pop": 35758382, "life_expect": 57.005, "fertility": 5.3}, {"year": 1975, "country": "Turkey", "cluster": 1, "pop": 40529798, "life_expect": 59.507, "fertility": 4.715}, {"year": 1980, "country": "Turkey", "cluster": 1, "pop": 45120802, "life_expect": 61.036, "fertility": 4.15}, {"year": 1985, "country": "Turkey", "cluster": 1, "pop": 50669003, "life_expect": 63.108, "fertility": 3.276}, {"year": 1990, "country": "Turkey", "cluster": 1, "pop": 56084632, "life_expect": 66.146, "fertility": 2.904}, {"year": 1995, "country": "Turkey", "cluster": 1, "pop": 61188984, "life_expect": 68.835, "fertility": 2.574}, {"year": 2000, "country": "Turkey", "cluster": 1, "pop": 65666677, "life_expect": 70.845, "fertility": 2.23}, {"year": 2005, "country": "Turkey", "cluster": 1, "pop": 69660559, "life_expect": 71.777, "fertility": 2.143}, {"year": 1955, "country": "United Kingdom", "cluster": 1, "pop": 50946000, "life_expect": 70.42, "fertility": 2.49}, {"year": 1960, "country": "United Kingdom", "cluster": 1, "pop": 52372000, "life_expect": 70.76, "fertility": 2.81}, {"year": 1965, "country": "United Kingdom", "cluster": 1, "pop": 54350000, "life_expect": 71.36, "fertility": 2.52}, {"year": 1970, "country": "United Kingdom", "cluster": 1, "pop": 55632000, "life_expect": 72.01, "fertility": 2.04}, {"year": 1975, "country": "United Kingdom", "cluster": 1, "pop": 56215000, "life_expect": 72.76, "fertility": 1.72}, {"year": 1980, "country": "United Kingdom", "cluster": 1, "pop": 56314000, "life_expect": 74.04, "fertility": 1.8}, {"year": 1985, "country": "United Kingdom", "cluster": 1, "pop": 56620240, "life_expect": 75.007, "fertility": 1.81}, {"year": 1990, "country": "United Kingdom", "cluster": 1, "pop": 57493307, "life_expect": 76.42, "fertility": 1.78}, {"year": 1995, "country": "United Kingdom", "cluster": 1, "pop": 58426014, "life_expect": 77.218, "fertility": 1.7000000000000002}, {"year": 2000, "country": "United Kingdom", "cluster": 1, "pop": 59522468, "life_expect": 78.471, "fertility": 1.695}, {"year": 2005, "country": "United Kingdom", "cluster": 1, "pop": 60441457, "life_expect": 79.425, "fertility": 1.815}, {"year": 1955, "country": "United States", "cluster": 3, "pop": 165931000, "life_expect": 69.49, "fertility": 3.706}, {"year": 1960, "country": "United States", "cluster": 3, "pop": 180671000, "life_expect": 70.21, "fertility": 3.314}, {"year": 1965, "country": "United States", "cluster": 3, "pop": 194303000, "life_expect": 70.76, "fertility": 2.545}, {"year": 1970, "country": "United States", "cluster": 3, "pop": 205052000, "life_expect": 71.34, "fertility": 2.016}, {"year": 1975, "country": "United States", "cluster": 3, "pop": 215973000, "life_expect": 73.38, "fertility": 1.788}, {"year": 1980, "country": "United States", "cluster": 3, "pop": 227726463, "life_expect": 74.65, "fertility": 1.8250000000000002}, {"year": 1985, "country": "United States", "cluster": 3, "pop": 238466283, "life_expect": 75.02, "fertility": 1.924}, {"year": 1990, "country": "United States", "cluster": 3, "pop": 250131894, "life_expect": 76.09, "fertility": 2.025}, {"year": 1995, "country": "United States", "cluster": 3, "pop": 266557091, "life_expect": 76.81, "fertility": 1.994}, {"year": 2000, "country": "United States", "cluster": 3, "pop": 282338631, "life_expect": 77.31, "fertility": 2.038}, {"year": 2005, "country": "United States", "cluster": 3, "pop": 295734134, "life_expect": 78.242, "fertility": 2.054}, {"year": 1955, "country": "Venezuela", "cluster": 3, "pop": 6170497, "life_expect": 57.907, "fertility": 6.4585}, {"year": 1960, "country": "Venezuela", "cluster": 3, "pop": 7556483, "life_expect": 60.77, "fertility": 6.657}, {"year": 1965, "country": "Venezuela", "cluster": 3, "pop": 9067735, "life_expect": 63.479, "fertility": 5.9045000000000005}, {"year": 1970, "country": "Venezuela", "cluster": 3, "pop": 10758017, "life_expect": 65.712, "fertility": 4.941}, {"year": 1975, "country": "Venezuela", "cluster": 3, "pop": 12674987, "life_expect": 67.456, "fertility": 4.4685}, {"year": 1980, "country": "Venezuela", "cluster": 3, "pop": 14767890, "life_expect": 68.557, "fertility": 3.957}, {"year": 1985, "country": "Venezuela", "cluster": 3, "pop": 16997509, "life_expect": 70.19, "fertility": 3.6485000000000003}, {"year": 1990, "country": "Venezuela", "cluster": 3, "pop": 19325222, "life_expect": 71.15, "fertility": 3.25}, {"year": 1995, "country": "Venezuela", "cluster": 3, "pop": 21555902, "life_expect": 72.146, "fertility": 2.9415}, {"year": 2000, "country": "Venezuela", "cluster": 3, "pop": 23542649, "life_expect": 72.766, "fertility": 2.723}, {"year": 2005, "country": "Venezuela", "cluster": 3, "pop": 25375281, "life_expect": 73.747, "fertility": 2.547}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">line</span></code>マークは、<em>スロープグラフ</em>を作成するためにも使用できます。スロープグラフは、2つの比較ポイント間の値の変化を線の傾きで強調するチャートです。</p>
<p>以下では、データセット全体の最小年（1955年）と最大年（2005年）における各国の人口を比較するスロープグラフを作成します。まず、それらの年に絞り込んだ新しいPandasデータフレームを作成し、その後Altairを使用してスロープグラフを作成します。</p>
<p>デフォルトでは、Altairは年をx軸上で近接して配置します。x軸上の年をより適切に間隔を空けて配置するために、以下のコメントで示されているように、チャートの幅における離散的なステップのサイズ（ピクセル単位）を指定できます。以下の<code class="docutils literal notranslate"><span class="pre">step</span></code>値を調整して、チャートがどのように変化するかを確認してみてください。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dataTime</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1955</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2005</span><span class="p">)]</span>

<span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">dataTime</span><span class="p">)</span><span class="o">.</span><span class="n">mark_line</span><span class="p">(</span><span class="n">opacity</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;year:O&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;pop:Q&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s1">&#39;country:N&#39;</span><span class="p">,</span> <span class="n">legend</span><span class="o">=</span><span class="kc">None</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Tooltip</span><span class="p">(</span><span class="s1">&#39;country:N&#39;</span><span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
    <span class="n">width</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;step&quot;</span><span class="p">:</span> <span class="mi">50</span><span class="p">}</span> <span class="c1"># adjust the step parameter</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-3b243d9243814bedbfe7b7c7b142f35e.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-3b243d9243814bedbfe7b7c7b142f35e.vega-embed details,
  #altair-viz-3b243d9243814bedbfe7b7c7b142f35e.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-3b243d9243814bedbfe7b7c7b142f35e"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-3b243d9243814bedbfe7b7c7b142f35e") {
      outputDiv = document.getElementById("altair-viz-3b243d9243814bedbfe7b7c7b142f35e");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.16.3?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.16.3"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-cb152d9c221aa74672d5bedc49a3e5c7"}, "mark": {"type": "line", "opacity": 0.5}, "encoding": {"color": {"field": "country", "legend": null, "type": "nominal"}, "tooltip": {"field": "country", "type": "nominal"}, "x": {"field": "year", "type": "ordinal"}, "y": {"field": "pop", "type": "quantitative"}}, "width": {"step": 50}, "$schema": "https://vega.github.io/schema/vega-lite/v5.16.3.json", "datasets": {"data-cb152d9c221aa74672d5bedc49a3e5c7": [{"year": 1955, "country": "Afghanistan", "cluster": 0, "pop": 8891209, "life_expect": 30.332, "fertility": 7.7}, {"year": 2005, "country": "Afghanistan", "cluster": 0, "pop": 29928987, "life_expect": 43.828, "fertility": 7.0685}, {"year": 1955, "country": "Argentina", "cluster": 3, "pop": 18927821, "life_expect": 64.399, "fertility": 3.1265}, {"year": 2005, "country": "Argentina", "cluster": 3, "pop": 39537943, "life_expect": 75.32, "fertility": 2.254}, {"year": 1955, "country": "Aruba", "cluster": 3, "pop": 53865, "life_expect": 64.381, "fertility": 5.15}, {"year": 2005, "country": "Aruba", "cluster": 3, "pop": 71566, "life_expect": 74.239, "fertility": 2.04}, {"year": 1955, "country": "Australia", "cluster": 4, "pop": 9277087, "life_expect": 70.33, "fertility": 3.406}, {"year": 2005, "country": "Australia", "cluster": 4, "pop": 20090437, "life_expect": 81.235, "fertility": 1.788}, {"year": 1955, "country": "Austria", "cluster": 1, "pop": 6946885, "life_expect": 67.48, "fertility": 2.52}, {"year": 2005, "country": "Austria", "cluster": 1, "pop": 8184691, "life_expect": 79.829, "fertility": 1.42}, {"year": 1955, "country": "Bahamas", "cluster": 3, "pop": 87138, "life_expect": 62.405, "fertility": 4.305}, {"year": 2005, "country": "Bahamas", "cluster": 3, "pop": 301790, "life_expect": 73.495, "fertility": 2.0221}, {"year": 1955, "country": "Bangladesh", "cluster": 0, "pop": 49601520, "life_expect": 39.348, "fertility": 6.76}, {"year": 2005, "country": "Bangladesh", "cluster": 0, "pop": 144319628, "life_expect": 64.062, "fertility": 2.826}, {"year": 1955, "country": "Barbados", "cluster": 3, "pop": 227255, "life_expect": 62.57, "fertility": 4.67}, {"year": 2005, "country": "Barbados", "cluster": 3, "pop": 278870, "life_expect": 77.296, "fertility": 1.5}, {"year": 1955, "country": "Belgium", "cluster": 1, "pop": 8868475, "life_expect": 69.24, "fertility": 2.496}, {"year": 2005, "country": "Belgium", "cluster": 1, "pop": 10364388, "life_expect": 79.441, "fertility": 1.646}, {"year": 1955, "country": "Bolivia", "cluster": 3, "pop": 3074311, "life_expect": 41.89, "fertility": 6.75}, {"year": 2005, "country": "Bolivia", "cluster": 3, "pop": 8857870, "life_expect": 65.554, "fertility": 3.5}, {"year": 1955, "country": "Brazil", "cluster": 3, "pop": 61773546, "life_expect": 53.285, "fertility": 6.1501}, {"year": 2005, "country": "Brazil", "cluster": 3, "pop": 186112794, "life_expect": 72.39, "fertility": 2.245}, {"year": 1955, "country": "Canada", "cluster": 3, "pop": 16050356, "life_expect": 69.96, "fertility": 3.882}, {"year": 2005, "country": "Canada", "cluster": 3, "pop": 32805041, "life_expect": 80.653, "fertility": 1.5270000000000001}, {"year": 1955, "country": "Chile", "cluster": 3, "pop": 6743269, "life_expect": 56.074, "fertility": 5.486}, {"year": 2005, "country": "Chile", "cluster": 3, "pop": 15980912, "life_expect": 78.553, "fertility": 1.944}, {"year": 1955, "country": "China", "cluster": 4, "pop": 608655000, "life_expect": 50.54896, "fertility": 5.59}, {"year": 2005, "country": "China", "cluster": 4, "pop": 1303182268, "life_expect": 72.961, "fertility": 1.725}, {"year": 1955, "country": "Colombia", "cluster": 3, "pop": 13588405, "life_expect": 55.118, "fertility": 6.76}, {"year": 2005, "country": "Colombia", "cluster": 3, "pop": 42954279, "life_expect": 72.889, "fertility": 2.2205}, {"year": 1955, "country": "Costa Rica", "cluster": 3, "pop": 1031782, "life_expect": 60.026, "fertility": 7.1135}, {"year": 2005, "country": "Costa Rica", "cluster": 3, "pop": 4016173, "life_expect": 78.782, "fertility": 2.0985}, {"year": 1955, "country": "Croatia", "cluster": 1, "pop": 3955526, "life_expect": 64.77, "fertility": 2.42}, {"year": 2005, "country": "Croatia", "cluster": 1, "pop": 4495904, "life_expect": 75.748, "fertility": 1.346}, {"year": 1955, "country": "Cuba", "cluster": 3, "pop": 6381106, "life_expect": 62.325, "fertility": 3.6995}, {"year": 2005, "country": "Cuba", "cluster": 3, "pop": 11346670, "life_expect": 78.273, "fertility": 1.49}, {"year": 1955, "country": "Dominican Republic", "cluster": 3, "pop": 2737257, "life_expect": 49.828, "fertility": 7.6405}, {"year": 2005, "country": "Dominican Republic", "cluster": 3, "pop": 9049595, "life_expect": 72.235, "fertility": 2.81}, {"year": 1955, "country": "Ecuador", "cluster": 3, "pop": 3842399, "life_expect": 51.356, "fertility": 6.7}, {"year": 2005, "country": "Ecuador", "cluster": 3, "pop": 13363593, "life_expect": 74.994, "fertility": 2.578}, {"year": 1955, "country": "Egypt", "cluster": 5, "pop": 23855527, "life_expect": 44.444, "fertility": 6.97}, {"year": 2005, "country": "Egypt", "cluster": 5, "pop": 77505756, "life_expect": 71.338, "fertility": 2.891}, {"year": 1955, "country": "El Salvador", "cluster": 3, "pop": 2221139, "life_expect": 48.57, "fertility": 6.8065}, {"year": 2005, "country": "El Salvador", "cluster": 3, "pop": 6704932, "life_expect": 71.878, "fertility": 2.6825}, {"year": 1955, "country": "Finland", "cluster": 1, "pop": 4234900, "life_expect": 67.49, "fertility": 2.769}, {"year": 2005, "country": "Finland", "cluster": 1, "pop": 5223442, "life_expect": 79.313, "fertility": 1.8250000000000002}, {"year": 1955, "country": "France", "cluster": 1, "pop": 43427669, "life_expect": 68.93, "fertility": 2.7119999999999997}, {"year": 2005, "country": "France", "cluster": 1, "pop": 60656178, "life_expect": 80.657, "fertility": 1.8916}, {"year": 1955, "country": "Georgia", "cluster": 1, "pop": 3827154, "life_expect": 62.625, "fertility": 2.909}, {"year": 2005, "country": "Georgia", "cluster": 1, "pop": 4677401, "life_expect": 70.987, "fertility": 1.407}, {"year": 1955, "country": "Germany", "cluster": 1, "pop": 70195612, "life_expect": 69.1, "fertility": 2.3}, {"year": 2005, "country": "Germany", "cluster": 1, "pop": 82431390, "life_expect": 79.406, "fertility": 1.3599999999999999}, {"year": 1955, "country": "Greece", "cluster": 1, "pop": 7965538, "life_expect": 67.86, "fertility": 2.27}, {"year": 2005, "country": "Greece", "cluster": 1, "pop": 10668354, "life_expect": 79.483, "fertility": 1.325}, {"year": 1955, "country": "Grenada", "cluster": 3, "pop": 84621, "life_expect": 63.114, "fertility": 6.7}, {"year": 2005, "country": "Grenada", "cluster": 3, "pop": 89502, "life_expect": 68.724, "fertility": 2.302}, {"year": 1955, "country": "Haiti", "cluster": 3, "pop": 3376419, "life_expect": 40.696, "fertility": 6.3}, {"year": 2005, "country": "Haiti", "cluster": 3, "pop": 8121622, "life_expect": 60.916, "fertility": 3.5445}, {"year": 1955, "country": "Hong Kong", "cluster": 4, "pop": 2490400, "life_expect": 64.75, "fertility": 4.72}, {"year": 2005, "country": "Hong Kong", "cluster": 4, "pop": 6898686, "life_expect": 82.208, "fertility": 0.966}, {"year": 1955, "country": "Iceland", "cluster": 1, "pop": 158044, "life_expect": 73.47, "fertility": 4.023}, {"year": 2005, "country": "Iceland", "cluster": 1, "pop": 296737, "life_expect": 81.757, "fertility": 2.052}, {"year": 1955, "country": "India", "cluster": 0, "pop": 393000000, "life_expect": 40.249, "fertility": 5.8961}, {"year": 2005, "country": "India", "cluster": 0, "pop": 1080264388, "life_expect": 64.698, "fertility": 2.8073}, {"year": 1955, "country": "Indonesia", "cluster": 4, "pop": 86807000, "life_expect": 39.918, "fertility": 5.672}, {"year": 2005, "country": "Indonesia", "cluster": 4, "pop": 218465000, "life_expect": 70.65, "fertility": 2.182}, {"year": 1955, "country": "Iran", "cluster": 5, "pop": 18729000, "life_expect": 47.181, "fertility": 7.0}, {"year": 2005, "country": "Iran", "cluster": 5, "pop": 68017860, "life_expect": 70.964, "fertility": 2.04}, {"year": 1955, "country": "Iraq", "cluster": 5, "pop": 5903253, "life_expect": 48.437, "fertility": 7.3}, {"year": 2005, "country": "Iraq", "cluster": 5, "pop": 26074906, "life_expect": 59.545, "fertility": 4.264}, {"year": 1955, "country": "Ireland", "cluster": 1, "pop": 2916133, "life_expect": 68.9, "fertility": 3.68}, {"year": 2005, "country": "Ireland", "cluster": 1, "pop": 4015676, "life_expect": 78.885, "fertility": 1.964}, {"year": 1955, "country": "Israel", "cluster": 5, "pop": 1772032, "life_expect": 67.84, "fertility": 3.893}, {"year": 2005, "country": "Israel", "cluster": 5, "pop": 6276883, "life_expect": 80.745, "fertility": 2.75}, {"year": 1955, "country": "Italy", "cluster": 1, "pop": 48633000, "life_expect": 67.81, "fertility": 2.35}, {"year": 2005, "country": "Italy", "cluster": 1, "pop": 58103033, "life_expect": 80.546, "fertility": 1.379}, {"year": 1955, "country": "Jamaica", "cluster": 3, "pop": 1488805, "life_expect": 62.61, "fertility": 5.08}, {"year": 2005, "country": "Jamaica", "cluster": 3, "pop": 2735520, "life_expect": 72.567, "fertility": 2.4289}, {"year": 1955, "country": "Japan", "cluster": 4, "pop": 89815060, "life_expect": 65.5, "fertility": 2.08}, {"year": 2005, "country": "Japan", "cluster": 4, "pop": 127417244, "life_expect": 82.603, "fertility": 1.27}, {"year": 1955, "country": "Kenya", "cluster": 2, "pop": 7033999, "life_expect": 44.686, "fertility": 7.816}, {"year": 2005, "country": "Kenya", "cluster": 2, "pop": 33829590, "life_expect": 54.11, "fertility": 4.959}, {"year": 1955, "country": "South Korea", "cluster": 4, "pop": 8839427, "life_expect": 54.081, "fertility": 3.8}, {"year": 2005, "country": "South Korea", "cluster": 4, "pop": 22912177, "life_expect": 67.297, "fertility": 1.85}, {"year": 1955, "country": "North Korea", "cluster": 4, "pop": 21551834, "life_expect": 52.681, "fertility": 6.332}, {"year": 2005, "country": "North Korea", "cluster": 4, "pop": 48640671, "life_expect": 78.623, "fertility": 1.21}, {"year": 1955, "country": "Lebanon", "cluster": 5, "pop": 1560985, "life_expect": 59.489, "fertility": 5.72}, {"year": 2005, "country": "Lebanon", "cluster": 5, "pop": 3826018, "life_expect": 71.993, "fertility": 2.209}, {"year": 1955, "country": "Mexico", "cluster": 3, "pop": 32929914, "life_expect": 55.19, "fertility": 6.8}, {"year": 2005, "country": "Mexico", "cluster": 3, "pop": 106202903, "life_expect": 76.195, "fertility": 2.211}, {"year": 1955, "country": "Netherlands", "cluster": 1, "pop": 10750842, "life_expect": 72.99, "fertility": 3.095}, {"year": 2005, "country": "Netherlands", "cluster": 1, "pop": 16407491, "life_expect": 79.762, "fertility": 1.721}, {"year": 1955, "country": "New Zealand", "cluster": 4, "pop": 2136168, "life_expect": 70.26, "fertility": 4.07}, {"year": 2005, "country": "New Zealand", "cluster": 4, "pop": 4035461, "life_expect": 80.204, "fertility": 1.994}, {"year": 1955, "country": "Nigeria", "cluster": 2, "pop": 35458978, "life_expect": 37.802, "fertility": 6.9}, {"year": 2005, "country": "Nigeria", "cluster": 2, "pop": 128765768, "life_expect": 46.859, "fertility": 5.322}, {"year": 1955, "country": "Norway", "cluster": 1, "pop": 3427409, "life_expect": 73.44, "fertility": 2.8369999999999997}, {"year": 2005, "country": "Norway", "cluster": 1, "pop": 4593041, "life_expect": 80.196, "fertility": 1.8479999999999999}, {"year": 1955, "country": "Pakistan", "cluster": 0, "pop": 44434445, "life_expect": 45.557, "fertility": 6.6}, {"year": 2005, "country": "Pakistan", "cluster": 0, "pop": 162419946, "life_expect": 65.483, "fertility": 3.5211}, {"year": 1955, "country": "Peru", "cluster": 3, "pop": 8671500, "life_expect": 46.263, "fertility": 6.853}, {"year": 2005, "country": "Peru", "cluster": 3, "pop": 27925628, "life_expect": 71.421, "fertility": 2.5065}, {"year": 1955, "country": "Philippines", "cluster": 4, "pop": 24553055, "life_expect": 51.334, "fertility": 7.13}, {"year": 2005, "country": "Philippines", "cluster": 4, "pop": 87857473, "life_expect": 71.688, "fertility": 3.2327}, {"year": 1955, "country": "Poland", "cluster": 1, "pop": 27220668, "life_expect": 65.77, "fertility": 3.29}, {"year": 2005, "country": "Poland", "cluster": 1, "pop": 38557984, "life_expect": 75.563, "fertility": 1.227}, {"year": 1955, "country": "Portugal", "cluster": 1, "pop": 8692600, "life_expect": 61.51, "fertility": 3.03}, {"year": 2005, "country": "Portugal", "cluster": 1, "pop": 10566212, "life_expect": 78.098, "fertility": 1.455}, {"year": 1955, "country": "Rwanda", "cluster": 2, "pop": 2698272, "life_expect": 41.5, "fertility": 8.0}, {"year": 2005, "country": "Rwanda", "cluster": 2, "pop": 8440820, "life_expect": 46.242, "fertility": 5.9169}, {"year": 1955, "country": "Saudi Arabia", "cluster": 5, "pop": 4243218, "life_expect": 42.868, "fertility": 7.175}, {"year": 2005, "country": "Saudi Arabia", "cluster": 5, "pop": 26417599, "life_expect": 72.777, "fertility": 3.352}, {"year": 1955, "country": "South Africa", "cluster": 2, "pop": 15368551, "life_expect": 47.985, "fertility": 6.5}, {"year": 2005, "country": "South Africa", "cluster": 2, "pop": 44344136, "life_expect": 49.339, "fertility": 2.637}, {"year": 1955, "country": "Spain", "cluster": 1, "pop": 29318745, "life_expect": 66.66, "fertility": 2.75}, {"year": 2005, "country": "Spain", "cluster": 1, "pop": 40341462, "life_expect": 80.941, "fertility": 1.409}, {"year": 1955, "country": "Switzerland", "cluster": 1, "pop": 4980000, "life_expect": 70.56, "fertility": 2.34}, {"year": 2005, "country": "Switzerland", "cluster": 1, "pop": 7489370, "life_expect": 81.701, "fertility": 1.42}, {"year": 1955, "country": "Turkey", "cluster": 1, "pop": 24144571, "life_expect": 48.079, "fertility": 6.6}, {"year": 2005, "country": "Turkey", "cluster": 1, "pop": 69660559, "life_expect": 71.777, "fertility": 2.143}, {"year": 1955, "country": "United Kingdom", "cluster": 1, "pop": 50946000, "life_expect": 70.42, "fertility": 2.49}, {"year": 2005, "country": "United Kingdom", "cluster": 1, "pop": 60441457, "life_expect": 79.425, "fertility": 1.815}, {"year": 1955, "country": "United States", "cluster": 3, "pop": 165931000, "life_expect": 69.49, "fertility": 3.706}, {"year": 2005, "country": "United States", "cluster": 3, "pop": 295734134, "life_expect": 78.242, "fertility": 2.054}, {"year": 1955, "country": "Venezuela", "cluster": 3, "pop": 6170497, "life_expect": 57.907, "fertility": 6.4585}, {"year": 2005, "country": "Venezuela", "cluster": 3, "pop": 25375281, "life_expect": 73.747, "fertility": 2.547}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
</section>
<section id="id18">
<h3><span class="section-number">2.4.7. </span>エリアマーク<a class="headerlink" href="#id18" title="Link to this heading">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">area</span></code>マークタイプは、<code class="docutils literal notranslate"><span class="pre">line</span></code>マークと<code class="docutils literal notranslate"><span class="pre">bar</span></code>マークの特徴を組み合わせています。データポイント間の接続（傾き）を視覚化すると同時に、塗りつぶされた領域も表示します。この塗りつぶし領域の1つの端は、デフォルトでゼロ値の基準線に設定されます。</p>
<p>以下のチャートは、アメリカ合衆国における時間の経過に伴う人口を示すエリアチャートです:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dataUS</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;country&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;United States&#39;</span><span class="p">]</span>

<span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">dataUS</span><span class="p">)</span><span class="o">.</span><span class="n">mark_area</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;year:O&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;fertility:Q&#39;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-09957dab75e34aa0a3459e49ce3fe3d6.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-09957dab75e34aa0a3459e49ce3fe3d6.vega-embed details,
  #altair-viz-09957dab75e34aa0a3459e49ce3fe3d6.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-09957dab75e34aa0a3459e49ce3fe3d6"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-09957dab75e34aa0a3459e49ce3fe3d6") {
      outputDiv = document.getElementById("altair-viz-09957dab75e34aa0a3459e49ce3fe3d6");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.16.3?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.16.3"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-5ec75749a8b91a020fd2730b61b83888"}, "mark": {"type": "area"}, "encoding": {"x": {"field": "year", "type": "ordinal"}, "y": {"field": "fertility", "type": "quantitative"}}, "$schema": "https://vega.github.io/schema/vega-lite/v5.16.3.json", "datasets": {"data-5ec75749a8b91a020fd2730b61b83888": [{"year": 1955, "country": "United States", "cluster": 3, "pop": 165931000, "life_expect": 69.49, "fertility": 3.706}, {"year": 1960, "country": "United States", "cluster": 3, "pop": 180671000, "life_expect": 70.21, "fertility": 3.314}, {"year": 1965, "country": "United States", "cluster": 3, "pop": 194303000, "life_expect": 70.76, "fertility": 2.545}, {"year": 1970, "country": "United States", "cluster": 3, "pop": 205052000, "life_expect": 71.34, "fertility": 2.016}, {"year": 1975, "country": "United States", "cluster": 3, "pop": 215973000, "life_expect": 73.38, "fertility": 1.788}, {"year": 1980, "country": "United States", "cluster": 3, "pop": 227726463, "life_expect": 74.65, "fertility": 1.8250000000000002}, {"year": 1985, "country": "United States", "cluster": 3, "pop": 238466283, "life_expect": 75.02, "fertility": 1.924}, {"year": 1990, "country": "United States", "cluster": 3, "pop": 250131894, "life_expect": 76.09, "fertility": 2.025}, {"year": 1995, "country": "United States", "cluster": 3, "pop": 266557091, "life_expect": 76.81, "fertility": 1.994}, {"year": 2000, "country": "United States", "cluster": 3, "pop": 282338631, "life_expect": 77.31, "fertility": 2.038}, {"year": 2005, "country": "United States", "cluster": 3, "pop": 295734134, "life_expect": 78.242, "fertility": 2.054}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">line</span></code>マークと同様に、<code class="docutils literal notranslate"><span class="pre">area</span></code>マークも<code class="docutils literal notranslate"><span class="pre">interpolate</span></code>パラメータをサポートしています。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">dataUS</span><span class="p">)</span><span class="o">.</span><span class="n">mark_area</span><span class="p">(</span><span class="n">interpolate</span><span class="o">=</span><span class="s1">&#39;monotone&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;year:O&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;fertility:Q&#39;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-d626d8873de2483bba9d9b92694b06f9.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-d626d8873de2483bba9d9b92694b06f9.vega-embed details,
  #altair-viz-d626d8873de2483bba9d9b92694b06f9.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-d626d8873de2483bba9d9b92694b06f9"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-d626d8873de2483bba9d9b92694b06f9") {
      outputDiv = document.getElementById("altair-viz-d626d8873de2483bba9d9b92694b06f9");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.16.3?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.16.3"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-5ec75749a8b91a020fd2730b61b83888"}, "mark": {"type": "area", "interpolate": "monotone"}, "encoding": {"x": {"field": "year", "type": "ordinal"}, "y": {"field": "fertility", "type": "quantitative"}}, "$schema": "https://vega.github.io/schema/vega-lite/v5.16.3.json", "datasets": {"data-5ec75749a8b91a020fd2730b61b83888": [{"year": 1955, "country": "United States", "cluster": 3, "pop": 165931000, "life_expect": 69.49, "fertility": 3.706}, {"year": 1960, "country": "United States", "cluster": 3, "pop": 180671000, "life_expect": 70.21, "fertility": 3.314}, {"year": 1965, "country": "United States", "cluster": 3, "pop": 194303000, "life_expect": 70.76, "fertility": 2.545}, {"year": 1970, "country": "United States", "cluster": 3, "pop": 205052000, "life_expect": 71.34, "fertility": 2.016}, {"year": 1975, "country": "United States", "cluster": 3, "pop": 215973000, "life_expect": 73.38, "fertility": 1.788}, {"year": 1980, "country": "United States", "cluster": 3, "pop": 227726463, "life_expect": 74.65, "fertility": 1.8250000000000002}, {"year": 1985, "country": "United States", "cluster": 3, "pop": 238466283, "life_expect": 75.02, "fertility": 1.924}, {"year": 1990, "country": "United States", "cluster": 3, "pop": 250131894, "life_expect": 76.09, "fertility": 2.025}, {"year": 1995, "country": "United States", "cluster": 3, "pop": 266557091, "life_expect": 76.81, "fertility": 1.994}, {"year": 2000, "country": "United States", "cluster": 3, "pop": 282338631, "life_expect": 77.31, "fertility": 2.038}, {"year": 2005, "country": "United States", "cluster": 3, "pop": 295734134, "life_expect": 78.242, "fertility": 2.054}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">bar</span></code>マークと同様に、<code class="docutils literal notranslate"><span class="pre">area</span></code>マークも積み重ねをサポートしています。ここでは、北米の3か国のデータを含む新しいデータフレームを作成し、それを<code class="docutils literal notranslate"><span class="pre">area</span></code>マークと<code class="docutils literal notranslate"><span class="pre">color</span></code>エンコーディングチャネルを使用して、国ごとに積み重ねたチャートを作成します。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dataNA</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
    <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;country&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;United States&#39;</span><span class="p">)</span> <span class="o">|</span>
    <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;country&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Canada&#39;</span><span class="p">)</span> <span class="o">|</span>
    <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;country&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Mexico&#39;</span><span class="p">)</span>
<span class="p">]</span>

<span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">dataNA</span><span class="p">)</span><span class="o">.</span><span class="n">mark_area</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;year:O&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;pop:Q&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s1">&#39;country:N&#39;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-c841832705b7468a9df876b24de25923.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-c841832705b7468a9df876b24de25923.vega-embed details,
  #altair-viz-c841832705b7468a9df876b24de25923.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-c841832705b7468a9df876b24de25923"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-c841832705b7468a9df876b24de25923") {
      outputDiv = document.getElementById("altair-viz-c841832705b7468a9df876b24de25923");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.16.3?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.16.3"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-90247f35efb014c7706cfdd66a0e9a4d"}, "mark": {"type": "area"}, "encoding": {"color": {"field": "country", "type": "nominal"}, "x": {"field": "year", "type": "ordinal"}, "y": {"field": "pop", "type": "quantitative"}}, "$schema": "https://vega.github.io/schema/vega-lite/v5.16.3.json", "datasets": {"data-90247f35efb014c7706cfdd66a0e9a4d": [{"year": 1955, "country": "Canada", "cluster": 3, "pop": 16050356, "life_expect": 69.96, "fertility": 3.882}, {"year": 1960, "country": "Canada", "cluster": 3, "pop": 18266765, "life_expect": 71.3, "fertility": 3.675}, {"year": 1965, "country": "Canada", "cluster": 3, "pop": 20071104, "life_expect": 72.13, "fertility": 2.61}, {"year": 1970, "country": "Canada", "cluster": 3, "pop": 21749986, "life_expect": 72.88, "fertility": 1.976}, {"year": 1975, "country": "Canada", "cluster": 3, "pop": 23209200, "life_expect": 74.21, "fertility": 1.734}, {"year": 1980, "country": "Canada", "cluster": 3, "pop": 24593300, "life_expect": 75.76, "fertility": 1.634}, {"year": 1985, "country": "Canada", "cluster": 3, "pop": 25941600, "life_expect": 76.86, "fertility": 1.616}, {"year": 1990, "country": "Canada", "cluster": 3, "pop": 27790600, "life_expect": 77.95, "fertility": 1.694}, {"year": 1995, "country": "Canada", "cluster": 3, "pop": 29619002, "life_expect": 78.61, "fertility": 1.564}, {"year": 2000, "country": "Canada", "cluster": 3, "pop": 31278097, "life_expect": 79.77, "fertility": 1.522}, {"year": 2005, "country": "Canada", "cluster": 3, "pop": 32805041, "life_expect": 80.653, "fertility": 1.5270000000000001}, {"year": 1955, "country": "Mexico", "cluster": 3, "pop": 32929914, "life_expect": 55.19, "fertility": 6.8}, {"year": 1960, "country": "Mexico", "cluster": 3, "pop": 38578505, "life_expect": 58.299, "fertility": 6.7495}, {"year": 1965, "country": "Mexico", "cluster": 3, "pop": 45142399, "life_expect": 60.11, "fertility": 6.7495}, {"year": 1970, "country": "Mexico", "cluster": 3, "pop": 52775158, "life_expect": 62.361, "fertility": 6.5}, {"year": 1975, "country": "Mexico", "cluster": 3, "pop": 60678045, "life_expect": 65.032, "fertility": 5.2505}, {"year": 1980, "country": "Mexico", "cluster": 3, "pop": 68347479, "life_expect": 67.405, "fertility": 4.25}, {"year": 1985, "country": "Mexico", "cluster": 3, "pop": 76767225, "life_expect": 69.498, "fertility": 3.6295}, {"year": 1990, "country": "Mexico", "cluster": 3, "pop": 84913652, "life_expect": 71.455, "fertility": 3.1905}, {"year": 1995, "country": "Mexico", "cluster": 3, "pop": 92880353, "life_expect": 73.67, "fertility": 2.6705}, {"year": 2000, "country": "Mexico", "cluster": 3, "pop": 99926620, "life_expect": 74.902, "fertility": 2.4005}, {"year": 2005, "country": "Mexico", "cluster": 3, "pop": 106202903, "life_expect": 76.195, "fertility": 2.211}, {"year": 1955, "country": "United States", "cluster": 3, "pop": 165931000, "life_expect": 69.49, "fertility": 3.706}, {"year": 1960, "country": "United States", "cluster": 3, "pop": 180671000, "life_expect": 70.21, "fertility": 3.314}, {"year": 1965, "country": "United States", "cluster": 3, "pop": 194303000, "life_expect": 70.76, "fertility": 2.545}, {"year": 1970, "country": "United States", "cluster": 3, "pop": 205052000, "life_expect": 71.34, "fertility": 2.016}, {"year": 1975, "country": "United States", "cluster": 3, "pop": 215973000, "life_expect": 73.38, "fertility": 1.788}, {"year": 1980, "country": "United States", "cluster": 3, "pop": 227726463, "life_expect": 74.65, "fertility": 1.8250000000000002}, {"year": 1985, "country": "United States", "cluster": 3, "pop": 238466283, "life_expect": 75.02, "fertility": 1.924}, {"year": 1990, "country": "United States", "cluster": 3, "pop": 250131894, "life_expect": 76.09, "fertility": 2.025}, {"year": 1995, "country": "United States", "cluster": 3, "pop": 266557091, "life_expect": 76.81, "fertility": 1.994}, {"year": 2000, "country": "United States", "cluster": 3, "pop": 282338631, "life_expect": 77.31, "fertility": 2.038}, {"year": 2005, "country": "United States", "cluster": 3, "pop": 295734134, "life_expect": 78.242, "fertility": 2.054}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<p>デフォルトでは、積み重ねはゼロ基準に対して行われます。ただし、他の<code class="docutils literal notranslate"><span class="pre">stack</span></code>オプションも利用可能です：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">center</span></code> - チャートの中央に基準線を設定し、<em>ストリームグラフ</em>のビジュアライゼーションを作成。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">normalize</span></code> - 各積み重ねポイントで合計データを100％に正規化し、割合比較を可能にします。</p></li>
</ul>
<p>以下では、<code class="docutils literal notranslate"><span class="pre">y</span></code>エンコーディングの<code class="docutils literal notranslate"><span class="pre">stack</span></code>属性を<code class="docutils literal notranslate"><span class="pre">center</span></code>に設定してチャートを調整します。代わりに<code class="docutils literal notranslate"><span class="pre">normalize</span></code>を設定すると、どのように変化するでしょうか？</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">dataNA</span><span class="p">)</span><span class="o">.</span><span class="n">mark_area</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;year:O&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;pop:Q&#39;</span><span class="p">,</span> <span class="n">stack</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s1">&#39;country:N&#39;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-fd6ad729efc14614ada2f04db65a47f3.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-fd6ad729efc14614ada2f04db65a47f3.vega-embed details,
  #altair-viz-fd6ad729efc14614ada2f04db65a47f3.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-fd6ad729efc14614ada2f04db65a47f3"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-fd6ad729efc14614ada2f04db65a47f3") {
      outputDiv = document.getElementById("altair-viz-fd6ad729efc14614ada2f04db65a47f3");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.16.3?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.16.3"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-90247f35efb014c7706cfdd66a0e9a4d"}, "mark": {"type": "area"}, "encoding": {"color": {"field": "country", "type": "nominal"}, "x": {"field": "year", "type": "ordinal"}, "y": {"field": "pop", "stack": "center", "type": "quantitative"}}, "$schema": "https://vega.github.io/schema/vega-lite/v5.16.3.json", "datasets": {"data-90247f35efb014c7706cfdd66a0e9a4d": [{"year": 1955, "country": "Canada", "cluster": 3, "pop": 16050356, "life_expect": 69.96, "fertility": 3.882}, {"year": 1960, "country": "Canada", "cluster": 3, "pop": 18266765, "life_expect": 71.3, "fertility": 3.675}, {"year": 1965, "country": "Canada", "cluster": 3, "pop": 20071104, "life_expect": 72.13, "fertility": 2.61}, {"year": 1970, "country": "Canada", "cluster": 3, "pop": 21749986, "life_expect": 72.88, "fertility": 1.976}, {"year": 1975, "country": "Canada", "cluster": 3, "pop": 23209200, "life_expect": 74.21, "fertility": 1.734}, {"year": 1980, "country": "Canada", "cluster": 3, "pop": 24593300, "life_expect": 75.76, "fertility": 1.634}, {"year": 1985, "country": "Canada", "cluster": 3, "pop": 25941600, "life_expect": 76.86, "fertility": 1.616}, {"year": 1990, "country": "Canada", "cluster": 3, "pop": 27790600, "life_expect": 77.95, "fertility": 1.694}, {"year": 1995, "country": "Canada", "cluster": 3, "pop": 29619002, "life_expect": 78.61, "fertility": 1.564}, {"year": 2000, "country": "Canada", "cluster": 3, "pop": 31278097, "life_expect": 79.77, "fertility": 1.522}, {"year": 2005, "country": "Canada", "cluster": 3, "pop": 32805041, "life_expect": 80.653, "fertility": 1.5270000000000001}, {"year": 1955, "country": "Mexico", "cluster": 3, "pop": 32929914, "life_expect": 55.19, "fertility": 6.8}, {"year": 1960, "country": "Mexico", "cluster": 3, "pop": 38578505, "life_expect": 58.299, "fertility": 6.7495}, {"year": 1965, "country": "Mexico", "cluster": 3, "pop": 45142399, "life_expect": 60.11, "fertility": 6.7495}, {"year": 1970, "country": "Mexico", "cluster": 3, "pop": 52775158, "life_expect": 62.361, "fertility": 6.5}, {"year": 1975, "country": "Mexico", "cluster": 3, "pop": 60678045, "life_expect": 65.032, "fertility": 5.2505}, {"year": 1980, "country": "Mexico", "cluster": 3, "pop": 68347479, "life_expect": 67.405, "fertility": 4.25}, {"year": 1985, "country": "Mexico", "cluster": 3, "pop": 76767225, "life_expect": 69.498, "fertility": 3.6295}, {"year": 1990, "country": "Mexico", "cluster": 3, "pop": 84913652, "life_expect": 71.455, "fertility": 3.1905}, {"year": 1995, "country": "Mexico", "cluster": 3, "pop": 92880353, "life_expect": 73.67, "fertility": 2.6705}, {"year": 2000, "country": "Mexico", "cluster": 3, "pop": 99926620, "life_expect": 74.902, "fertility": 2.4005}, {"year": 2005, "country": "Mexico", "cluster": 3, "pop": 106202903, "life_expect": 76.195, "fertility": 2.211}, {"year": 1955, "country": "United States", "cluster": 3, "pop": 165931000, "life_expect": 69.49, "fertility": 3.706}, {"year": 1960, "country": "United States", "cluster": 3, "pop": 180671000, "life_expect": 70.21, "fertility": 3.314}, {"year": 1965, "country": "United States", "cluster": 3, "pop": 194303000, "life_expect": 70.76, "fertility": 2.545}, {"year": 1970, "country": "United States", "cluster": 3, "pop": 205052000, "life_expect": 71.34, "fertility": 2.016}, {"year": 1975, "country": "United States", "cluster": 3, "pop": 215973000, "life_expect": 73.38, "fertility": 1.788}, {"year": 1980, "country": "United States", "cluster": 3, "pop": 227726463, "life_expect": 74.65, "fertility": 1.8250000000000002}, {"year": 1985, "country": "United States", "cluster": 3, "pop": 238466283, "life_expect": 75.02, "fertility": 1.924}, {"year": 1990, "country": "United States", "cluster": 3, "pop": 250131894, "life_expect": 76.09, "fertility": 2.025}, {"year": 1995, "country": "United States", "cluster": 3, "pop": 266557091, "life_expect": 76.81, "fertility": 1.994}, {"year": 2000, "country": "United States", "cluster": 3, "pop": 282338631, "life_expect": 77.31, "fertility": 2.038}, {"year": 2005, "country": "United States", "cluster": 3, "pop": 295734134, "life_expect": 78.242, "fertility": 2.054}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<p>積み重ねを完全に無効にするには、<code class="docutils literal notranslate"><span class="pre">stack</span></code>属性を<code class="docutils literal notranslate"><span class="pre">None</span></code>に設定します。また、デフォルトのマークパラメータとして<code class="docutils literal notranslate"><span class="pre">opacity</span></code>を追加することで、重なり合った領域を視認しやすくすることができます！</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">dataNA</span><span class="p">)</span><span class="o">.</span><span class="n">mark_area</span><span class="p">(</span><span class="n">opacity</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;year:O&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;pop:Q&#39;</span><span class="p">,</span> <span class="n">stack</span><span class="o">=</span><span class="kc">None</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s1">&#39;country:N&#39;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-34a343fde2f34d42b9185d2ca1d171e1.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-34a343fde2f34d42b9185d2ca1d171e1.vega-embed details,
  #altair-viz-34a343fde2f34d42b9185d2ca1d171e1.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-34a343fde2f34d42b9185d2ca1d171e1"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-34a343fde2f34d42b9185d2ca1d171e1") {
      outputDiv = document.getElementById("altair-viz-34a343fde2f34d42b9185d2ca1d171e1");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.16.3?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.16.3"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-90247f35efb014c7706cfdd66a0e9a4d"}, "mark": {"type": "area", "opacity": 0.5}, "encoding": {"color": {"field": "country", "type": "nominal"}, "x": {"field": "year", "type": "ordinal"}, "y": {"field": "pop", "stack": null, "type": "quantitative"}}, "$schema": "https://vega.github.io/schema/vega-lite/v5.16.3.json", "datasets": {"data-90247f35efb014c7706cfdd66a0e9a4d": [{"year": 1955, "country": "Canada", "cluster": 3, "pop": 16050356, "life_expect": 69.96, "fertility": 3.882}, {"year": 1960, "country": "Canada", "cluster": 3, "pop": 18266765, "life_expect": 71.3, "fertility": 3.675}, {"year": 1965, "country": "Canada", "cluster": 3, "pop": 20071104, "life_expect": 72.13, "fertility": 2.61}, {"year": 1970, "country": "Canada", "cluster": 3, "pop": 21749986, "life_expect": 72.88, "fertility": 1.976}, {"year": 1975, "country": "Canada", "cluster": 3, "pop": 23209200, "life_expect": 74.21, "fertility": 1.734}, {"year": 1980, "country": "Canada", "cluster": 3, "pop": 24593300, "life_expect": 75.76, "fertility": 1.634}, {"year": 1985, "country": "Canada", "cluster": 3, "pop": 25941600, "life_expect": 76.86, "fertility": 1.616}, {"year": 1990, "country": "Canada", "cluster": 3, "pop": 27790600, "life_expect": 77.95, "fertility": 1.694}, {"year": 1995, "country": "Canada", "cluster": 3, "pop": 29619002, "life_expect": 78.61, "fertility": 1.564}, {"year": 2000, "country": "Canada", "cluster": 3, "pop": 31278097, "life_expect": 79.77, "fertility": 1.522}, {"year": 2005, "country": "Canada", "cluster": 3, "pop": 32805041, "life_expect": 80.653, "fertility": 1.5270000000000001}, {"year": 1955, "country": "Mexico", "cluster": 3, "pop": 32929914, "life_expect": 55.19, "fertility": 6.8}, {"year": 1960, "country": "Mexico", "cluster": 3, "pop": 38578505, "life_expect": 58.299, "fertility": 6.7495}, {"year": 1965, "country": "Mexico", "cluster": 3, "pop": 45142399, "life_expect": 60.11, "fertility": 6.7495}, {"year": 1970, "country": "Mexico", "cluster": 3, "pop": 52775158, "life_expect": 62.361, "fertility": 6.5}, {"year": 1975, "country": "Mexico", "cluster": 3, "pop": 60678045, "life_expect": 65.032, "fertility": 5.2505}, {"year": 1980, "country": "Mexico", "cluster": 3, "pop": 68347479, "life_expect": 67.405, "fertility": 4.25}, {"year": 1985, "country": "Mexico", "cluster": 3, "pop": 76767225, "life_expect": 69.498, "fertility": 3.6295}, {"year": 1990, "country": "Mexico", "cluster": 3, "pop": 84913652, "life_expect": 71.455, "fertility": 3.1905}, {"year": 1995, "country": "Mexico", "cluster": 3, "pop": 92880353, "life_expect": 73.67, "fertility": 2.6705}, {"year": 2000, "country": "Mexico", "cluster": 3, "pop": 99926620, "life_expect": 74.902, "fertility": 2.4005}, {"year": 2005, "country": "Mexico", "cluster": 3, "pop": 106202903, "life_expect": 76.195, "fertility": 2.211}, {"year": 1955, "country": "United States", "cluster": 3, "pop": 165931000, "life_expect": 69.49, "fertility": 3.706}, {"year": 1960, "country": "United States", "cluster": 3, "pop": 180671000, "life_expect": 70.21, "fertility": 3.314}, {"year": 1965, "country": "United States", "cluster": 3, "pop": 194303000, "life_expect": 70.76, "fertility": 2.545}, {"year": 1970, "country": "United States", "cluster": 3, "pop": 205052000, "life_expect": 71.34, "fertility": 2.016}, {"year": 1975, "country": "United States", "cluster": 3, "pop": 215973000, "life_expect": 73.38, "fertility": 1.788}, {"year": 1980, "country": "United States", "cluster": 3, "pop": 227726463, "life_expect": 74.65, "fertility": 1.8250000000000002}, {"year": 1985, "country": "United States", "cluster": 3, "pop": 238466283, "life_expect": 75.02, "fertility": 1.924}, {"year": 1990, "country": "United States", "cluster": 3, "pop": 250131894, "life_expect": 76.09, "fertility": 2.025}, {"year": 1995, "country": "United States", "cluster": 3, "pop": 266557091, "life_expect": 76.81, "fertility": 1.994}, {"year": 2000, "country": "United States", "cluster": 3, "pop": 282338631, "life_expect": 77.31, "fertility": 2.038}, {"year": 2005, "country": "United States", "cluster": 3, "pop": 295734134, "life_expect": 78.242, "fertility": 2.054}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">area</span></code>マークタイプは、データに基づいた基準線もサポートしており、上下の系列がデータフィールドによって決定されます。<code class="docutils literal notranslate"><span class="pre">bar</span></code>マークと同様に、<code class="docutils literal notranslate"><span class="pre">x</span></code>と<code class="docutils literal notranslate"><span class="pre">x2</span></code>（または<code class="docutils literal notranslate"><span class="pre">y</span></code>と<code class="docutils literal notranslate"><span class="pre">y2</span></code>）チャネルを使用して、エリアマークの終端ポイントを指定することができます。</p>
<p>以下のチャートは、北米諸国における年ごとの出生率の最小値と最大値の範囲を可視化しています:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">dataNA</span><span class="p">)</span><span class="o">.</span><span class="n">mark_area</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;year:O&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;min(fertility):Q&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Y2</span><span class="p">(</span><span class="s1">&#39;max(fertility):Q&#39;</span><span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
    <span class="n">width</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;step&quot;</span><span class="p">:</span> <span class="mi">40</span><span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-6fca4b8d4da945cd94ec92f034965e3c.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-6fca4b8d4da945cd94ec92f034965e3c.vega-embed details,
  #altair-viz-6fca4b8d4da945cd94ec92f034965e3c.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-6fca4b8d4da945cd94ec92f034965e3c"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-6fca4b8d4da945cd94ec92f034965e3c") {
      outputDiv = document.getElementById("altair-viz-6fca4b8d4da945cd94ec92f034965e3c");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.16.3?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.16.3"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-90247f35efb014c7706cfdd66a0e9a4d"}, "mark": {"type": "area"}, "encoding": {"x": {"field": "year", "type": "ordinal"}, "y": {"aggregate": "min", "field": "fertility", "type": "quantitative"}, "y2": {"aggregate": "max", "field": "fertility"}}, "width": {"step": 40}, "$schema": "https://vega.github.io/schema/vega-lite/v5.16.3.json", "datasets": {"data-90247f35efb014c7706cfdd66a0e9a4d": [{"year": 1955, "country": "Canada", "cluster": 3, "pop": 16050356, "life_expect": 69.96, "fertility": 3.882}, {"year": 1960, "country": "Canada", "cluster": 3, "pop": 18266765, "life_expect": 71.3, "fertility": 3.675}, {"year": 1965, "country": "Canada", "cluster": 3, "pop": 20071104, "life_expect": 72.13, "fertility": 2.61}, {"year": 1970, "country": "Canada", "cluster": 3, "pop": 21749986, "life_expect": 72.88, "fertility": 1.976}, {"year": 1975, "country": "Canada", "cluster": 3, "pop": 23209200, "life_expect": 74.21, "fertility": 1.734}, {"year": 1980, "country": "Canada", "cluster": 3, "pop": 24593300, "life_expect": 75.76, "fertility": 1.634}, {"year": 1985, "country": "Canada", "cluster": 3, "pop": 25941600, "life_expect": 76.86, "fertility": 1.616}, {"year": 1990, "country": "Canada", "cluster": 3, "pop": 27790600, "life_expect": 77.95, "fertility": 1.694}, {"year": 1995, "country": "Canada", "cluster": 3, "pop": 29619002, "life_expect": 78.61, "fertility": 1.564}, {"year": 2000, "country": "Canada", "cluster": 3, "pop": 31278097, "life_expect": 79.77, "fertility": 1.522}, {"year": 2005, "country": "Canada", "cluster": 3, "pop": 32805041, "life_expect": 80.653, "fertility": 1.5270000000000001}, {"year": 1955, "country": "Mexico", "cluster": 3, "pop": 32929914, "life_expect": 55.19, "fertility": 6.8}, {"year": 1960, "country": "Mexico", "cluster": 3, "pop": 38578505, "life_expect": 58.299, "fertility": 6.7495}, {"year": 1965, "country": "Mexico", "cluster": 3, "pop": 45142399, "life_expect": 60.11, "fertility": 6.7495}, {"year": 1970, "country": "Mexico", "cluster": 3, "pop": 52775158, "life_expect": 62.361, "fertility": 6.5}, {"year": 1975, "country": "Mexico", "cluster": 3, "pop": 60678045, "life_expect": 65.032, "fertility": 5.2505}, {"year": 1980, "country": "Mexico", "cluster": 3, "pop": 68347479, "life_expect": 67.405, "fertility": 4.25}, {"year": 1985, "country": "Mexico", "cluster": 3, "pop": 76767225, "life_expect": 69.498, "fertility": 3.6295}, {"year": 1990, "country": "Mexico", "cluster": 3, "pop": 84913652, "life_expect": 71.455, "fertility": 3.1905}, {"year": 1995, "country": "Mexico", "cluster": 3, "pop": 92880353, "life_expect": 73.67, "fertility": 2.6705}, {"year": 2000, "country": "Mexico", "cluster": 3, "pop": 99926620, "life_expect": 74.902, "fertility": 2.4005}, {"year": 2005, "country": "Mexico", "cluster": 3, "pop": 106202903, "life_expect": 76.195, "fertility": 2.211}, {"year": 1955, "country": "United States", "cluster": 3, "pop": 165931000, "life_expect": 69.49, "fertility": 3.706}, {"year": 1960, "country": "United States", "cluster": 3, "pop": 180671000, "life_expect": 70.21, "fertility": 3.314}, {"year": 1965, "country": "United States", "cluster": 3, "pop": 194303000, "life_expect": 70.76, "fertility": 2.545}, {"year": 1970, "country": "United States", "cluster": 3, "pop": 205052000, "life_expect": 71.34, "fertility": 2.016}, {"year": 1975, "country": "United States", "cluster": 3, "pop": 215973000, "life_expect": 73.38, "fertility": 1.788}, {"year": 1980, "country": "United States", "cluster": 3, "pop": 227726463, "life_expect": 74.65, "fertility": 1.8250000000000002}, {"year": 1985, "country": "United States", "cluster": 3, "pop": 238466283, "life_expect": 75.02, "fertility": 1.924}, {"year": 1990, "country": "United States", "cluster": 3, "pop": 250131894, "life_expect": 76.09, "fertility": 2.025}, {"year": 1995, "country": "United States", "cluster": 3, "pop": 266557091, "life_expect": 76.81, "fertility": 1.994}, {"year": 2000, "country": "United States", "cluster": 3, "pop": 282338631, "life_expect": 77.31, "fertility": 2.038}, {"year": 2005, "country": "United States", "cluster": 3, "pop": 295734134, "life_expect": 78.242, "fertility": 2.054}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
<p>1995年には、約4未満から約7未満までの広い範囲の値が見られます。一方、2005年には出生率全体の値とその変動幅が共に減少し、家族あたり子ども2人を中心に収束していることがわかります.</p>
<p>上記のすべての<code class="docutils literal notranslate"><span class="pre">area</span></code>マークの例では、縦方向のエリアを使用しています。しかし、AltairとVega-Liteは横方向のエリアもサポートしています。<code class="docutils literal notranslate"><span class="pre">x</span></code>チャネルと<code class="docutils literal notranslate"><span class="pre">y</span></code>チャネルを入れ替えるだけで、上記のチャートを横方向に変換してみましょう。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">dataNA</span><span class="p">)</span><span class="o">.</span><span class="n">mark_area</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span><span class="s1">&#39;year:O&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;min(fertility):Q&#39;</span><span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">X2</span><span class="p">(</span><span class="s1">&#39;max(fertility):Q&#39;</span><span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
    <span class="n">width</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;step&quot;</span><span class="p">:</span> <span class="mi">40</span><span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-5e1e7396438f44409cb379a87ca8e1ef.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-5e1e7396438f44409cb379a87ca8e1ef.vega-embed details,
  #altair-viz-5e1e7396438f44409cb379a87ca8e1ef.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-5e1e7396438f44409cb379a87ca8e1ef"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-5e1e7396438f44409cb379a87ca8e1ef") {
      outputDiv = document.getElementById("altair-viz-5e1e7396438f44409cb379a87ca8e1ef");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.16.3?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.16.3"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-90247f35efb014c7706cfdd66a0e9a4d"}, "mark": {"type": "area"}, "encoding": {"x": {"aggregate": "min", "field": "fertility", "type": "quantitative"}, "x2": {"aggregate": "max", "field": "fertility"}, "y": {"field": "year", "type": "ordinal"}}, "width": {"step": 40}, "$schema": "https://vega.github.io/schema/vega-lite/v5.16.3.json", "datasets": {"data-90247f35efb014c7706cfdd66a0e9a4d": [{"year": 1955, "country": "Canada", "cluster": 3, "pop": 16050356, "life_expect": 69.96, "fertility": 3.882}, {"year": 1960, "country": "Canada", "cluster": 3, "pop": 18266765, "life_expect": 71.3, "fertility": 3.675}, {"year": 1965, "country": "Canada", "cluster": 3, "pop": 20071104, "life_expect": 72.13, "fertility": 2.61}, {"year": 1970, "country": "Canada", "cluster": 3, "pop": 21749986, "life_expect": 72.88, "fertility": 1.976}, {"year": 1975, "country": "Canada", "cluster": 3, "pop": 23209200, "life_expect": 74.21, "fertility": 1.734}, {"year": 1980, "country": "Canada", "cluster": 3, "pop": 24593300, "life_expect": 75.76, "fertility": 1.634}, {"year": 1985, "country": "Canada", "cluster": 3, "pop": 25941600, "life_expect": 76.86, "fertility": 1.616}, {"year": 1990, "country": "Canada", "cluster": 3, "pop": 27790600, "life_expect": 77.95, "fertility": 1.694}, {"year": 1995, "country": "Canada", "cluster": 3, "pop": 29619002, "life_expect": 78.61, "fertility": 1.564}, {"year": 2000, "country": "Canada", "cluster": 3, "pop": 31278097, "life_expect": 79.77, "fertility": 1.522}, {"year": 2005, "country": "Canada", "cluster": 3, "pop": 32805041, "life_expect": 80.653, "fertility": 1.5270000000000001}, {"year": 1955, "country": "Mexico", "cluster": 3, "pop": 32929914, "life_expect": 55.19, "fertility": 6.8}, {"year": 1960, "country": "Mexico", "cluster": 3, "pop": 38578505, "life_expect": 58.299, "fertility": 6.7495}, {"year": 1965, "country": "Mexico", "cluster": 3, "pop": 45142399, "life_expect": 60.11, "fertility": 6.7495}, {"year": 1970, "country": "Mexico", "cluster": 3, "pop": 52775158, "life_expect": 62.361, "fertility": 6.5}, {"year": 1975, "country": "Mexico", "cluster": 3, "pop": 60678045, "life_expect": 65.032, "fertility": 5.2505}, {"year": 1980, "country": "Mexico", "cluster": 3, "pop": 68347479, "life_expect": 67.405, "fertility": 4.25}, {"year": 1985, "country": "Mexico", "cluster": 3, "pop": 76767225, "life_expect": 69.498, "fertility": 3.6295}, {"year": 1990, "country": "Mexico", "cluster": 3, "pop": 84913652, "life_expect": 71.455, "fertility": 3.1905}, {"year": 1995, "country": "Mexico", "cluster": 3, "pop": 92880353, "life_expect": 73.67, "fertility": 2.6705}, {"year": 2000, "country": "Mexico", "cluster": 3, "pop": 99926620, "life_expect": 74.902, "fertility": 2.4005}, {"year": 2005, "country": "Mexico", "cluster": 3, "pop": 106202903, "life_expect": 76.195, "fertility": 2.211}, {"year": 1955, "country": "United States", "cluster": 3, "pop": 165931000, "life_expect": 69.49, "fertility": 3.706}, {"year": 1960, "country": "United States", "cluster": 3, "pop": 180671000, "life_expect": 70.21, "fertility": 3.314}, {"year": 1965, "country": "United States", "cluster": 3, "pop": 194303000, "life_expect": 70.76, "fertility": 2.545}, {"year": 1970, "country": "United States", "cluster": 3, "pop": 205052000, "life_expect": 71.34, "fertility": 2.016}, {"year": 1975, "country": "United States", "cluster": 3, "pop": 215973000, "life_expect": 73.38, "fertility": 1.788}, {"year": 1980, "country": "United States", "cluster": 3, "pop": 227726463, "life_expect": 74.65, "fertility": 1.8250000000000002}, {"year": 1985, "country": "United States", "cluster": 3, "pop": 238466283, "life_expect": 75.02, "fertility": 1.924}, {"year": 1990, "country": "United States", "cluster": 3, "pop": 250131894, "life_expect": 76.09, "fertility": 2.025}, {"year": 1995, "country": "United States", "cluster": 3, "pop": 266557091, "life_expect": 76.81, "fertility": 1.994}, {"year": 2000, "country": "United States", "cluster": 3, "pop": 282338631, "life_expect": 77.31, "fertility": 2.038}, {"year": 2005, "country": "United States", "cluster": 3, "pop": 295734134, "life_expect": 78.242, "fertility": 2.054}]}}, {"mode": "vega-lite"});
</script></div></div>
</div>
</section>
</section>
<section id="id19">
<h2><span class="section-number">2.5. </span>まとめ<a class="headerlink" href="#id19" title="Link to this heading">#</a></h2>
<p>データ型、エンコーディングチャネル、グラフィカルマークの探索を完了しました！これで、エンコーディング、マークタイプ、およびマークパラメータの世界をさらに探求する準備が整いました。より包括的なリファレンス（ここで省略した機能も含む！）については、Altairの<a class="reference external" href="https://altair-viz.github.io/user_guide/marks/index.html">マーク</a>と<a class="reference external" href="https://altair-viz.github.io/user_guide/encodings/index.html">エンコーディング</a>のドキュメントをご覧ください。</p>
<p>次のモジュールでは、データを要約したり、新しい派生フィールドを可視化したりするためのデータ変換の使用方法を見ていきます。また、後のモジュールでは、スケール、軸、凡例を変更してチャートをさらにカスタマイズする方法を学びます。</p>
<p>視覚エンコーディングについてもっと学びたいですか？</p>
<p><img title="ベルタンの視覚エンコーディングチャネルの分類" src="https://cdn-images-1.medium.com/max/2000/1*jsb78Rr2cDy6zrE7j2IKig.png" style="max-width: 650px;"><br/></p>
<p><small>Mike Bostockによる適応版、<a href="https://books.google.com/books/about/Semiology_of_Graphics.html?id=X5caQwAACAAJ"><em>Sémiologie Graphique</em></a>からのベルタンの視覚エンコーディング分類。</small></p>
<ul class="simple">
<li><p>マーク、視覚エンコーディング、および基盤となるデータ型の体系的な研究は、<a class="reference external" href="https://en.wikipedia.org/wiki/Jacques_Bertin">ジャック・ベルタン (Jacques Bertin)</a>が1967年に発表した先駆的な著書 <a class="reference external" href="https://books.google.com/books/about/Semiology_of_Graphics.html?id=X5caQwAACAAJ"><em>Sémiologie Graphique (グラフィックの記号論)</em></a> によって始まりました。上記の画像は、位置、サイズ、値（明るさ）、テクスチャ、色相、向き、形状チャネルを示し、それらがサポートするデータ型に関するベルタンの推奨を説明しています。</p></li>
<li><p>データ型、マーク、チャネルのフレームワークは、1986年に発表された<a class="reference external" href="https://scholar.google.com/scholar?cluster=10191273548472217907">MackinlayのAPT (A Presentation Tool)</a>を皮切りに、<a class="reference external" href="http://idl.cs.washington.edu/papers/voyager/">Voyager</a>や<a class="reference external" href="http://idl.cs.washington.edu/papers/draco/">Draco</a>のような近年のシステムに至るまで、_自動化_された可視化デザインツールにも影響を与えています。</p></li>
<li><p>名義型、順序型、間隔型、比率型の識別は、少なくともS. S. Stevenが1947年に発表した記事 <a class="reference external" href="https://scholar.google.com/scholar?cluster=14356809180080326415"><em>On the theory of scales of measurement</em></a> までさかのぼります。</p></li>
</ul>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="altair_introduction.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">1. </span>Altairの紹介</p>
      </div>
    </a>
    <a class="right-next"
       href="altair_data_transformation.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">3. </span>Data Transformation</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#global-development-data">2.1. Global Development Data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">2.2. データ型</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#n">2.2.1. 名義型 (N)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#o">2.2.2. 順序型 (O)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#q">2.2.3. 量的型 (Q)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#t">2.2.4. 時間型 (T)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">2.2.5. まとめ</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">2.3. エンコーディングチャネル</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#x">2.3.1. X</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#y">2.3.2. Y</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">2.3.3. サイズ</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">2.3.4. 色と不透明度</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">2.3.5. 形状</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">2.3.6. ツールチップと順序</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">2.3.7. 列と行のファセット</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">2.3.8. 先取り: インタラクティブフィルタリング</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">2.4. グラフィカルマーク</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id12">2.4.1. ポイントマーク</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id13">2.4.2. サークルマーク</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id14">2.4.3. スクエアマーク</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id15">2.4.4. ティックマーク</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id16">2.4.5. バーマーク</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id17">2.4.6. ラインマーク</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id18">2.4.7. エリアマーク</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id19">2.5. まとめ</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Jeffrey Heer, Dominik Moritz, Jake VanderPlas, and Brock Craft
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>